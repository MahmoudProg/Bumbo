import{a as N,b as pe,c as Oh,d as y,e as $_,f as ku,g as z_,h as q_,i as H_,j as kh,k as G_,l as ms,m as Fh,n as Fu,o as W_,p as K_,q as Vh,r as _e,s as kr,t as tn,u as Vu,v as ys,w as Q_,x as Y_,y as Yn,z as at}from"./chunk-W354PV4M.js";var Z_=null;var Lh=1,X_=Symbol("SIGNAL");function _t(t){let e=Z_;return Z_=t,e}var J_={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function iM(t){if(!(Bh(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Lh)){if(!t.producerMustRecompute(t)&&!jh(t)){t.dirty=!1,t.lastCleanEpoch=Lh;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Lh}}function ew(t){return t&&(t.nextProducerIndex=0),_t(t)}function tw(t,e){if(_t(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Bh(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Uh(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function jh(t){Lu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(iM(n),r!==n.version))return!0}return!1}function nw(t){if(Lu(t),Bh(t))for(let e=0;e<t.producerNode.length;e++)Uh(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Uh(t,e){if(oM(t),Lu(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Uh(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Lu(i),i.producerIndexOfThis[r]=e}}function Bh(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Lu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function oM(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function sM(){throw new Error}var aM=sM;function rw(t){aM=t}function $(t){return typeof t=="function"}function Li(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ju=Li(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Fr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Se=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if($(r))try{r()}catch(o){e=o instanceof ju?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{iw(o)}catch(s){e=e??[],s instanceof ju?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ju(e)}}add(e){var n;if(e&&e!==this)if(this.closed)iw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Fr(n,e)}remove(e){let{_finalizers:n}=this;n&&Fr(n,e),e instanceof t&&e._removeParent(this)}};Se.EMPTY=(()=>{let t=new Se;return t.closed=!0,t})();var $h=Se.EMPTY;function Uu(t){return t instanceof Se||t&&"closed"in t&&$(t.remove)&&$(t.add)&&$(t.unsubscribe)}function iw(t){$(t)?t():t.unsubscribe()}var Bt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ji={setTimeout(t,e,...n){let{delegate:r}=ji;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ji;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Bu(t){ji.setTimeout(()=>{let{onUnhandledError:e}=Bt;if(e)e(t);else throw t})}function vs(){}var ow=zh("C",void 0,void 0);function sw(t){return zh("E",void 0,t)}function aw(t){return zh("N",t,void 0)}function zh(t,e,n){return{kind:t,value:e,error:n}}var Vr=null;function Ui(t){if(Bt.useDeprecatedSynchronousErrorHandling){let e=!Vr;if(e&&(Vr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Vr;if(Vr=null,n)throw r}}else t()}function uw(t){Bt.useDeprecatedSynchronousErrorHandling&&Vr&&(Vr.errorThrown=!0,Vr.error=t)}var Lr=class extends Se{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Uu(e)&&e.add(this)):this.destination=lM}static create(e,n,r){return new An(e,n,r)}next(e){this.isStopped?Hh(aw(e),this):this._next(e)}error(e){this.isStopped?Hh(sw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hh(ow,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},uM=Function.prototype.bind;function qh(t,e){return uM.call(t,e)}var Gh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){$u(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){$u(r)}else $u(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){$u(n)}}},An=class extends Lr{constructor(e,n,r){super();let i;if($(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Bt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&qh(e.next,o),error:e.error&&qh(e.error,o),complete:e.complete&&qh(e.complete,o)}):i=e}this.destination=new Gh(i)}};function $u(t){Bt.useDeprecatedSynchronousErrorHandling?uw(t):Bu(t)}function cM(t){throw t}function Hh(t,e){let{onStoppedNotification:n}=Bt;n&&ji.setTimeout(()=>n(t,e))}var lM={closed:!0,next:vs,error:cM,complete:vs};var Bi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ut(t){return t}function Wh(...t){return Kh(t)}function Kh(t){return t.length===0?ut:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Z=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=hM(n)?n:new An(n,r,i);return Ui(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=cw(r),new r((i,o)=>{let s=new An({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Bi](){return this}pipe(...n){return Kh(n)(this)}toPromise(n){return n=cw(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function cw(t){var e;return(e=t??Bt.Promise)!==null&&e!==void 0?e:Promise}function dM(t){return t&&$(t.next)&&$(t.error)&&$(t.complete)}function hM(t){return t&&t instanceof Lr||dM(t)&&Uu(t)}function Qh(t){return $(t?.lift)}function K(t){return e=>{if(Qh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(t,e,n,r,i){return new Yh(t,e,n,r,i)}var Yh=class extends Lr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function $i(){return K((t,e)=>{let n=null;t._refCount++;let r=Q(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var zi=class extends Z{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Qh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Se;let n=this.getSubject();e.add(this.source.subscribe(Q(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Se.EMPTY)}return e}refCount(){return $i()(this)}};var lw=Li(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var je=(()=>{class t extends Z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new zu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new lw}next(n){Ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?$h:(this.currentObservers=null,o.push(n),new Se(()=>{this.currentObservers=null,Fr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Z;return n.source=this,n}}return t.create=(e,n)=>new zu(e,n),t})(),zu=class extends je{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:$h}};var We=class extends je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var _s={now(){return(_s.delegate||Date).now()},delegate:void 0};var qu=class extends je{constructor(e=1/0,n=1/0,r=_s){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Hu=class extends Se{constructor(e,n){super()}schedule(e,n=0){return this}};var ws={setInterval(t,e,...n){let{delegate:r}=ws;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ws;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var qi=class extends Hu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return ws.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ws.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Fr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Hi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Hi.now=_s.now;var Gi=class extends Hi{constructor(e,n=Hi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Es=new Gi(qi);var Gu=class extends qi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Wu=class extends Gi{};var Zh=new Wu(Gu);var pt=new Z(t=>t.complete());function dw(t){return t&&$(t.schedule)}function Xh(t){return t[t.length-1]}function hw(t){return $(Xh(t))?t.pop():void 0}function nn(t){return dw(Xh(t))?t.pop():void 0}function fw(t,e){return typeof Xh(t)=="number"?t.pop():e}var Ku=t=>t&&typeof t.length=="number"&&typeof t!="function";function Qu(t){return $(t?.then)}function Yu(t){return $(t[Bi])}function Zu(t){return Symbol.asyncIterator&&$(t?.[Symbol.asyncIterator])}function Xu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function fM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ju=fM();function ec(t){return $(t?.[Ju])}function tc(t){return z_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ku(n.read());if(i)return yield ku(void 0);yield yield ku(r)}}finally{n.releaseLock()}})}function nc(t){return $(t?.getReader)}function we(t){if(t instanceof Z)return t;if(t!=null){if(Yu(t))return pM(t);if(Ku(t))return gM(t);if(Qu(t))return mM(t);if(Zu(t))return pw(t);if(ec(t))return yM(t);if(nc(t))return vM(t)}throw Xu(t)}function pM(t){return new Z(e=>{let n=t[Bi]();if($(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function gM(t){return new Z(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function mM(t){return new Z(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Bu)})}function yM(t){return new Z(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function pw(t){return new Z(e=>{_M(t,e).catch(n=>e.error(n))})}function vM(t){return pw(tc(t))}function _M(t,e){var n,r,i,o;return $_(this,void 0,void 0,function*(){try{for(n=q_(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function gt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function At(t,e=0){return K((n,r)=>{n.subscribe(Q(r,i=>gt(r,t,()=>r.next(i),e),()=>gt(r,t,()=>r.complete(),e),i=>gt(r,t,()=>r.error(i),e)))})}function $t(t,e=0){return K((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function gw(t,e){return we(t).pipe($t(e),At(e))}function mw(t,e){return we(t).pipe($t(e),At(e))}function yw(t,e){return new Z(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function vw(t,e){return new Z(n=>{let r;return gt(n,e,()=>{r=t[Ju](),gt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>$(r?.return)&&r.return()})}function rc(t,e){if(!t)throw new Error("Iterable cannot be null");return new Z(n=>{gt(n,e,()=>{let r=t[Symbol.asyncIterator]();gt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function _w(t,e){return rc(tc(t),e)}function ww(t,e){if(t!=null){if(Yu(t))return gw(t,e);if(Ku(t))return yw(t,e);if(Qu(t))return mw(t,e);if(Zu(t))return rc(t,e);if(ec(t))return vw(t,e);if(nc(t))return _w(t,e)}throw Xu(t)}function ie(t,e){return e?ww(t,e):we(t)}function F(...t){let e=nn(t);return ie(t,e)}function Wi(t,e){let n=$(t)?t:()=>t,r=i=>i.error(n());return new Z(e?i=>e.schedule(r,0,i):r)}function Jh(t){return!!t&&(t instanceof Z||$(t.lift)&&$(t.subscribe))}var Sn=Li(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function L(t,e){return K((n,r)=>{let i=0;n.subscribe(Q(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:wM}=Array;function EM(t,e){return wM(e)?t(...e):t(e)}function Ew(t){return L(e=>EM(t,e))}var{isArray:IM}=Array,{getPrototypeOf:DM,prototype:CM,keys:TM}=Object;function Iw(t){if(t.length===1){let e=t[0];if(IM(e))return{args:e,keys:null};if(bM(e)){let n=TM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function bM(t){return t&&typeof t=="object"&&DM(t)===CM}function Dw(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Is(...t){let e=nn(t),n=hw(t),{args:r,keys:i}=Iw(t);if(r.length===0)return ie([],e);let o=new Z(AM(r,e,i?s=>Dw(i,s):ut));return n?o.pipe(Ew(n)):o}function AM(t,e,n=ut){return r=>{Cw(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Cw(e,()=>{let c=ie(t[u],e),l=!1;c.subscribe(Q(r,d=>{o[u]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Cw(t,e,n){t?gt(n,t,e):e()}function Tw(t,e,n,r,i,o,s,a){let u=[],c=0,l=0,d=!1,h=()=>{d&&!u.length&&!c&&e.complete()},f=v=>c<r?_(v):u.push(v),_=v=>{o&&e.next(v),c++;let m=!1;we(n(v,l++)).subscribe(Q(e,I=>{i?.(I),o?f(I):e.next(I)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;u.length&&c<r;){let I=u.shift();s?gt(e,s,()=>_(I)):_(I)}h()}catch(I){e.error(I)}}))};return t.subscribe(Q(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Ne(t,e,n=1/0){return $(e)?Ne((r,i)=>L((o,s)=>e(r,o,i,s))(we(t(r,i))),n):(typeof e=="number"&&(n=e),K((r,i)=>Tw(r,i,t,n)))}function Zn(t=1/0){return Ne(ut,t)}function bw(){return Zn(1)}function Ki(...t){return bw()(ie(t,nn(t)))}function ic(t){return new Z(e=>{we(t()).subscribe(e)})}function ef(...t){let e=nn(t),n=fw(t,1/0),r=t;return r.length?r.length===1?we(r[0]):Zn(n)(ie(r,e)):pt}function Ue(t,e){return K((n,r)=>{let i=0;n.subscribe(Q(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Xn(t){return K((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Q(n,void 0,void 0,s=>{o=we(t(s,Xn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Aw(t,e,n,r,i){return(o,s)=>{let a=n,u=e,c=0;o.subscribe(Q(s,l=>{let d=c++;u=a?t(u,l,d):(a=!0,l),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Mn(t,e){return $(e)?Ne(t,e,1):Ne(t,1)}function Jn(t){return K((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function xn(t){return t<=0?()=>pt:K((e,n)=>{let r=0;e.subscribe(Q(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function tf(t){return L(()=>t)}function nf(t,e=ut){return t=t??SM,K((n,r)=>{let i,o=!0;n.subscribe(Q(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function SM(t,e){return t===e}function oc(t=MM){return K((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function MM(){return new Sn}function er(t){return K((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function St(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ue((i,o)=>t(i,o,r)):ut,xn(1),n?Jn(e):oc(()=>new Sn))}function Qi(t){return t<=0?()=>pt:K((e,n)=>{let r=[];e.subscribe(Q(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function rf(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ue((i,o)=>t(i,o,r)):ut,Qi(1),n?Jn(e):oc(()=>new Sn))}function Ds(){return K((t,e)=>{let n,r=!1;t.subscribe(Q(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function jr(t,e){return K(Aw(t,e,arguments.length>=2,!0))}function Sw(t={}){let{connector:e=()=>new je,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,c=0,l=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=u=void 0,l=d=!1},_=()=>{let v=s;f(),v?.unsubscribe()};return K((v,m)=>{c++,!d&&!l&&h();let I=u=u??e();m.add(()=>{c--,c===0&&!d&&!l&&(a=of(_,i))}),I.subscribe(m),!s&&c>0&&(s=new An({next:P=>I.next(P),error:P=>{d=!0,h(),a=of(f,n,P),I.error(P)},complete:()=>{l=!0,h(),a=of(f,r),I.complete()}}),we(v).subscribe(s))})(o)}}function of(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new An({next:()=>{r.unsubscribe(),t()}});return we(e(...n)).subscribe(r)}function sc(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,Sw({connector:()=>new qu(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Ur(...t){let e=nn(t);return K((n,r)=>{(e?Ki(t,n,e):Ki(t,n)).subscribe(r)})}function ye(t,e){return K((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Q(r,u=>{i?.unsubscribe();let c=0,l=o++;we(t(u,l)).subscribe(i=Q(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ac(t,e){return $(e)?ye(()=>t,e):ye(()=>t)}function sf(t){return K((e,n)=>{we(t).subscribe(Q(n,()=>n.complete(),vs)),!n.closed&&e.subscribe(n)})}function Me(t,e,n){let r=$(t)||e||n?{next:t,error:e,complete:n}:t;return r?K((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Q(o,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),o.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):ut}var U=class extends Error{constructor(e,n){super(Nc(e,n)),this.code=e}};function Nc(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ce(t){for(let e in t)if(t[e]===ce)return e;throw Error("Could not find renamed property on target object.")}function mt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(mt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Mw(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var xM=ce({__forward_ref__:ce});function Qf(t){return t.__forward_ref__=Qf,t.toString=function(){return mt(this())},t}function xt(t){return lE(t)?t():t}function lE(t){return typeof t=="function"&&t.hasOwnProperty(xM)&&t.__forward_ref__===Qf}function dE(t){return t&&!!t.\u0275providers}var PM=ce({\u0275cmp:ce}),RM=ce({\u0275dir:ce}),NM=ce({\u0275pipe:ce}),OM=ce({\u0275mod:ce}),gc=ce({\u0275fac:ce}),Cs=ce({__NG_ELEMENT_ID__:ce}),xw=ce({__NG_ENV_ID__:ce});function kM(t){return typeof t=="string"?t:t==null?"":String(t)}function FM(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():kM(t)}function VM(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new U(-200,t)}function Yf(t,e){throw new U(-201,!1)}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function De(t){return{providers:t.providers||[],imports:t.imports||[]}}function Oc(t){return Pw(t,fE)||Pw(t,pE)}function hE(t){return Oc(t)!==null}function Pw(t,e){return t.hasOwnProperty(e)?t[e]:null}function LM(t){let e=t&&(t[fE]||t[pE]);return e||null}function Rw(t){return t&&(t.hasOwnProperty(Nw)||t.hasOwnProperty(jM))?t[Nw]:null}var fE=ce({\u0275prov:ce}),Nw=ce({\u0275inj:ce}),pE=ce({ngInjectableDef:ce}),jM=ce({ngInjectorDef:ce}),Y=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Y||{}),mf;function gE(){return mf}function Mt(t){let e=mf;return mf=t,e}function mE(t,e,n){let r=Oc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Y.Optional)return null;if(e!==void 0)return e;Yf(t,"Injector")}var wt=globalThis;var M=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=O({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var UM={},bs=UM,yf="__NG_DI_FLAG__",mc="ngTempTokenPath",BM="ngTokenPath",$M=/\n/gm,zM="\u0275",Ow="__source",eo;function qM(){return eo}function tr(t){let e=eo;return eo=t,e}function HM(t,e=Y.Default){if(eo===void 0)throw new U(-203,!1);return eo===null?mE(t,void 0,e):eo.get(t,e&Y.Optional?null:void 0,e)}function D(t,e=Y.Default){return(gE()||HM)(xt(t),e)}function C(t,e=Y.Default){return D(t,kc(e))}function kc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function vf(t){let e=[];for(let n=0;n<t.length;n++){let r=xt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,o=Y.Default;for(let s=0;s<r.length;s++){let a=r[s],u=GM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(D(i,o))}else e.push(D(r))}return e}function yE(t,e){return t[yf]=e,t.prototype[yf]=e,t}function GM(t){return t[yf]}function WM(t,e,n,r){let i=t[mc];throw e[Ow]&&i.unshift(e[Ow]),t.message=KM(`
`+t.message,i,n,r),t[BM]=i,t[mc]=null,t}function KM(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==zM?t.slice(2):t;let i=mt(e);if(Array.isArray(e))i=e.map(mt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):mt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace($M,`
  `)}`}function Ls(t){return{toString:t}.toString()}var vE=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(vE||{}),an=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(an||{}),As={},rn=[],Pn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Pn||{});function _E(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function _f(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];YM(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function QM(t){return t===3||t===4||t===6}function YM(t){return t.charCodeAt(0)===64}function Zf(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?kw(t,n,i,null,e[++r]):kw(t,n,i,null,null))}}return t}function kw(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var wE="ng-template";function ZM(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&_E(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function EE(t){return t.type===4&&t.value!==wE}function XM(t,e,n){let r=t.type===4&&!n?wE:t.value;return e===r}function JM(t,e,n){let r=4,i=t.attrs||[],o=nx(i),s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!zt(r)&&!zt(u))return!1;if(s&&zt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!XM(t,u,n)||u===""&&e.length===1){if(zt(r))return!1;s=!0}}else{let c=r&8?u:e[++a];if(r&8&&t.attrs!==null){if(!ZM(t.attrs,c,n)){if(zt(r))return!1;s=!0}continue}let l=r&8?"class":u,d=ex(l,i,EE(t),n);if(d===-1){if(zt(r))return!1;s=!0;continue}if(c!==""){let h;d>o?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&_E(f,c,0)!==-1||r&2&&c!==h){if(zt(r))return!1;s=!0}}}}return zt(r)||s}function zt(t){return(t&1)===0}function ex(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return rx(e,t)}function tx(t,e,n=!1){for(let r=0;r<e.length;r++)if(JM(t,e[r],n))return!0;return!1}function nx(t){for(let e=0;e<t.length;e++){let n=t[e];if(QM(n))return e}return t.length}function rx(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Fw(t,e){return t?":not("+e.trim()+")":e}function ix(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!zt(s)&&(e+=Fw(o,i),i=""),r=s,o=o||!zt(r);n++}return i!==""&&(e+=Fw(o,i)),e}function ox(t){return t.map(ix).join(",")}function sx(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!zt(i))break;i=o}r++}return{attrs:e,classes:n}}function Fc(t){return Ls(()=>{let e=bE(t),n=pe(N({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===vE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||an.Emulated,styles:t.styles||rn,_:null,schemas:t.schemas||null,tView:null,id:""});AE(n);let r=t.dependencies;return n.directiveDefs=Lw(r,!1),n.pipeDefs=Lw(r,!0),n.id=cx(n),n})}function ax(t){return rr(t)||IE(t)}function ux(t){return t!==null}function Ce(t){return Ls(()=>({type:t.type,bootstrap:t.bootstrap||rn,declarations:t.declarations||rn,imports:t.imports||rn,exports:t.exports||rn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Vw(t,e){if(t==null)return As;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Pn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Pn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function js(t){return Ls(()=>{let e=bE(t);return AE(e),e})}function rr(t){return t[PM]||null}function IE(t){return t[RM]||null}function DE(t){return t[NM]||null}function CE(t){let e=rr(t)||IE(t)||DE(t);return e!==null?e.standalone:!1}function TE(t,e){let n=t[OM]||null;if(!n&&e===!0)throw new Error(`Type ${mt(t)} does not have '\u0275mod' property.`);return n}function bE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||As,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||rn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Vw(t.inputs,e),outputs:Vw(t.outputs),debugInfo:null}}function AE(t){t.features?.forEach(e=>e(t))}function Lw(t,e){if(!t)return null;let n=e?DE:ax;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(ux)}function cx(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var kn=0,ee=1,B=2,Je=3,qt=4,Ht=5,yc=6,Ss=7,Rn=8,ro=9,ir=10,Et=11,Ms=12,jw=13,Us=14,un=15,Vc=16,Yi=17,xs=18,Lc=19,SE=20,nr=21,af=22,$r=23,or=25,ME=1;var zr=7,vc=8,_c=9,Pt=10,Xf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Xf||{});function to(t){return Array.isArray(t)&&typeof t[ME]=="object"}function Fn(t){return Array.isArray(t)&&t[ME]===!0}function xE(t){return(t.flags&4)!==0}function jc(t){return t.componentOffset>-1}function Jf(t){return(t.flags&1)===1}function Bs(t){return!!t.template}function lx(t){return(t[B]&512)!==0}function io(t,e){let n=t.hasOwnProperty(gc);return n?t[gc]:null}var wf=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function PE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function $s(){return RE}function RE(t){return t.type.prototype.ngOnChanges&&(t.setInput=hx),dx}$s.ngInherit=!0;function dx(){let t=OE(this),e=t?.current;if(e){let n=t.previous;if(n===As)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function hx(t,e,n,r,i){let o=this.declaredInputs[r],s=OE(t)||fx(t,{previous:As,current:null}),a=s.current||(s.current={}),u=s.previous,c=u[o];a[o]=new wf(c&&c.currentValue,n,u===As),PE(t,e,i,n)}var NE="__ngSimpleChanges__";function OE(t){return t[NE]||null}function fx(t,e){return t[NE]=e}var Uw=null;var on=function(t,e,n){Uw?.(t,e,n)},px="svg",gx="math",mx=!1;function yx(){return mx}function Nn(t){for(;Array.isArray(t);)t=t[kn];return t}function Gt(t,e){return Nn(e[t.index])}function kE(t,e){return t.data[e]}function Wr(t,e){let n=e[t];return to(n)?n:n[kn]}function ep(t){return(t[B]&128)===128}function vx(t){return Fn(t[Je])}function wc(t,e){return e==null?null:t[e]}function FE(t){t[Yi]=0}function _x(t){t[B]&1024||(t[B]|=1024,ep(t)&&Ps(t))}function tp(t){return!!(t[B]&9216||t[$r]?.dirty)}function Ef(t){tp(t)?Ps(t):t[B]&64&&(yx()?(t[B]|=1024,Ps(t)):t[ir].changeDetectionScheduler?.notify())}function Ps(t){t[ir].changeDetectionScheduler?.notify();let e=Rs(t);for(;e!==null&&!(e[B]&8192||(e[B]|=8192,!ep(e)));)e=Rs(e)}function VE(t,e){if((t[B]&256)===256)throw new U(911,!1);t[nr]===null&&(t[nr]=[]),t[nr].push(e)}function wx(t,e){if(t[nr]===null)return;let n=t[nr].indexOf(e);n!==-1&&t[nr].splice(n,1)}function Rs(t){let e=t[Je];return Fn(e)?e[Je]:e}var oe={lFrame:qE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ex(){return oe.lFrame.elementDepthCount}function Ix(){oe.lFrame.elementDepthCount++}function Dx(){oe.lFrame.elementDepthCount--}function LE(){return oe.bindingsEnabled}function Cx(){return oe.skipHydrationRootTNode!==null}function Tx(t){return oe.skipHydrationRootTNode===t}function bx(){oe.skipHydrationRootTNode=null}function et(){return oe.lFrame.lView}function Kr(){return oe.lFrame.tView}function ln(){let t=jE();for(;t!==null&&t.type===64;)t=t.parent;return t}function jE(){return oe.lFrame.currentTNode}function Ax(){let t=oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function zs(t,e){let n=oe.lFrame;n.currentTNode=t,n.isParent=e}function UE(){return oe.lFrame.isParent}function Sx(){oe.lFrame.isParent=!1}function Mx(t){return oe.lFrame.bindingIndex=t}function xx(){return oe.lFrame.bindingIndex++}function Px(){return oe.lFrame.inI18n}function Rx(t,e){let n=oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,If(e)}function Nx(){return oe.lFrame.currentDirectiveIndex}function If(t){oe.lFrame.currentDirectiveIndex=t}function BE(t){oe.lFrame.currentQueryIndex=t}function Ox(t){let e=t[ee];return e.type===2?e.declTNode:e.type===1?t[Ht]:null}function $E(t,e,n){if(n&Y.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&Y.Host);)if(i=Ox(o),i===null||(o=o[Us],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=oe.lFrame=zE();return r.currentTNode=e,r.lView=t,!0}function np(t){let e=zE(),n=t[ee];oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function zE(){let t=oe.lFrame,e=t===null?null:t.child;return e===null?qE(t):e}function qE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function HE(){let t=oe.lFrame;return oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var GE=HE;function rp(){let t=HE();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function WE(){return oe.lFrame.selectedIndex}function qr(t){oe.lFrame.selectedIndex=t}function kx(){let t=oe.lFrame;return kE(t.tView,t.selectedIndex)}function Fx(){return oe.lFrame.currentNamespace}var KE=!0;function ip(){return KE}function op(t){KE=t}function Vx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=RE(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function sp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function lc(t,e,n){QE(t,e,3,n)}function dc(t,e,n,r){(t[B]&3)===n&&QE(t,e,n,r)}function uf(t,e){let n=t[B];(n&3)===e&&(n&=16383,n+=1,t[B]=n)}function QE(t,e,n,r){let i=r!==void 0?t[Yi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Yi]+=65536),(a<o||o==-1)&&(Lx(t,n,e,u),t[Yi]=(t[Yi]&4294901760)+u+2),u++}function Bw(t,e){on(4,t,e);let n=_t(null);try{e.call(t)}finally{_t(n),on(5,t,e)}}function Lx(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[B]>>14<t[Yi]>>16&&(t[B]&3)===e&&(t[B]+=16384,Bw(a,o)):Bw(a,o)}var no=-1,Ns=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function jx(t){return t instanceof Ns}function Ux(t){return(t.flags&8)!==0}function Bx(t){return(t.flags&16)!==0}function YE(t){return t!==no}function Ec(t){return t&32767}function $x(t){return t>>16}function Ic(t,e){let n=$x(t),r=e;for(;n>0;)r=r[Us],n--;return r}var Df=!0;function $w(t){let e=Df;return Df=t,e}var zx=256,ZE=zx-1,XE=5,qx=0,sn={};function Hx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Cs)&&(r=n[Cs]),r==null&&(r=n[Cs]=qx++);let i=r&ZE,o=1<<i;e.data[t+(i>>XE)]|=o}function JE(t,e){let n=eI(t,e);if(n!==-1)return n;let r=e[ee];r.firstCreatePass&&(t.injectorIndex=e.length,cf(r.data,t),cf(e,null),cf(r.blueprint,null));let i=ap(t,e),o=t.injectorIndex;if(YE(i)){let s=Ec(i),a=Ic(i,e),u=a[ee].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c]}return e[o+8]=i,o}function cf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function eI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function ap(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=oI(i),r===null)return no;if(n++,i=i[Us],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return no}function Gx(t,e,n){Hx(t,e,n)}function tI(t,e,n){if(n&Y.Optional||t!==void 0)return t;Yf(e,"NodeInjector")}function nI(t,e,n,r){if(n&Y.Optional&&r===void 0&&(r=null),!(n&(Y.Self|Y.Host))){let i=t[ro],o=Mt(void 0);try{return i?i.get(e,r,n&Y.Optional):mE(e,r,n&Y.Optional)}finally{Mt(o)}}return tI(r,e,n)}function rI(t,e,n,r=Y.Default,i){if(t!==null){if(e[B]&2048&&!(r&Y.Self)){let s=Zx(t,e,n,r,sn);if(s!==sn)return s}let o=iI(t,e,n,r,sn);if(o!==sn)return o}return nI(e,n,r,i)}function iI(t,e,n,r,i){let o=Qx(n);if(typeof o=="function"){if(!$E(e,t,r))return r&Y.Host?tI(i,n,r):nI(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&Y.Optional))Yf(n);else return s}finally{GE()}}else if(typeof o=="number"){let s=null,a=eI(t,e),u=no,c=r&Y.Host?e[un][Ht]:null;for((a===-1||r&Y.SkipSelf)&&(u=a===-1?ap(t,e):e[a+8],u===no||!qw(r,!1)?a=-1:(s=e[ee],a=Ec(u),e=Ic(u,e)));a!==-1;){let l=e[ee];if(zw(o,a,l.data)){let d=Wx(a,e,n,s,r,c);if(d!==sn)return d}u=e[a+8],u!==no&&qw(r,e[ee].data[a+8]===c)&&zw(o,a,e)?(s=l,a=Ec(u),e=Ic(u,e)):a=-1}}return i}function Wx(t,e,n,r,i,o){let s=e[ee],a=s.data[t+8],u=r==null?jc(a)&&Df:r!=s&&(a.type&3)!==0,c=i&Y.Host&&o===a,l=Kx(a,s,n,u,c);return l!==null?Os(e,s,l,a):sn}function Kx(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,c=t.directiveEnd,l=o>>20,d=r?a:a+l,h=i?a+l:c;for(let f=d;f<h;f++){let _=s[f];if(f<u&&n===_||f>=u&&_.type===n)return f}if(i){let f=s[u];if(f&&Bs(f)&&f.type===n)return u}return null}function Os(t,e,n,r){let i=t[n],o=e.data;if(jx(i)){let s=i;s.resolving&&VM(FM(o[n]));let a=$w(s.canSeeViewProviders);s.resolving=!0;let u,c=s.injectImpl?Mt(s.injectImpl):null,l=$E(t,r,Y.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&Vx(n,o[n],e)}finally{c!==null&&Mt(c),$w(a),s.resolving=!1,GE()}}return i}function Qx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Cs)?t[Cs]:void 0;return typeof e=="number"?e>=0?e&ZE:Yx:e}function zw(t,e,n){let r=1<<t;return!!(n[e+(t>>XE)]&r)}function qw(t,e){return!(t&Y.Self)&&!(t&Y.Host&&e)}var Br=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return rI(this._tNode,this._lView,e,kc(r),n)}};function Yx(){return new Br(ln(),et())}function Uc(t){return Ls(()=>{let e=t.prototype.constructor,n=e[gc]||Cf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[gc]||Cf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Cf(t){return lE(t)?()=>{let e=Cf(xt(t));return e&&e()}:io(t)}function Zx(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[B]&2048&&!(s[B]&512);){let a=iI(o,s,n,r|Y.Self,sn);if(a!==sn)return a;let u=o.parent;if(!u){let c=s[SE];if(c){let l=c.get(n,sn,r);if(l!==sn)return l}u=oI(s),s=s[Us]}o=u}return i}function oI(t){let e=t[ee],n=e.type;return n===2?e.declTNode:n===1?t[Ht]:null}var uc="__parameters__";function Xx(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function sI(t,e,n){return Ls(()=>{let r=Xx(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,c,l){let d=u.hasOwnProperty(uc)?u[uc]:Object.defineProperty(u,uc,{value:[]})[uc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Jx(t){let e=wt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function eP(t){return typeof t=="function"}function up(t,e){t.forEach(n=>Array.isArray(n)?up(n,e):e(n))}function aI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Dc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var qs=yE(sI("Optional"),8);var uI=yE(sI("SkipSelf"),4);function tP(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(oP))}return o}return Cc.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(c=>{i.template=c}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let c=i.styles.length,l=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),s.push(r(d).then(f=>{a[c+h]=f,l.splice(l.indexOf(d),1),l.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(c=>{a.push(c),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>sP(o));e.push(u)}),rP(),Promise.all(e).then(()=>{})}var Cc=new Map,nP=new Set;function rP(){let t=Cc;return Cc=new Map,t}function iP(){return Cc.size===0}function oP(t){return typeof t=="string"?t:t.text()}function sP(t){nP.delete(t)}var oo=new M(""),cI=new M("",-1),lI=new M(""),Tc=class{get(e,n=bs){if(n===bs){let r=new Error(`NullInjectorError: No provider for ${mt(e)}!`);throw r.name="NullInjectorError",r}return n}};function Bc(t){return{\u0275providers:t}}function aP(...t){return{\u0275providers:dI(!0,t),\u0275fromNgModule:!0}}function dI(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return up(e,s=>{let a=s;Tf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&hI(i,o),n}function hI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];cp(i,o=>{e(o,r)})}}function Tf(t,e,n,r){if(t=xt(t),!t)return!1;let i=null,o=Rw(t),s=!o&&rr(t);if(!o&&!s){let u=t.ngModule;if(o=Rw(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of u)Tf(c,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{up(o.imports,l=>{Tf(l,e,n,r)&&(c||=[],c.push(l))})}finally{}c!==void 0&&hI(c,e)}if(!a){let c=io(i)||(()=>new i);e({provide:i,useFactory:c,deps:rn},i),e({provide:lI,useValue:i,multi:!0},i),e({provide:oo,useValue:()=>D(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let c=t;cp(u,l=>{e(l,c)})}}else return!1;return i!==t&&t.providers!==void 0}function cp(t,e){for(let n of t)dE(n)&&(n=n.\u0275providers),Array.isArray(n)?cp(n,e):e(n)}var uP=ce({provide:String,useValue:ce});function fI(t){return t!==null&&typeof t=="object"&&uP in t}function cP(t){return!!(t&&t.useExisting)}function lP(t){return!!(t&&t.useFactory)}function bf(t){return typeof t=="function"}var $c=new M(""),hc={},dP={},lf;function lp(){return lf===void 0&&(lf=new Tc),lf}var ct=class{},ks=class extends ct{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sf(e,s=>this.processProvider(s)),this.records.set(cI,Zi(void 0,this)),i.has("environment")&&this.records.set(ct,Zi(void 0,this));let o=this.records.get($c);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(lI,rn,Y.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=tr(this),r=Mt(void 0),i;try{return e()}finally{tr(n),Mt(r)}}get(e,n=bs,r=Y.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xw))return e[xw](this);r=kc(r);let i,o=tr(this),s=Mt(void 0);try{if(!(r&Y.SkipSelf)){let u=this.records.get(e);if(u===void 0){let c=yP(e)&&Oc(e);c&&this.injectableDefInScope(c)?u=Zi(Af(e),hc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&Y.Self?lp():this.parent;return n=r&Y.Optional&&n===bs?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[mc]=a[mc]||[]).unshift(mt(e)),o)throw a;return WM(a,e,"R3InjectorError",this.source)}else throw a}finally{Mt(s),tr(o)}}resolveInjectorInitializers(){let e=tr(this),n=Mt(void 0),r;try{let i=this.get(oo,rn,Y.Self);for(let o of i)o()}finally{tr(e),Mt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(mt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new U(205,!1)}processProvider(e){e=xt(e);let n=bf(e)?e:xt(e&&e.provide),r=fP(e);if(!bf(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Zi(void 0,hc,!0),i.factory=()=>vf(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===hc&&(n.value=dP,n.value=n.factory()),typeof n.value=="object"&&n.value&&mP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=xt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Af(t){let e=Oc(t),n=e!==null?e.factory:io(t);if(n!==null)return n;if(t instanceof M)throw new U(204,!1);if(t instanceof Function)return hP(t);throw new U(204,!1)}function hP(t){if(t.length>0)throw new U(204,!1);let n=LM(t);return n!==null?()=>n.factory(t):()=>new t}function fP(t){if(fI(t))return Zi(void 0,t.useValue);{let e=pP(t);return Zi(e,hc)}}function pP(t,e,n){let r;if(bf(t)){let i=xt(t);return io(i)||Af(i)}else if(fI(t))r=()=>xt(t.useValue);else if(lP(t))r=()=>t.useFactory(...vf(t.deps||[]));else if(cP(t))r=()=>D(xt(t.useExisting));else{let i=xt(t&&(t.useClass||t.provide));if(gP(t))r=()=>new i(...vf(t.deps));else return io(i)||Af(i)}return r}function Zi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function gP(t){return!!t.deps}function mP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function yP(t){return typeof t=="function"||typeof t=="object"&&t instanceof M}function Sf(t,e){for(let n of t)Array.isArray(n)?Sf(n,e):n&&dE(n)?Sf(n.\u0275providers,e):e(n)}function dn(t,e){t instanceof ks&&t.assertNotDestroyed();let n,r=tr(t),i=Mt(void 0);try{return e()}finally{tr(r),Mt(i)}}function vP(t){if(!gE()&&!qM())throw new U(-203,!1)}function Hw(t,e=null,n=null,r){let i=pI(t,e,n,r);return i.resolveInjectorInitializers(),i}function pI(t,e=null,n=null,r,i=new Set){let o=[n||rn,aP(t)];return r=r||(typeof t=="object"?void 0:mt(t)),new ks(o,e||lp(),r||null,i)}var Wt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return Hw({name:""},i,r,"");{let o=r.name??"";return Hw({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=bs,e.NULL=new Tc,e.\u0275prov=O({token:e,providedIn:"any",factory:()=>D(cI)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Mf;function gI(t){Mf=t}function _P(){if(Mf!==void 0)return Mf;if(typeof document<"u")return document;throw new U(210,!1)}var zc=new M("",{providedIn:"root",factory:()=>wP}),wP="ng",dp=new M(""),tt=new M("",{providedIn:"platform",factory:()=>"unknown"});var hp=new M("",{providedIn:"root",factory:()=>_P().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function mI(t){return t instanceof Function?t():t}function EP(t){return(t??C(Wt)).get(tt)==="browser"}function yI(t){return(t.flags&128)===128}var Qr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Qr||{});var vI=new Map,IP=0;function DP(){return IP++}function CP(t){vI.set(t[Lc],t)}function TP(t){vI.delete(t[Lc])}var Gw="__ngContext__";function Hr(t,e){to(e)?(t[Gw]=e[Lc],CP(e)):t[Gw]=e}var bP;function fp(t,e){return bP(t,e)}function Xi(t,e,n,r,i){if(r!=null){let o,s=!1;Fn(r)?o=r:to(r)&&(s=!0,r=r[kn]);let a=Nn(r);t===0&&n!==null?i==null?DI(e,n,a):bc(e,n,a,i||null,!0):t===1&&n!==null?bc(e,n,a,i||null,!0):t===2?$P(e,a,s):t===3&&e.destroyNode(a),o!=null&&qP(e,t,o,n,i)}}function AP(t,e){return t.createText(e)}function _I(t,e,n){return t.createElement(e,n)}function SP(t,e){wI(t,e),e[kn]=null,e[Ht]=null}function MP(t,e,n,r,i,o){r[kn]=i,r[Ht]=e,qc(t,r,n,1,i,o)}function wI(t,e){qc(t,e,e[Et],2,null,null)}function xP(t){let e=t[Ms];if(!e)return df(t[ee],t);for(;e;){let n=null;if(to(e))n=e[Ms];else{let r=e[Pt];r&&(n=r)}if(!n){for(;e&&!e[qt]&&e!==t;)to(e)&&df(e[ee],e),e=e[Je];e===null&&(e=t),to(e)&&df(e[ee],e),n=e&&e[qt]}e=n}}function PP(t,e,n,r){let i=Pt+r,o=n.length;r>0&&(n[i-1][qt]=e),r<o-Pt?(e[qt]=n[i],aI(n,Pt+r,e)):(n.push(e),e[qt]=null),e[Je]=n;let s=e[Vc];s!==null&&n!==s&&RP(s,e);let a=e[xs];a!==null&&a.insertView(t),Ef(e),e[B]|=128}function RP(t,e){let n=t[_c],i=e[Je][Je][un];e[un]!==i&&(t[B]|=Xf.HasTransplantedViews),n===null?t[_c]=[e]:n.push(e)}function EI(t,e){let n=t[_c],r=n.indexOf(e);n.splice(r,1)}function xf(t,e){if(t.length<=Pt)return;let n=Pt+e,r=t[n];if(r){let i=r[Vc];i!==null&&i!==t&&EI(i,r),e>0&&(t[n-1][qt]=r[qt]);let o=Dc(t,Pt+e);SP(r[ee],r);let s=o[xs];s!==null&&s.detachView(o[ee]),r[Je]=null,r[qt]=null,r[B]&=-129}return r}function II(t,e){if(!(e[B]&256)){let n=e[Et];n.destroyNode&&qc(t,e,n,3,null,null),xP(e)}}function df(t,e){if(!(e[B]&256)){e[B]&=-129,e[B]|=256,e[$r]&&nw(e[$r]),OP(t,e),NP(t,e),e[ee].type===1&&e[Et].destroy();let n=e[Vc];if(n!==null&&Fn(e[Je])){n!==e[Je]&&EI(n,e);let r=e[xs];r!==null&&r.detachView(t)}TP(e)}}function NP(t,e){let n=t.cleanup,r=e[Ss];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Ss]=null);let i=e[nr];if(i!==null){e[nr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function OP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ns)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];on(4,a,u);try{u.call(a)}finally{on(5,a,u)}}else{on(4,i,o);try{o.call(i)}finally{on(5,i,o)}}}}}function kP(t,e,n){return FP(t,e.parent,n)}function FP(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[kn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===an.None||o===an.Emulated)return null}return Gt(r,n)}}function bc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function DI(t,e,n){t.appendChild(e,n)}function Ww(t,e,n,r,i){r!==null?bc(t,e,n,r,i):DI(t,e,n)}function VP(t,e,n,r){t.removeChild(e,n,r)}function pp(t,e){return t.parentNode(e)}function LP(t,e){return t.nextSibling(e)}function jP(t,e,n){return BP(t,e,n)}function UP(t,e,n){return t.type&40?Gt(t,n):null}var BP=UP,Kw;function gp(t,e,n,r){let i=kP(t,r,e),o=e[Et],s=r.parent||e[Ht],a=jP(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Ww(o,i,n[u],a,!1);else Ww(o,i,n,a,!1);Kw!==void 0&&Kw(o,r,e,n,i)}function fc(t,e){if(e!==null){let n=e.type;if(n&3)return Gt(e,t);if(n&4)return Pf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return fc(t,r);{let i=t[e.index];return Fn(i)?Pf(-1,i):Nn(i)}}else{if(n&32)return fp(e,t)()||Nn(t[e.index]);{let r=CI(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Rs(t[un]);return fc(i,r)}else return fc(t,e.next)}}}return null}function CI(t,e){if(e!==null){let r=t[un][Ht],i=e.projection;return r.projection[i]}return null}function Pf(t,e){let n=Pt+t+1;if(n<e.length){let r=e[n],i=r[ee].firstChild;if(i!==null)return fc(r,i)}return e[zr]}function $P(t,e,n){let r=pp(t,e);r&&VP(t,r,e,n)}function mp(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Hr(Nn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)mp(t,e,n.child,r,i,o,!1),Xi(e,t,i,a,o);else if(u&32){let c=fp(n,r),l;for(;l=c();)Xi(e,t,i,l,o);Xi(e,t,i,a,o)}else u&16?zP(t,e,r,n,i,o):Xi(e,t,i,a,o);n=s?n.projectionNext:n.next}}function qc(t,e,n,r,i,o){mp(n,r,t.firstChild,e,i,o,!1)}function zP(t,e,n,r,i,o){let s=n[un],u=s[Ht].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let l=u[c];Xi(e,t,i,l,o)}else{let c=u,l=s[Je];yI(r)&&(c.flags|=128),mp(t,e,c,l,i,o,!0)}}function qP(t,e,n,r,i){let o=n[zr],s=Nn(n);o!==s&&Xi(e,t,r,o,i);for(let a=Pt;a<n.length;a++){let u=n[a];qc(u[ee],u,t,e,r,o)}}function HP(t,e,n){t.setAttribute(e,"style",n)}function TI(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function bI(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&_f(t,e,r),i!==null&&TI(t,e,i),o!==null&&HP(t,e,o)}var Rf=class{};var GP="h",WP="b";var KP=()=>null;function yp(t,e,n=!1){return KP(t,e,n)}var Nf=class{},Ac=class{};function QP(t){let e=Error(`No component factory found for ${mt(t)}.`);return e[YP]=t,e}var YP="ngComponent";var Of=class{resolveComponentFactory(e){throw QP(e)}},Hc=(()=>{let e=class e{};e.NULL=new Of;let t=e;return t})();function ZP(){return Gc(ln(),et())}function Gc(t,e){return new Hs(Gt(t,e))}var Hs=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=ZP;let t=e;return t})();var Fs=class{};var XP=(()=>{let e=class e{};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),hf={};function Sc(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(Nn(o)),Fn(o)&&JP(o,r);let s=n.type;if(s&8)Sc(t,e,n.child,r);else if(s&32){let a=fp(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=CI(e,n);if(Array.isArray(a))r.push(...a);else{let u=Rs(e[un]);Sc(u[ee],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function JP(t,e){for(let n=Pt;n<t.length;n++){let r=t[n],i=r[ee].firstChild;i!==null&&Sc(r[ee],r,i,e)}t[zr]!==t[kn]&&e.push(t[zr])}var AI=[];function eR(t){return t[$r]??tR(t)}function tR(t){let e=AI.pop()??Object.create(rR);return e.lView=t,e}function nR(t){t.lView[$r]!==t&&(t.lView=null,AI.push(t))}var rR=pe(N({},J_),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ps(t.lView)},consumerOnSignalRead(){this.lView[$r]=this}});function SI(t){return xI(t[Ms])}function MI(t){return xI(t[qt])}function xI(t){for(;t!==null&&!Fn(t);)t=t[qt];return t}var iR="ngOriginalError";function ff(t){return t[iR]}var cn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&ff(e);for(;n&&ff(n);)n=ff(n);return n||null}},PI=new M("",{providedIn:"root",factory:()=>C(cn).handleError.bind(void 0)});var RI=!1,oR=new M("",{providedIn:"root",factory:()=>RI});var NI={};function OI(t=1){kI(Kr(),et(),WE()+t,!1)}function kI(t,e,n,r){if(!r)if((e[B]&3)===3){let o=t.preOrderCheckHooks;o!==null&&lc(e,o,n)}else{let o=t.preOrderHooks;o!==null&&dc(e,o,0,n)}qr(n)}function ao(t,e=Y.Default){let n=et();if(n===null)return D(t,e);let r=ln();return rI(r,n,xt(t),e)}function FI(){let t="invalid";throw new Error(t)}function VI(t,e,n,r,i,o){let s=_t(null);try{let a=null;i&Pn.SignalBased&&(a=e[r][X_]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Pn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):PE(e,a,r,o)}finally{_t(s)}}function sR(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)qr(~i);else{let o=i,s=n[++r],a=n[++r];Rx(s,o);let u=e[o];a(2,u)}}}finally{qr(-1)}}function Wc(t,e,n,r,i,o,s,a,u,c,l){let d=e.blueprint.slice();return d[kn]=i,d[B]=r|4|128|8|64,(c!==null||t&&t[B]&2048)&&(d[B]|=2048),FE(d),d[Je]=d[Us]=t,d[Rn]=n,d[ir]=s||t&&t[ir],d[Et]=a||t&&t[Et],d[ro]=u||t&&t[ro]||null,d[Ht]=o,d[Lc]=DP(),d[yc]=l,d[SE]=c,d[un]=e.type==2?t[un]:d,d}function Kc(t,e,n,r,i){let o=t.data[e];if(o===null)o=aR(t,e,n,r,i),Px()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Ax();o.injectorIndex=s===null?-1:s.injectorIndex}return zs(o,!0),o}function aR(t,e,n,r,i){let o=jE(),s=UE(),a=s?o:o&&o.parent,u=t.data[e]=hR(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function LI(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function jI(t,e,n,r,i){let o=WE(),s=r&2;try{qr(-1),s&&e.length>or&&kI(t,e,or,!1),on(s?2:0,i),n(r,i)}finally{qr(o),on(s?3:1,i)}}function UI(t,e,n){if(xE(e)){let r=_t(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{_t(r)}}}function BI(t,e,n){LE()&&(_R(t,e,n,Gt(n,e)),(n.flags&64)===64&&GI(t,e,n))}function $I(t,e,n=Gt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function zI(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=vp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function vp(t,e,n,r,i,o,s,a,u,c,l){let d=or+r,h=d+i,f=uR(d,h),_=typeof c=="function"?c():c;return f[ee]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:_,incompleteFirstPass:!1,ssrId:l}}function uR(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:NI);return n}function cR(t,e,n,r){let o=r.get(oR,RI)||n===an.ShadowDom,s=t.selectRootElement(e,o);return lR(s),s}function lR(t){dR(t)}var dR=()=>null;function hR(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Cx()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Qw(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Pn.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}t===0?Yw(r,n,c,a,u):Yw(r,n,c,a)}return r}function Yw(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function fR(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,c=null;for(let l=r;l<i;l++){let d=o[l],h=n?n.get(d):null,f=h?h.inputs:null,_=h?h.outputs:null;u=Qw(0,d.inputs,l,u,f),c=Qw(1,d.outputs,l,c,_);let v=u!==null&&s!==null&&!EE(e)?SR(u,l,s):null;a.push(v)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}function pR(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function gR(t,e,n,r,i,o,s,a){let u=Gt(e,n),c=e.inputs,l;!a&&c!=null&&(l=c[r])?(_p(t,n,l,r,i),jc(e)&&mR(n,e.index)):e.type&3?(r=pR(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function mR(t,e){let n=Wr(e,t);n[B]&16||(n[B]|=64)}function qI(t,e,n,r){if(LE()){let i=r===null?null:{"":-1},o=ER(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&HI(t,e,n,s,i,a),i&&IR(n,r,i)}n.mergedAttrs=Zf(n.mergedAttrs,n.attrs)}function HI(t,e,n,r,i,o){for(let c=0;c<r.length;c++)Gx(JE(n,e),t,r[c].type);CR(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let l=r[c];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,u=LI(t,e,r.length,null);for(let c=0;c<r.length;c++){let l=r[c];n.mergedAttrs=Zf(n.mergedAttrs,l.hostAttrs),TR(t,n,e,u,l),DR(u,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}fR(t,n,o)}function yR(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;vR(s)!=a&&s.push(a),s.push(n,r,o)}}function vR(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function _R(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;jc(n)&&bR(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||JE(n,e),Hr(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],c=Os(e,t,a,n);if(Hr(c,e),s!==null&&AR(e,a-i,c,u,n,s),Bs(u)){let l=Wr(n.index,e);l[Rn]=Os(e,t,a,n)}}}function GI(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Nx();try{qr(o);for(let a=r;a<i;a++){let u=t.data[a],c=e[a];If(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&wR(u,c)}}finally{qr(-1),If(s)}}function wR(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function ER(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(tx(e,s.selectors,!1))if(r||(r=[]),Bs(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;kf(t,e,u)}else r.unshift(s),kf(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function kf(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function IR(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new U(-301,!1);r.push(e[i],o)}}}function DR(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Bs(e)&&(n[""]=t)}}function CR(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function TR(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=io(i.type,!0)),s=new Ns(o,Bs(i),ao);t.blueprint[r]=s,n[r]=s,yR(t,e,r,LI(t,n,i.hostVars,NI),i)}function bR(t,e,n){let r=Gt(e,t),i=zI(n),o=t[ir].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Qc(t,Wc(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function AR(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],c=s[a++],l=s[a++],d=s[a++];VI(r,n,u,c,l,d)}}function SR(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function WI(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function KI(t,e){let n=t.contentQueries;if(n!==null){let r=_t(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];BE(o),a.contentQueries(2,e[s],s)}}}finally{_t(r)}}}function Qc(t,e){return t[Ms]?t[jw][qt]=e:t[Ms]=e,t[jw]=e,e}function Ff(t,e,n){BE(0);let r=_t(null);try{e(t,n)}finally{_t(r)}}function MR(t){return t[Ss]||(t[Ss]=[])}function xR(t){return t.cleanup||(t.cleanup=[])}function QI(t,e){let n=t[ro],r=n?n.get(cn,null):null;r&&r.handleError(e)}function _p(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],c=e[s],l=t.data[s];VI(l,c,r,a,u,i)}}var YI=100;function ZI(t,e=!0,n=0){let r=t[ir],i=r.rendererFactory,o=!1;o||i.begin?.();try{PR(t,n)}catch(s){throw e&&QI(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function PR(t,e){Vf(t,e);let n=0;for(;tp(t);){if(n===YI)throw new U(103,!1);n++,Vf(t,1)}}function RR(t,e,n,r){let i=e[B];if((i&256)===256)return;let o=!1;!o&&e[ir].inlineEffectRunner?.flush(),np(e);let s=null,a=null;!o&&NR(t)&&(a=eR(e),s=ew(a));try{FE(e),Mx(t.bindingStartIndex),n!==null&&jI(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let d=t.preOrderCheckHooks;d!==null&&lc(e,d,null)}else{let d=t.preOrderHooks;d!==null&&dc(e,d,0,null),uf(e,0)}if(OR(e),XI(e,0),t.contentQueries!==null&&KI(t,e),!o)if(u){let d=t.contentCheckHooks;d!==null&&lc(e,d)}else{let d=t.contentHooks;d!==null&&dc(e,d,1),uf(e,1)}sR(t,e);let c=t.components;c!==null&&e0(e,c,0);let l=t.viewQuery;if(l!==null&&Ff(2,l,r),!o)if(u){let d=t.viewCheckHooks;d!==null&&lc(e,d)}else{let d=t.viewHooks;d!==null&&dc(e,d,2),uf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[af]){for(let d of e[af])d();e[af]=null}o||(e[B]&=-73)}catch(u){throw Ps(e),u}finally{a!==null&&(tw(a,s),nR(a)),rp()}}function NR(t){return t.type!==2}function XI(t,e){for(let n=SI(t);n!==null;n=MI(n))for(let r=Pt;r<n.length;r++){let i=n[r];JI(i,e)}}function OR(t){for(let e=SI(t);e!==null;e=MI(e)){if(!(e[B]&Xf.HasTransplantedViews))continue;let n=e[_c];for(let r=0;r<n.length;r++){let i=n[r],o=i[Je];_x(i)}}}function kR(t,e,n){let r=Wr(e,t);JI(r,n)}function JI(t,e){ep(t)&&Vf(t,e)}function Vf(t,e){let r=t[ee],i=t[B],o=t[$r],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&jh(o)),o&&(o.dirty=!1),t[B]&=-9217,s)RR(r,t,r.template,t[Rn]);else if(i&8192){XI(t,1);let a=r.components;a!==null&&e0(t,a,1)}}function e0(t,e,n){for(let r=0;r<e.length;r++)kR(t,e[r],n)}function wp(t){for(t[ir].changeDetectionScheduler?.notify();t;){t[B]|=64;let e=Rs(t);if(lx(t)&&!e)return t;t=e}return null}var Gr=class{get rootNodes(){let e=this._lView,n=e[ee];return Sc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Rn]}set context(e){this._lView[Rn]=e}get destroyed(){return(this._lView[B]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Je];if(Fn(e)){let n=e[vc],r=n?n.indexOf(this):-1;r>-1&&(xf(e,r),Dc(n,r))}this._attachedToViewContainer=!1}II(this._lView[ee],this._lView)}onDestroy(e){VE(this._lView,e)}markForCheck(){wp(this._cdRefInjectingView||this._lView)}detach(){this._lView[B]&=-129}reattach(){Ef(this._lView),this._lView[B]|=128}detectChanges(){this._lView[B]|=1024,ZI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,wI(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e,Ef(this._lView)}},Gs=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=FR;let t=e;return t})();function FR(t){return VR(ln(),et(),(t&16)===16)}function VR(t,e,n){if(jc(t)&&!n){let r=Wr(t.index,e);return new Gr(r,r)}else if(t.type&47){let r=e[un];return new Gr(r,e)}return null}var t0=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=LR,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Lf=class extends t0{constructor(e){super(),this._lView=e}onDestroy(e){return VE(this._lView,e),()=>wx(this._lView,e)}};function LR(){return new Lf(et())}var Zw=new Set;function Yc(t){Zw.has(t)||(Zw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var jf=class extends je{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=pf(o),i&&(i=pf(i)),s&&(s=pf(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Se&&e.add(a),a}};function pf(t){return e=>{setTimeout(t,void 0,e)}}var Xe=jf;function Xw(...t){}function jR(){let t=typeof wt.requestAnimationFrame=="function",e=wt[t?"requestAnimationFrame":"setTimeout"],n=wt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var J=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1),typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=jR().nativeRequestAnimationFrame,$R(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new U(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,UR,Xw,Xw);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},UR={};function Ep(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function BR(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(wt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Uf(t),t.isCheckStableRunning=!0,Ep(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Uf(t))}function $R(t){let e=()=>{BR(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(zR(a))return n.invokeTask(i,o,s,a);try{return Jw(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),eE(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Jw(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),eE(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Uf(t),Ep(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Uf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Jw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function eE(t){t._nesting--,Ep(t)}var Bf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function zR(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function qR(t="zone.js",e){return t==="noop"?new Bf:t==="zone.js"?new J(e):t}var Ji=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ji||{}),HR={destroy(){}};function Ip(t,e){!e&&vP(Ip);let n=e?.injector??C(Wt);if(!EP(n))return HR;Yc("NgAfterNextRender");let r=n.get(Dp),i=r.handler??=new zf,o=e?.phase??Ji.MixedReadWrite,s=()=>{i.unregister(u),a()},a=n.get(t0).onDestroy(s),u=new $f(n,o,()=>{s(),t()});return i.register(u),{destroy:s}}var $f=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(J),this.errorHandler=e.get(cn,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},zf=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ji.EarlyRead]:new Set,[Ji.Write]:new Set,[Ji.MixedReadWrite]:new Set,[Ji.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Dp=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i();this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function GR(t,e){let n=Wr(e,t),r=n[ee];WR(r,n);let i=n[kn];i!==null&&n[yc]===null&&(n[yc]=yp(i,n[ro])),Cp(r,n,n[Rn])}function WR(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Cp(t,e,n){np(e);try{let r=t.viewQuery;r!==null&&Ff(1,r,n);let i=t.template;i!==null&&jI(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&KI(t,e),t.staticViewQueries&&Ff(2,t.viewQuery,n);let o=t.components;o!==null&&KR(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[B]&=-5,rp()}}function KR(t,e){for(let n=0;n<e.length;n++)GR(t,e[n])}function qf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Mw(i,a);else if(o==2){let u=a,c=e[++s];r=Mw(r,u+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Mc=class extends Hc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=rr(e);return new so(n,this.ngModule)}};function tE(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function QR(t){let e=t.toLowerCase();return e==="svg"?px:e==="math"?gx:null}var Hf=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=kc(r);let i=this.injector.get(e,hf,r);return i!==hf||n===hf?i:this.parentInjector.get(e,n,r)}},so=class extends Ac{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=tE(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return tE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=ox(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof ct?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new Hf(e,o):e,a=s.get(Fs,null);if(a===null)throw new U(407,!1);let u=s.get(XP,null),c=s.get(Dp,null),l=s.get(Rf,null),d={rendererFactory:a,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",_=r?cR(h,r,this.componentDef.encapsulation,s):_I(h,f,QR(f)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let m=null;_!==null&&(m=yp(_,s,!0));let I=vp(0,null,null,1,0,null,null,null,null,null,null),P=Wc(null,I,null,v,null,null,d,h,s,null,m);np(P);let T,R;try{let j=this.componentDef,q,he=null;j.findHostDirectiveDefs?(q=[],he=new Map,j.findHostDirectiveDefs(j,q,he),q.push(j)):q=[j];let bt=YR(P,_),Nh=ZR(bt,_,j,q,P,d,h);R=kE(I,or),_&&eN(h,j,_,r),n!==void 0&&tN(R,this.ngContentSelectors,n),T=JR(Nh,j,q,he,P,[nN]),Cp(I,P,null)}finally{rp()}return new Gf(this.componentType,T,Gc(R,P),P,R)}},Gf=class extends Nf{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Gr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;_p(o[ee],o,i,e,n),this.previousInputValues.set(e,n);let s=Wr(this._tNode.index,o);wp(s)}}get injector(){return new Br(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function YR(t,e){let n=t[ee],r=or;return t[r]=e,Kc(n,r,2,"#host",null)}function ZR(t,e,n,r,i,o,s){let a=i[ee];XR(r,t,e,s);let u=null;e!==null&&(u=yp(e,i[ro]));let c=o.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Wc(i,zI(n),null,l,i[t.index],t,o,c,null,null,u);return a.firstCreatePass&&kf(a,t,r.length-1),Qc(i,d),i[t.index]=d}function XR(t,e,n,r){for(let i of t)e.mergedAttrs=Zf(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(qf(e,e.mergedAttrs,!0),n!==null&&bI(r,n,e))}function JR(t,e,n,r,i,o){let s=ln(),a=i[ee],u=Gt(s,i);HI(a,i,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=Os(i,a,d,s);Hr(h,i)}GI(a,i,s),u&&Hr(u,i);let c=Os(i,a,s.directiveStart+s.componentOffset,s);if(t[Rn]=i[Rn]=c,o!==null)for(let l of o)l(c,e);return UI(a,s,t),c}function eN(t,e,n,r){if(r)_f(t,n,["ng-version","17.1.3"]);else{let{attrs:i,classes:o}=sx(e.selectors[0]);i&&_f(t,n,i),o&&o.length>0&&TI(t,n,o.join(" "))}}function tN(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function nN(){let t=ln();sp(et()[ee],t)}var Fz=new RegExp(`^(\\d+)*(${WP}|${GP})*(.*)`);var rN=()=>null;function nE(t,e){return rN(t,e)}function iN(t,e,n,r){let i=e.tView,s=t[B]&4096?4096:16,a=Wc(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),u=t[e.index];a[Vc]=u;let c=t[xs];return c!==null&&(a[xs]=c.createEmbeddedView(i)),Cp(i,a,n),a}function rE(t,e){return!e||e.firstChild===null||yI(t)}function oN(t,e,n,r=!0){let i=e[ee];if(PP(i,e,t,n),r){let s=Pf(n,t),a=e[Et],u=pp(a,t[zr]);u!==null&&MP(i,t[Ht],a,e,u,s)}let o=e[yc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}var Ws=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=sN;let t=e;return t})();function sN(){let t=ln();return uN(t,et())}var aN=Ws,n0=class extends aN{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Gc(this._hostTNode,this._hostLView)}get injector(){return new Br(this._hostTNode,this._hostLView)}get parentInjector(){let e=ap(this._hostTNode,this._hostLView);if(YE(e)){let n=Ic(e,this._hostLView),r=Ec(e),i=n[ee].data[r+8];return new Br(i,n)}else return new Br(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=iE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Pt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=nE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,rE(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!eP(e),a;if(s)a=n;else{let _=n||{};a=_.index,r=_.injector,i=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef}let u=s?e:new so(rr(e)),c=r||this.parentInjector;if(!o&&u.ngModule==null){let v=(s?c:this.parentInjector).get(ct,null);v&&(o=v)}let l=rr(u.componentType??{}),d=nE(this._lContainer,l?.id??null),h=d?.firstChild??null,f=u.create(c,i,h,o);return this.insertImpl(f.hostView,a,rE(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(vx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Je],c=new n0(u,u[Ht],u[Je]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return oN(s,i,o,r),e.attachToViewContainerRef(),aI(gf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=iE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=xf(this._lContainer,n);r&&(Dc(gf(this._lContainer),n),II(r[ee],r))}detach(e){let n=this._adjustIndex(e,-1),r=xf(this._lContainer,n);return r&&Dc(gf(this._lContainer),n)!=null?new Gr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function iE(t){return t[vc]}function gf(t){return t[vc]||(t[vc]=[])}function uN(t,e){let n,r=e[t.index];return Fn(r)?n=r:(n=WI(r,e,null,t),e[t.index]=n,Qc(e,n)),lN(n,e,t,r),new n0(n,t,e)}function cN(t,e){let n=t[Et],r=n.createComment(""),i=Gt(e,t),o=pp(n,i);return bc(n,o,r,LP(n,i),!1),r}var lN=fN,dN=()=>!1;function hN(t,e,n){return dN(t,e,n)}function fN(t,e,n,r){if(t[zr])return;let i;n.type&8?i=Nn(r):i=cN(e,n),t[zr]=i}var sr=class{},Vs=class{};var xc=class extends sr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Mc(this);let i=TE(e);this._bootstrapComponents=mI(i.bootstrap),this._r3Injector=pI(e,n,[{provide:sr,useValue:this},{provide:Hc,useValue:this.componentFactoryResolver},...r],mt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Pc=class extends Vs{constructor(e){super(),this.moduleType=e}create(e){return new xc(this.moduleType,e,[])}};function pN(t,e,n){return new xc(t,e,n)}var Wf=class extends sr{constructor(e){super(),this.componentFactoryResolver=new Mc(this),this.instance=null;let n=new ks([...e.providers,{provide:sr,useValue:this},{provide:Hc,useValue:this.componentFactoryResolver}],e.parent||lp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Zc(t,e,n=null){return new Wf({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Yr=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new We(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function gN(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function mN(t,e,n,r,i,o,s,a,u){let c=e.consts,l=Kc(e,t,4,s||null,wc(c,a));qI(e,n,l,wc(c,u)),sp(e,l);let d=l.tView=vp(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function Tp(t,e,n,r,i,o,s,a){let u=et(),c=Kr(),l=t+or,d=c.firstCreatePass?mN(l,c,u,e,n,r,i,o,s):c.data[l];zs(d,!1);let h=yN(c,u,d,t);ip()&&gp(c,u,h,d),Hr(h,u);let f=WI(h,u,h,d);return u[l]=f,Qc(u,f),hN(f,d,u),Jf(d)&&BI(c,u,d),s!=null&&$I(u,d,a),Tp}var yN=vN;function vN(t,e,n,r){return op(!0),e[Et].createComment("")}function bp(t,e,n){let r=et(),i=xx();if(gN(r,i,e)){let o=Kr(),s=kx();gR(o,s,r,t,e,r[Et],n,!1)}return bp}function oE(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";_p(t,n,o[s],s,r)}function _N(t,e,n,r,i,o){let s=e.consts,a=wc(s,i),u=Kc(e,t,2,r,a);return qI(e,n,u,wc(s,o)),u.attrs!==null&&qf(u,u.attrs,!1),u.mergedAttrs!==null&&qf(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Ee(t,e,n,r){let i=et(),o=Kr(),s=or+t,a=i[Et],u=o.firstCreatePass?_N(s,o,i,e,n,r):o.data[s],c=wN(o,i,u,a,e,t);i[s]=c;let l=Jf(u);return zs(u,!0),bI(a,c,u),(u.flags&32)!==32&&ip()&&gp(o,i,c,u),Ex()===0&&Hr(c,i),Ix(),l&&(BI(o,i,u),UI(o,u,i)),r!==null&&$I(i,u),Ee}function le(){let t=ln();UE()?Sx():(t=t.parent,zs(t,!1));let e=t;Tx(e)&&bx(),Dx();let n=Kr();return n.firstCreatePass&&(sp(n,t),xE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Ux(e)&&oE(n,e,et(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Bx(e)&&oE(n,e,et(),e.stylesWithoutHost,!1),le}function Ke(t,e,n,r){return Ee(t,e,n,r),le(),Ke}var wN=(t,e,n,r,i,o)=>(op(!0),_I(r,i,Fx()));var Rc="en-US";var EN=Rc;function IN(t){typeof t=="string"&&(EN=t.toLowerCase().replace(/_/g,"-"))}function uo(t){return!!t&&typeof t.then=="function"}function r0(t){return!!t&&typeof t.subscribe=="function"}function ar(t,e,n,r){let i=et(),o=Kr(),s=ln();return CN(o,i,i[Et],s,t,e,r),ar}function DN(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Ss],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function CN(t,e,n,r,i,o,s){let a=Jf(r),c=t.firstCreatePass&&xR(t),l=e[Rn],d=MR(e),h=!0;if(r.type&3||s){let v=Gt(r,e),m=s?s(v):v,I=d.length,P=s?R=>s(Nn(R[r.index])):r.index,T=null;if(!s&&a&&(T=DN(t,e,i,r.index)),T!==null){let R=T.__ngLastListenerFn__||T;R.__ngNextListenerFn__=o,T.__ngLastListenerFn__=o,h=!1}else{o=aE(r,e,l,o,!1);let R=n.listen(m,i,o);d.push(o,R),c&&c.push(i,P,I,I+1)}}else o=aE(r,e,l,o,!1);let f=r.outputs,_;if(h&&f!==null&&(_=f[i])){let v=_.length;if(v)for(let m=0;m<v;m+=2){let I=_[m],P=_[m+1],j=e[I][P].subscribe(o),q=d.length;d.push(o,j),c&&c.push(i,r.index,q,-(q+1))}}}function sE(t,e,n,r){try{return on(6,e,n),n(r)!==!1}catch(i){return QI(t,i),!1}finally{on(7,e,n)}}function aE(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?Wr(t.index,e):e;wp(a);let u=sE(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)u=sE(e,n,c,s)&&u,c=c.__ngNextListenerFn__;return i&&u===!1&&s.preventDefault(),u}}var Ap=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=AN;let t=e;return t})(),TN=Ap,bN=class extends TN{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=iN(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Gr(i)}};function AN(){return SN(ln(),et())}function SN(t,e){return t.type&4?new bN(e,t,Gc(t,e)):null}function Rt(t,e=""){let n=et(),r=Kr(),i=t+or,o=r.firstCreatePass?Kc(r,i,1,e,null):r.data[i],s=MN(r,n,o,e,t);n[i]=s,ip()&&gp(r,n,s,o),zs(o,!1)}var MN=(t,e,n,r,i)=>(op(!0),AP(e[Et],r));var xN=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=dI(!1,r.type),o=i.length>0?Zc([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=O({token:e,providedIn:"environment",factory:()=>new e(D(ct))});let t=e;return t})();function i0(t){Yc("NgStandalone"),t.getStandaloneInjector=e=>e.get(xN).getOrCreateStandaloneInjector(t)}var cc=null;function PN(t){cc!==null&&(t.defaultEncapsulation!==cc.defaultEncapsulation||t.preserveWhitespaces!==cc.preserveWhitespaces)||(cc=t)}var On=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},o0=new On("17.1.3"),Xc=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Kf=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Jc=(()=>{let e=class e{compileModuleSync(r){return new Pc(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=TE(r),s=mI(o.declarations).reduce((a,u)=>{let c=rr(u);return c&&a.push(new so(c)),a},[]);return new Kf(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),RN=new M("");var Sp=new M(""),Ks=new M(""),el=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Mp||(NN(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{J.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(D(J),D(tl),D(Ks))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),tl=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Mp?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function NN(t){Mp=t}var Mp,nl=new M(""),s0=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=C(nl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(uo(s))r.push(s);else if(r0(s)){let a=new Promise((u,c)=>{s.subscribe({complete:u,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rl=new M("");function ON(t,e,n){let r=new Pc(n);return Promise.resolve(r)}function kN(){rw(()=>{throw new U(600,!1)})}function FN(t){return t.isBoundToModule}function VN(t,e,n){try{let r=n();return uo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function a0(t,e){return Array.isArray(e)?e.reduce(a0,t):N(N({},t),e)}var Zr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=C(PI),this.afterRenderEffectManager=C(Dp),this.componentTypes=[],this.components=[],this.isStable=C(Yr).hasPendingTasks.pipe(L(r=>!r)),this._injector=C(ct)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Ac;if(!this._injector.get(s0).done){let f=!o&&CE(r),_=!1;throw new U(405,_)}let a;o?a=r:a=this._injector.get(Hc).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=FN(a)?void 0:this._injector.get(sr),c=i||a.selector,l=a.create(Wt.NULL,[],c,u),d=l.location.nativeElement,h=l.injector.get(Sp,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),pc(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new U(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0;do{if(r===YI)throw new U(103,!1);let i=r===0;for(let{_lView:o,notifyErrorHandler:s}of this._views)!i&&!cE(o)||this.detectChangesInView(o,s,i);this.afterRenderEffectManager.execute(),r++}while(this._views.some(({_lView:i})=>cE(i)))}detectChangesInView(r,i,o){let s;o?(s=0,r[B]|=1024):r[B]&64?s=0:s=1,ZI(r,i,s)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;pc(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(rl,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>pc(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new U(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function uE(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}function cE(t){return tp(t)}var LN=(()=>{let e=class e{constructor(){this.zone=C(J),this.applicationRef=C(Zr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jN(t){return[{provide:J,useFactory:t},{provide:oo,multi:!0,useFactory:()=>{let e=C(LN,{optional:!0});return()=>e.initialize()}},{provide:oo,multi:!0,useFactory:()=>{let e=C($N);return()=>{e.initialize()}}},{provide:PI,useFactory:UN}]}function UN(){let t=C(J),e=C(cn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function BN(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var $N=(()=>{let e=class e{constructor(){this.subscription=new Se,this.initialized=!1,this.zone=C(J),this.pendingTasks=C(Yr)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{J.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{J.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zN(){return typeof $localize<"u"&&$localize.locale||Rc}var xp=new M("",{providedIn:"root",factory:()=>C(xp,Y.Optional|Y.SkipSelf)||zN()});var u0=new M(""),c0=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=qR(i?.ngZone,BN({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=pN(r.moduleType,this.injector,jN(()=>o)),a=s.injector.get(cn,null);return o.runOutsideAngular(()=>{let u=o.onError.subscribe({next:c=>{a.handleError(c)}});s.onDestroy(()=>{pc(this._modules,s),u.unsubscribe()})}),VN(a,o,()=>{let u=s.injector.get(s0);return u.runInitializers(),u.donePromise.then(()=>{let c=s.injector.get(xp,Rc);return IN(c||Rc),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=a0({},i);return ON(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(Zr);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new U(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new U(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(u0,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(D(Wt))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Ts=null,l0=new M("");function qN(t){if(Ts&&!Ts.get(l0,!1))throw new U(400,!1);kN(),Ts=t;let e=t.get(c0);return WN(t),e}function Pp(t,e,n=[]){let r=`Platform: ${e}`,i=new M(r);return(o=[])=>{let s=d0();if(!s||s.injector.get(l0,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):qN(HN(a,r))}return GN(i)}}function HN(t=[],e){return Wt.create({name:e,providers:[{provide:$c,useValue:"platform"},{provide:u0,useValue:new Set([()=>Ts=null])},...t]})}function GN(t){let e=d0();if(!e)throw new U(401,!1);return e}function d0(){return Ts?.get(c0)??null}function WN(t){t.get(dp,null)?.forEach(n=>n())}function Rp(){return!1}var h0=Pp(null,"core",[]),f0=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(D(Zr))},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({});let t=e;return t})();function p0(t){let e=rr(t);if(!e)return null;let n=new so(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var _0=null;function Xr(){return _0}function w0(t){_0??=t}var il=class{},nt=new M(""),Vp=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(ZN),providedIn:"platform"});let t=e;return t})(),E0=new M(""),ZN=(()=>{let e=class e extends Vp{constructor(){super(),this._doc=C(nt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xr().getBaseHref(this._doc)}onPopState(r){let i=Xr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Xr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Lp(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function g0(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Vn(t){return t&&t[0]!=="?"?"?"+t:t}var Jr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(jp),providedIn:"root"});let t=e;return t})(),I0=new M(""),jp=(()=>{let e=class e extends Jr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??C(nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Lp(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Vn(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Vn(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Vn(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(Vp),D(I0,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),D0=(()=>{let e=class e extends Jr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Lp(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Vn(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Vn(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(Vp),D(I0,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),lo=(()=>{let e=class e{constructor(r){this._subject=new Xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=eO(g0(m0(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Vn(i))}normalize(r){return e.stripTrailingSlash(JN(this._basePath,m0(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Vn(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Vn(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Vn,e.joinWithSlash=Lp,e.stripTrailingSlash=g0,e.\u0275fac=function(i){return new(i||e)(D(Jr))},e.\u0275prov=O({token:e,factory:()=>XN(),providedIn:"root"});let t=e;return t})();function XN(){return new lo(D(Jr))}function JN(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function m0(t){return t.replace(/\/index.html$/,"")}function eO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function ol(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var C0=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Np,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){y0("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){y0("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ao(Ws),ao(Ap))},e.\u0275dir=js({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Np=class{constructor(){this.$implicit=null,this.ngIf=null}};function y0(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${mt(e)}'.`)}var T0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({});let t=e;return t})(),Up="browser",tO="server";function nO(t){return t===Up}function ei(t){return t===tO}var b0=(()=>{let e=class e{};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>nO(C(tt))?new Op(C(nt),window):new kp});let t=e;return t})(),Op=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=rO(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function rO(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var kp=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},co=class{};var Ys=class{},al=class{},ti=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var $p=class{encodeKey(e){return S0(e)}encodeValue(e){return S0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function sO(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}var aO=/%(\d[a-f0-9])/gi,uO={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function S0(t){return encodeURIComponent(t).replace(aO,(e,n)=>uO[n]??e)}function sl(t){return`${t}`}var ur=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new $p,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=sO(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(sl):[sl(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(sl(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(sl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var zp=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function cO(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function M0(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function x0(t){return typeof Blob<"u"&&t instanceof Blob}function P0(t){return typeof FormData<"u"&&t instanceof FormData}function lO(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Qs=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(cO(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new ti,this.context??=new zp,!this.params)this.params=new ur,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+s}}}serializeBody(){return this.body===null?null:M0(this.body)||x0(this.body)||P0(this.body)||lO(this.body)||typeof this.body=="string"?this.body:this.body instanceof ur?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||P0(this.body)?null:x0(this.body)?this.body.type||null:M0(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ur?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.body!==void 0?e.body:this.body,s=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,u=e.headers||this.headers,c=e.params||this.params,l=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),u)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new t(n,r,o,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:s})}},ho=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(ho||{}),Zs=class{constructor(e,n=ll.Ok,r="OK"){this.headers=e.headers||new ti,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},qp=class t extends Zs{constructor(e={}){super(e),this.type=ho.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ul=class t extends Zs{constructor(e={}){super(e),this.type=ho.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},cl=class extends Zs{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},ll=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(ll||{});function Bp(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var dO=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof Qs)s=r;else{let c;o.headers instanceof ti?c=o.headers:c=new ti(o.headers);let l;o.params&&(o.params instanceof ur?l=o.params:l=new ur({fromObject:o.params})),s=new Qs(r,i,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=F(s).pipe(Mn(c=>this.handler.handle(c)));if(r instanceof Qs||o.observe==="events")return a;let u=a.pipe(Ue(c=>c instanceof ul));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return u.pipe(L(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return u.pipe(L(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return u.pipe(L(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return u.pipe(L(c=>c.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new ur().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,Bp(o,i))}post(r,i,o={}){return this.request("POST",r,Bp(o,i))}put(r,i,o={}){return this.request("PUT",r,Bp(o,i))}};e.\u0275fac=function(i){return new(i||e)(D(Ys))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function k0(t,e){return e(t)}function hO(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function fO(t,e,n){return(r,i)=>dn(n,()=>e(r,o=>t(o,i)))}var pO=new M(""),Hp=new M(""),gO=new M(""),mO=new M("");function yO(){let t=null;return(e,n)=>{t===null&&(t=(C(pO,{optional:!0})??[]).reduceRight(hO,k0));let r=C(Yr),i=r.add();return t(e,n).pipe(er(()=>r.remove(i)))}}var R0=(()=>{let e=class e extends Ys{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=C(Yr);let o=C(mO,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(Hp),...this.injector.get(gO,[])]));this.chain=o.reduceRight((s,a)=>fO(s,a,this.injector),k0)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(er(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(D(al),D(ct))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();var vO=/^\)\]\}',?\n/;function _O(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var N0=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new U(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ie(i.\u0275loadImpl()):F(null)).pipe(ye(()=>new Z(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((m,I)=>a.setRequestHeader(m,I.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let m=r.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(r.responseType){let m=r.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let u=r.serializeBody(),c=null,l=()=>{if(c!==null)return c;let m=a.statusText||"OK",I=new ti(a.getAllResponseHeaders()),P=_O(a)||r.url;return c=new qp({headers:I,status:a.status,statusText:m,url:P}),c},d=()=>{let{headers:m,status:I,statusText:P,url:T}=l(),R=null;I!==ll.NoContent&&(R=typeof a.response>"u"?a.responseText:a.response),I===0&&(I=R?ll.Ok:0);let j=I>=200&&I<300;if(r.responseType==="json"&&typeof R=="string"){let q=R;R=R.replace(vO,"");try{R=R!==""?JSON.parse(R):null}catch(he){R=q,j&&(j=!1,R={error:he,text:R})}}j?(s.next(new ul({body:R,headers:m,status:I,statusText:P,url:T||void 0})),s.complete()):s.error(new cl({error:R,headers:m,status:I,statusText:P,url:T||void 0}))},h=m=>{let{url:I}=l(),P=new cl({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:I||void 0});s.error(P)},f=!1,_=m=>{f||(s.next(l()),f=!0);let I={type:ho.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(I.total=m.total),r.responseType==="text"&&a.responseText&&(I.partialText=a.responseText),s.next(I)},v=m=>{let I={type:ho.UploadProgress,loaded:m.loaded};m.lengthComputable&&(I.total=m.total),s.next(I)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",_),u!==null&&a.upload&&a.upload.addEventListener("progress",v)),a.send(u),s.next({type:ho.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",_),u!==null&&a.upload&&a.upload.removeEventListener("progress",v)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(D(co))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),F0=new M(""),wO="XSRF-TOKEN",EO=new M("",{providedIn:"root",factory:()=>wO}),IO="X-XSRF-TOKEN",DO=new M("",{providedIn:"root",factory:()=>IO}),dl=class{},CO=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=ol(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(D(nt),D(tt),D(EO))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function TO(t,e){let n=t.url.toLowerCase();if(!C(F0)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=C(dl).getToken(),i=C(DO);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var V0=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(V0||{});function bO(t,e){return{\u0275kind:t,\u0275providers:e}}function AO(...t){let e=[dO,N0,R0,{provide:Ys,useExisting:R0},{provide:al,useExisting:N0},{provide:Hp,useValue:TO,multi:!0},{provide:F0,useValue:!0},{provide:dl,useClass:CO}];for(let n of t)e.push(...n.\u0275providers);return Bc(e)}var O0=new M("");function SO(){return bO(V0.LegacyInterceptors,[{provide:O0,useFactory:yO},{provide:Hp,useExisting:O0,multi:!0}])}var L0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({providers:[AO(SO())]});let t=e;return t})();var Kp=class extends il{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Qp=class t extends Kp{static makeCurrent(){w0(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=MO();return n==null?null:xO(n)}resetBaseElement(){Xs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ol(document.cookie,e)}},Xs=null;function MO(){return Xs=Xs||document.querySelector("base"),Xs?Xs.getAttribute("href"):null}function xO(t){return new URL(t,document.baseURI).pathname}var Yp=class{addToWindow(e){wt.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new U(5103,!1);return o},wt.getAllAngularTestabilities=()=>e.getAllTestabilities(),wt.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=wt.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};wt.frameworkStabilizers||(wt.frameworkStabilizers=[]),wt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?Xr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},PO=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Zp=new M(""),$0=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new U(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(D(Zp),D(J))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),hl=class{constructor(e){this._doc=e}},Gp="ng-app-id",z0=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ei(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Gp}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Gp),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Gp,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(D(nt),D(zc),D(hp,8),D(tt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Wp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Jp=/%COMP%/g,q0="%COMP%",RO=`_nghost-${q0}`,NO=`_ngcontent-${q0}`,OO=!0,kO=new M("",{providedIn:"root",factory:()=>OO});function FO(t){return NO.replace(Jp,t)}function VO(t){return RO.replace(Jp,t)}function H0(t,e){return e.map(n=>n.replace(Jp,t))}var j0=(()=>{let e=class e{constructor(r,i,o,s,a,u,c,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ei(u),this.defaultRenderer=new Js(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===an.ShadowDom&&(i=pe(N({},i),{encapsulation:an.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof fl?o.applyToHost(r):o instanceof ea&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case an.Emulated:s=new fl(c,l,i,this.appId,d,a,u,h);break;case an.ShadowDom:return new Xp(c,l,r,i,a,u,this.nonce,h);default:s=new ea(c,l,i,d,a,u,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(D($0),D(z0),D(zc),D(kO),D(nt),D(tt),D(J),D(hp))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Js=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Wp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(U0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(U0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Wp[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Wp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Qr.DashCase|Qr.Important)?e.style.setProperty(n,r,i&Qr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Qr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Xr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function U0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Xp=class extends Js{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=H0(i.id,i.styles);for(let l of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ea=class extends Js{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?H0(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},fl=class extends ea{constructor(e,n,r,i,o,s,a,u){let c=i+"-"+r.id;super(e,n,r,o,s,a,u,c),this.contentAttr=FO(c),this.hostAttr=VO(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},LO=(()=>{let e=class e extends hl{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(D(nt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),B0=["alt","control","meta","shift"],jO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},UO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},BO=(()=>{let e=class e extends hl{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xr().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),B0.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=jO[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),B0.forEach(a=>{if(a!==o){let u=UO[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(D(nt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function $O(){Qp.makeCurrent()}function zO(){return new cn}function qO(){return gI(document),document}var HO=[{provide:tt,useValue:Up},{provide:dp,useValue:$O,multi:!0},{provide:nt,useFactory:qO,deps:[]}],G0=Pp(h0,"browser",HO),GO=new M(""),WO=[{provide:Ks,useClass:Yp,deps:[]},{provide:Sp,useClass:el,deps:[J,tl,Ks]},{provide:el,useClass:el,deps:[J,tl,Ks]}],KO=[{provide:$c,useValue:"root"},{provide:cn,useFactory:zO,deps:[]},{provide:Zp,useClass:LO,multi:!0,deps:[nt,J,tt]},{provide:Zp,useClass:BO,multi:!0,deps:[nt]},j0,z0,$0,{provide:Fs,useExisting:j0},{provide:co,useClass:PO,deps:[]},[]],W0=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:zc,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(D(GO,12))},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({providers:[...KO,...WO],imports:[T0,f0]});let t=e;return t})();var K0=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(D(nt))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var W="primary",ga=Symbol("RouteTitle"),ig=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function yo(t){return new ig(t)}function YO(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ZO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!hn(t[n],e[n]))return!1;return!0}function hn(t,e){let n=t?og(t):void 0,r=e?og(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!iD(t[i],e[i]))return!1;return!0}function og(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function iD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function oD(t){return t.length>0?t[t.length-1]:null}function hr(t){return Jh(t)?t:uo(t)?ie(Promise.resolve(t)):F(t)}var XO={exact:aD,subset:uD},sD={exact:JO,subset:e1,ignored:()=>!0};function Y0(t,e,n){return XO[n.paths](t.root,e.root,n.matrixParams)&&sD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function JO(t,e){return hn(t,e)}function aD(t,e,n){if(!ri(t.segments,e.segments)||!ml(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!aD(t.children[r],e.children[r],n))return!1;return!0}function e1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>iD(t[n],e[n]))}function uD(t,e,n){return cD(t,e,e.segments,n)}function cD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ri(i,n)||e.hasChildren()||!ml(i,n,r))}else if(t.segments.length===n.length){if(!ri(t.segments,n)||!ml(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!uD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ri(t.segments,i)||!ml(t.segments,i,r)||!t.children[W]?!1:cD(t.children[W],e,o,r)}}function ml(t,e,n){return e.every((r,i)=>sD[n](t[i].parameters,r.parameters))}var cr=class{constructor(e=new se([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=yo(this.queryParams),this._queryParamMap}toString(){return r1.serialize(this)}},se=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yl(this)}},ni=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=yo(this.parameters),this._parameterMap}toString(){return dD(this)}};function t1(t,e){return ri(t,e)&&t.every((n,r)=>hn(n.parameters,e[r].parameters))}function ri(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function n1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===W&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==W&&(n=n.concat(e(i,r)))}),n}var ma=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>new aa,providedIn:"root"});let t=e;return t})(),aa=class{parse(e){let n=new ag(e);return new cr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ta(e.root,!0)}`,r=s1(e.queryParams),i=typeof e.fragment=="string"?`#${i1(e.fragment)}`:"";return`${n}${r}${i}`}},r1=new aa;function yl(t){return t.segments.map(e=>dD(e)).join("/")}function ta(t,e){if(!t.hasChildren())return yl(t);if(e){let n=t.children[W]?ta(t.children[W],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==W&&r.push(`${i}:${ta(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=n1(t,(r,i)=>i===W?[ta(t.children[W],!1)]:[`${i}:${ta(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[W]!=null?`${yl(t)}/${n[0]}`:`${yl(t)}/(${n.join("//")})`}}function lD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pl(t){return lD(t).replace(/%3B/gi,";")}function i1(t){return encodeURI(t)}function sg(t){return lD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vl(t){return decodeURIComponent(t)}function Z0(t){return vl(t.replace(/\+/g,"%20"))}function dD(t){return`${sg(t.path)}${o1(t.parameters)}`}function o1(t){return Object.entries(t).map(([e,n])=>`;${sg(e)}=${sg(n)}`).join("")}function s1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${pl(n)}=${pl(i)}`).join("&"):`${pl(n)}=${pl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var a1=/^[^\/()?;#]+/;function eg(t){let e=t.match(a1);return e?e[0]:""}var u1=/^[^\/()?;=#]+/;function c1(t){let e=t.match(u1);return e?e[0]:""}var l1=/^[^=?&#]+/;function d1(t){let e=t.match(l1);return e?e[0]:""}var h1=/^[^&#]+/;function f1(t){let e=t.match(h1);return e?e[0]:""}var ag=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new se([],{}):new se([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[W]=new se(e,n)),r}parseSegment(){let e=eg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new ni(vl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=c1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=eg(this.remaining);i&&(r=i,this.capture(r))}e[vl(n)]=vl(r)}parseQueryParam(e){let n=d1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=f1(this.remaining);s&&(r=s,this.capture(r))}let i=Z0(n),o=Z0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=eg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=W);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[W]:new se([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function hD(t){return t.segments.length>0?new se([],{[W]:t}):t}function fD(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=fD(i);if(r===W&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new se(t.segments,e);return p1(n)}function p1(t){if(t.numberOfChildren===1&&t.children[W]){let e=t.children[W];return new se(t.segments.concat(e.segments),e.children)}return t}function vo(t){return t instanceof cr}function g1(t,e,n=null,r=null){let i=pD(t);return gD(i,e,n,r)}function pD(t){let e;function n(o){let s={};for(let u of o.children){let c=n(u);s[u.outlet]=c}let a=new se(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=hD(r);return e??i}function gD(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return tg(i,i,i,n,r);let o=m1(e);if(o.toRoot())return tg(i,i,new se([],{}),n,r);let s=y1(o,i,t),a=s.processChildren?ia(s.segmentGroup,s.index,o.commands):yD(s.segmentGroup,s.index,o.commands);return tg(i,s.segmentGroup,a,n,r)}function _l(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ua(t){return typeof t=="object"&&t!=null&&t.outlets}function tg(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,c])=>{o[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`});let s;t===e?s=n:s=mD(t,e,n);let a=hD(fD(s));return new cr(a,o,i)}function mD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=mD(o,e,n)}),new se(t.segments,r)}var wl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&_l(r[0]))throw new U(4003,!1);let i=r.find(ua);if(i&&i!==oD(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function m1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new wl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new wl(n,e,r)}var go=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function y1(t,e,n){if(t.isAbsolute)return new go(e,!0,0);if(!n)return new go(e,!1,NaN);if(n.parent===null)return new go(n,!0,0);let r=_l(t.commands[0])?0:1,i=n.segments.length-1+r;return v1(n,i,t.numberOfDoubleDots)}function v1(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new go(r,!1,i-o)}function _1(t){return ua(t[0])?t[0].outlets:{[W]:t}}function yD(t,e,n){if(t??=new se([],{}),t.segments.length===0&&t.hasChildren())return ia(t,e,n);let r=w1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new se(t.segments.slice(0,r.pathIndex),{});return o.children[W]=new se(t.segments.slice(r.pathIndex),t.children),ia(o,0,i)}else return r.match&&i.length===0?new se(t.segments,{}):r.match&&!t.hasChildren()?ug(t,e,n):r.match?ia(t,0,i):ug(t,e,n)}function ia(t,e,n){if(n.length===0)return new se(t.segments,{});{let r=_1(n),i={};if(Object.keys(r).some(o=>o!==W)&&t.children[W]&&t.numberOfChildren===1&&t.children[W].segments.length===0){let o=ia(t.children[W],e,n);return new se(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=yD(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new se(t.segments,i)}}function w1(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(ua(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!J0(u,c,s))return o;r+=2}else{if(!J0(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function ug(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(ua(o)){let u=E1(o.outlets);return new se(r,u)}if(i===0&&_l(n[0])){let u=t.segments[e];r.push(new ni(u.path,X0(n[0]))),i++;continue}let s=ua(o)?o.outlets[W]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&_l(a)?(r.push(new ni(s,X0(a))),i+=2):(r.push(new ni(s,{})),i++)}return new se(r,{})}function E1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=ug(new se([],{}),0,r))}),e}function X0(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function J0(t,e,n){return t==n.path&&hn(e,n.parameters)}var oa="imperative",$e=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}($e||{}),kt=class{constructor(e,n){this.id=e,this.url=n}},_o=class extends kt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=$e.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ln=class extends kt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=$e.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ot=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ot||{}),El=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(El||{}),lr=class extends kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=$e.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},dr=class extends kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=$e.NavigationSkipped}},ca=class extends kt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=$e.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Il=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cg=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lg=class extends kt{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=$e.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},dg=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hg=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=$e.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fg=class{constructor(e){this.route=e,this.type=$e.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},pg=class{constructor(e){this.route=e,this.type=$e.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},gg=class{constructor(e){this.snapshot=e,this.type=$e.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},mg=class{constructor(e){this.snapshot=e,this.type=$e.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yg=class{constructor(e){this.snapshot=e,this.type=$e.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vg=class{constructor(e){this.snapshot=e,this.type=$e.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=$e.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},la=class{},da=class{constructor(e){this.url=e}};var _g=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ya,this.attachRef=null}},ya=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new _g,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Cl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=wg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=wg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Eg(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Eg(e,this._root).map(n=>n.value)}};function wg(t,e){if(t===e.value)return e;for(let n of e.children){let r=wg(t,n);if(r)return r}return null}function Eg(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Eg(t,n);if(r.length)return r.unshift(e),r}return[]}var It=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function po(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Tl=class extends Cl{constructor(e,n){super(e),this.snapshot=n,Pg(this,e)}toString(){return this.snapshot.toString()}};function vD(t){let e=I1(t),n=new We([new ni("",{})]),r=new We({}),i=new We({}),o=new We({}),s=new We(""),a=new wo(n,r,o,s,i,W,t,e.root);return a.snapshot=e.root,new Tl(new It(a,[]),e)}function I1(t){let e={},n={},r={},i="",o=new ha([],e,r,i,n,W,t,null,{});return new bl("",new It(o,[]))}var wo=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(L(c=>c[ga]))??F(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(L(e=>yo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(L(e=>yo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function xg(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:N(N({},e.params),t.params),data:N(N({},e.data),t.data),resolve:N(N(N(N({},t.data),e.data),i?.data),t._resolvedData)}:r={params:N({},t.params),data:N({},t.data),resolve:N(N({},t.data),t._resolvedData??{})},i&&wD(i)&&(r.resolve[ga]=i.title),r}var ha=class{get title(){return this.data?.[ga]}constructor(e,n,r,i,o,s,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},bl=class extends Cl{constructor(e,n){super(n),this.url=e,Pg(this,n)}toString(){return _D(this._root)}};function Pg(t,e){e.value._routerState=t,e.children.forEach(n=>Pg(t,n))}function _D(t){let e=t.children.length>0?` { ${t.children.map(_D).join(", ")} } `:"";return`${t.value}${e}`}function ng(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,hn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),hn(e.params,n.params)||t.paramsSubject.next(n.params),ZO(e.url,n.url)||t.urlSubject.next(n.url),hn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ig(t,e){let n=hn(t.params,e.params)&&t1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Ig(t.parent,e.parent))}function wD(t){return typeof t.title=="string"||t.title===null}var D1=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=W,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.attachEvents=new Xe,this.detachEvents=new Xe,this.parentContexts=C(ya),this.location=C(Ws),this.changeDetector=C(Gs),this.environmentInjector=C(ct),this.inputBinder=C(Pl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new Dg(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=js({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[$s]});let t=e;return t})(),Dg=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===wo?this.route:e===ya?this.childContexts:this.parent.get(e,n)}},Pl=new M(""),eD=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Is([i.queryParams,i.params,i.data]).pipe(ye(([s,a,u],c)=>(u=N(N(N({},s),a),u),c===0?F(u):Promise.resolve(u)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=p0(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function C1(t,e,n){let r=fa(t,e._root,n?n._root:void 0);return new Tl(r,e)}function fa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=T1(t,e,n);return new It(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>fa(t,a)),s}}let r=b1(e.value),i=e.children.map(o=>fa(t,o));return new It(r,i)}}function T1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return fa(t,r,i);return fa(t,r)})}function b1(t){return new wo(new We(t.url),new We(t.params),new We(t.queryParams),new We(t.fragment),new We(t.data),t.outlet,t.component,t)}var ED="ngNavigationCancelingError";function ID(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=vo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=DD(!1,Ot.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function DD(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[ED]=!0,n.cancellationCode=e,n}function A1(t){return CD(t)&&vo(t.url)}function CD(t){return!!t&&t[ED]}var S1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Fc({type:e,selectors:[["ng-component"]],standalone:!0,features:[i0],decls:1,vars:0,template:function(i,o){i&1&&Ke(0,"router-outlet")},dependencies:[D1],encapsulation:2});let t=e;return t})();function M1(t,e){return t.providers&&!t._injector&&(t._injector=Zc(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Rg(t){let e=t.children&&t.children.map(Rg),n=e?pe(N({},t),{children:e}):N({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==W&&(n.component=S1),n}function fn(t){return t.outlet||W}function x1(t,e){let n=t.filter(r=>fn(r)===e);return n.push(...t.filter(r=>fn(r)!==e)),n}function va(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var P1=(t,e,n,r)=>L(i=>(new Cg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Cg=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),ng(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=po(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=po(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=po(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=po(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new vg(o.value.snapshot))}),e.children.length&&this.forwardEvent(new mg(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(ng(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ng(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=va(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Al=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},mo=class{constructor(e,n){this.component=e,this.route=n}};function R1(t,e,n){let r=t._root,i=e?e._root:null;return na(r,i,n,[r.value])}function N1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Io(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!hE(t)?t:e.get(t):r}function na(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=po(e);return t.children.forEach(s=>{O1(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>sa(a,n.getContext(s),i)),i}function O1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=k1(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Al(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?na(t,e,a?a.children:null,r,i):na(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new mo(a.outlet.component,s))}else s&&sa(e,a,i),i.canActivateChecks.push(new Al(r)),o.component?na(t,null,a?a.children:null,r,i):na(t,null,n,r,i);return i}function k1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ri(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ri(t.url,e.url)||!hn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ig(t,e)||!hn(t.queryParams,e.queryParams);case"paramsChange":default:return!Ig(t,e)}}function sa(t,e,n){let r=po(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?sa(s,e.children.getContext(o),n):sa(s,null,n):sa(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new mo(e.outlet.component,i)):n.canDeactivateChecks.push(new mo(null,i)):n.canDeactivateChecks.push(new mo(null,i))}function _a(t){return typeof t=="function"}function F1(t){return typeof t=="boolean"}function V1(t){return t&&_a(t.canLoad)}function L1(t){return t&&_a(t.canActivate)}function j1(t){return t&&_a(t.canActivateChild)}function U1(t){return t&&_a(t.canDeactivate)}function B1(t){return t&&_a(t.canMatch)}function TD(t){return t instanceof Sn||t?.name==="EmptyError"}var gl=Symbol("INITIAL_VALUE");function Eo(){return ye(t=>Is(t.map(e=>e.pipe(xn(1),Ur(gl)))).pipe(L(e=>{for(let n of e)if(n!==!0){if(n===gl)return gl;if(n===!1||n instanceof cr)return n}return!0}),Ue(e=>e!==gl),xn(1)))}function $1(t,e){return Ne(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?F(pe(N({},n),{guardsResult:!0})):z1(s,r,i,t).pipe(Ne(a=>a&&F1(a)?q1(r,o,t,e):F(a)),L(a=>pe(N({},n),{guardsResult:a})))})}function z1(t,e,n,r){return ie(t).pipe(Ne(i=>Q1(i.component,i.route,n,e,r)),St(i=>i!==!0,!0))}function q1(t,e,n,r){return ie(e).pipe(Mn(i=>Ki(G1(i.route.parent,r),H1(i.route,r),K1(t,i.path,n),W1(t,i.route,n))),St(i=>i!==!0,!0))}function H1(t,e){return t!==null&&e&&e(new yg(t)),F(!0)}function G1(t,e){return t!==null&&e&&e(new gg(t)),F(!0)}function W1(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return F(!0);let i=r.map(o=>ic(()=>{let s=va(e)??n,a=Io(o,s),u=L1(a)?a.canActivate(e,t):dn(s,()=>a(e,t));return hr(u).pipe(St())}));return F(i).pipe(Eo())}function K1(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>N1(s)).filter(s=>s!==null).map(s=>ic(()=>{let a=s.guards.map(u=>{let c=va(s.node)??n,l=Io(u,c),d=j1(l)?l.canActivateChild(r,t):dn(c,()=>l(r,t));return hr(d).pipe(St())});return F(a).pipe(Eo())}));return F(o).pipe(Eo())}function Q1(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return F(!0);let s=o.map(a=>{let u=va(e)??i,c=Io(a,u),l=U1(c)?c.canDeactivate(t,e,n,r):dn(u,()=>c(t,e,n,r));return hr(l).pipe(St())});return F(s).pipe(Eo())}function Y1(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return F(!0);let o=i.map(s=>{let a=Io(s,t),u=V1(a)?a.canLoad(e,n):dn(t,()=>a(e,n));return hr(u)});return F(o).pipe(Eo(),bD(r))}function bD(t){return Wh(Me(e=>{if(vo(e))throw ID(t,e)}),L(e=>e===!0))}function Z1(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return F(!0);let o=i.map(s=>{let a=Io(s,t),u=B1(a)?a.canMatch(e,n):dn(t,()=>a(e,n));return hr(u)});return F(o).pipe(Eo(),bD(r))}var pa=class{constructor(e){this.segmentGroup=e||null}},Sl=class extends Error{constructor(e){super(),this.urlTree=e}};function fo(t){return Wi(new pa(t))}function X1(t){return Wi(new U(4e3,!1))}function J1(t){return Wi(DD(!1,Ot.GuardRejected))}var Tg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return F(r);if(i.numberOfChildren>1||!i.children[W])return X1(e.redirectTo);i=i.children[W]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Sl(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new cr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new se(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},bg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ek(t,e,n,r,i){let o=Ng(t,e,n);return o.matched?(r=M1(e,r),Z1(r,e,n,i).pipe(L(s=>s===!0?o:N({},bg)))):F(o)}function Ng(t,e,n){if(e.path==="**")return tk(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?N({},bg):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||YO)(n,t,e);if(!i)return N({},bg);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?N(N({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function tk(t){return{matched:!0,parameters:t.length>0?oD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function tD(t,e,n,r){return n.length>0&&ik(t,n,r)?{segmentGroup:new se(e,rk(r,new se(n,t.children))),slicedSegments:[]}:n.length===0&&ok(t,n,r)?{segmentGroup:new se(t.segments,nk(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new se(t.segments,t.children),slicedSegments:n}}function nk(t,e,n,r){let i={};for(let o of n)if(Rl(t,e,o)&&!r[fn(o)]){let s=new se([],{});i[fn(o)]=s}return N(N({},r),i)}function rk(t,e){let n={};n[W]=e;for(let r of t)if(r.path===""&&fn(r)!==W){let i=new se([],{});n[fn(r)]=i}return n}function ik(t,e,n){return n.some(r=>Rl(t,e,r)&&fn(r)!==W)}function ok(t,e,n){return n.some(r=>Rl(t,e,r))}function Rl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function sk(t,e,n,r){return fn(t)!==r&&(r===W||!Rl(e,n,t))?!1:Ng(e,t,n).matched}function ak(t,e,n){return e.length===0&&!t.children[n]}var Ag=class{};function uk(t,e,n,r,i,o,s="emptyOnly"){return new Sg(t,e,n,r,i,s,o).recognize()}var ck=31,Sg=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Tg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){let e=tD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(L(n=>{let r=new ha([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,{},W,this.rootComponentType,null,{}),i=new It(r,n),o=new bl("",i),s=g1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,W).pipe(Xn(r=>{if(r instanceof Sl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof pa?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=xg(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(L(o=>o instanceof It?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ie(i).pipe(Mn(o=>{let s=r.children[o],a=x1(n,o);return this.processSegmentGroup(e,a,s,o)}),jr((o,s)=>(o.push(...s),o)),Jn(null),rf(),Ne(o=>{if(o===null)return fo(r);let s=AD(o);return lk(s),F(s)}))}processSegment(e,n,r,i,o,s){return ie(n).pipe(Mn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Xn(u=>{if(u instanceof pa)return F(null);throw u}))),St(a=>!!a),Xn(a=>{if(TD(a))return ak(r,i,o)?F(new Ag):fo(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return sk(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):fo(i):fo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:l}=Ng(n,i,o);if(!a)return fo(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ck&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,d).pipe(Ne(h=>this.processSegment(e,r,n,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=ek(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(ye(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ye(({routes:u})=>{let c=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new ha(l,h,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,hk(r),fn(r),r.component??r._loadedComponent??null,r,fk(r)),{segmentGroup:_,slicedSegments:v}=tD(n,l,d,u);if(v.length===0&&_.hasChildren())return this.processChildren(c,u,_).pipe(L(I=>I===null?null:new It(f,I)));if(u.length===0&&v.length===0)return F(new It(f,[]));let m=fn(r)===o;return this.processSegment(c,u,_,v,m?W:o,!0).pipe(L(I=>new It(f,I instanceof It?[I]:[])))}))):fo(n)))}getChildConfig(e,n,r){return n.children?F({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?F({routes:n._loadedRoutes,injector:n._loadedInjector}):Y1(e,n,r,this.urlSerializer).pipe(Ne(i=>i?this.configLoader.loadChildren(e,n).pipe(Me(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):J1(n))):F({routes:[],injector:e})}};function lk(t){t.sort((e,n)=>e.value.outlet===W?-1:n.value.outlet===W?1:e.value.outlet.localeCompare(n.value.outlet))}function dk(t){let e=t.value.routeConfig;return e&&e.path===""}function AD(t){let e=[],n=new Set;for(let r of t){if(!dk(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=AD(r.children);e.push(new It(r.value,i))}return e.filter(r=>!n.has(r))}function hk(t){return t.data||{}}function fk(t){return t.resolve||{}}function pk(t,e,n,r,i,o){return Ne(s=>uk(t,e,n,r,s.extractedUrl,i,o).pipe(L(({state:a,tree:u})=>pe(N({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function gk(t,e){return Ne(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return F(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let c of SD(u))s.add(c);let a=0;return ie(s).pipe(Mn(u=>o.has(u)?mk(u,r,t,e):(u.data=xg(u,u.parent,t).resolve,F(void 0))),Me(()=>a++),Qi(1),Ne(u=>a===s.size?F(n):pt))})}function SD(t){let e=t.children.map(n=>SD(n)).flat();return[t,...e]}function mk(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!wD(i)&&(o[ga]=i.title),yk(o,t,e,r).pipe(L(s=>(t._resolvedData=s,t.data=xg(t,t.parent,n).resolve,null)))}function yk(t,e,n,r){let i=og(t);if(i.length===0)return F({});let o={};return ie(i).pipe(Ne(s=>vk(t[s],e,n,r).pipe(St(),Me(a=>{o[s]=a}))),Qi(1),tf(o),Xn(s=>TD(s)?pt:Wi(s)))}function vk(t,e,n,r){let i=va(e)??r,o=Io(t,i),s=o.resolve?o.resolve(e,n):dn(i,()=>o(e,n));return hr(s)}function rg(t){return ye(e=>{let n=t(e);return n?ie(n).pipe(L(()=>e)):F(e)})}var MD=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===W);return i}getResolvedTitleForRoute(r){return r.data[ga]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(_k),providedIn:"root"});let t=e;return t})(),_k=(()=>{let e=class e extends MD{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(D(K0))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wa=new M("",{providedIn:"root",factory:()=>({})}),Ml=new M(""),Og=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=C(Jc)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return F(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=hr(r.loadComponent()).pipe(L(xD),Me(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),er(()=>{this.componentLoaders.delete(r)})),o=new zi(i,()=>new je).pipe($i());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return F({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=wk(i,this.compiler,r,this.onLoadEndListener).pipe(er(()=>{this.childrenLoaders.delete(i)})),a=new zi(s,()=>new je).pipe($i());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wk(t,e,n,r){return hr(t.loadChildren()).pipe(L(xD),Ne(i=>i instanceof Vs||Array.isArray(i)?F(i):ie(e.compileModuleAsync(i))),L(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Ml,[],{optional:!0,self:!0}).flat()),{routes:s.map(Rg),injector:o}}))}function Ek(t){return t&&typeof t=="object"&&"default"in t}function xD(t){return Ek(t)?t.default:t}var kg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(Ik),providedIn:"root"});let t=e;return t})(),Ik=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),PD=new M(""),RD=new M("");function Dk(t,e,n){let r=t.get(RD),i=t.get(nt);return t.get(J).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),Ck(t))),{onViewTransitionCreated:u}=r;return u&&dn(t,()=>u({transition:a,from:e,to:n})),s})}function Ck(t){return new Promise(e=>{Ip(e,{injector:t})})}var Fg=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new je,this.transitionAbortSubject=new je,this.configLoader=C(Og),this.environmentInjector=C(ct),this.urlSerializer=C(ma),this.rootContexts=C(ya),this.location=C(lo),this.inputBindingEnabled=C(Pl,{optional:!0})!==null,this.titleStrategy=C(MD),this.options=C(wa,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=C(kg),this.createViewTransition=C(PD,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let r=o=>this.events.next(new fg(o)),i=o=>this.events.next(new pg(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(pe(N(N({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new We({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:oa,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ue(s=>s.id!==0),L(s=>pe(N({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ye(s=>{this.currentTransition=s;let a=!1,u=!1;return F(s).pipe(Me(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?pe(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ye(c=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new dr(c.id,this.urlSerializer.serialize(c.rawUrl),h,El.IgnoredSameUrlNavigation)),c.resolve(null),pt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return F(c).pipe(ye(h=>{let f=this.transitions?.getValue();return this.events.next(new _o(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?pt:Promise.resolve(h)}),pk(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Me(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=pe(N({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Il(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:_,restoredState:v,extras:m}=c,I=new _o(h,this.urlSerializer.serialize(f),_,v);this.events.next(I);let P=vD(this.rootComponentType).snapshot;return this.currentTransition=s=pe(N({},c),{targetSnapshot:P,urlAfterRedirects:f,extras:pe(N({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,F(s)}else{let h="";return this.events.next(new dr(c.id,this.urlSerializer.serialize(c.extractedUrl),h,El.IgnoredByUrlHandlingStrategy)),c.resolve(null),pt}}),Me(c=>{let l=new cg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),L(c=>(this.currentTransition=s=pe(N({},c),{guards:R1(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),$1(this.environmentInjector,c=>this.events.next(c)),Me(c=>{if(s.guardsResult=c.guardsResult,vo(c.guardsResult))throw ID(this.urlSerializer,c.guardsResult);let l=new lg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Ue(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Ot.GuardRejected),!1)),rg(c=>{if(c.guards.canActivateChecks.length)return F(c).pipe(Me(l=>{let d=new dg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ye(l=>{let d=!1;return F(l).pipe(gk(this.paramsInheritanceStrategy,this.environmentInjector),Me({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Ot.NoDataFromResolver)}}))}),Me(l=>{let d=new hg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),rg(c=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Me(f=>{d.component=f}),L(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Is(l(c.targetSnapshot.root)).pipe(Jn(null),xn(1))}),rg(()=>this.afterPreactivation()),ye(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?ie(d).pipe(L(()=>s)):F(s)}),L(c=>{let l=C1(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=pe(N({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Me(()=>{this.events.next(new la)}),P1(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),xn(1),Me({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ln(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),sf(this.transitionAbortSubject.pipe(Me(c=>{throw c}))),er(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",Ot.SupersededByNewNavigation),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Xn(c=>{if(u=!0,CD(c))this.events.next(new lr(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),A1(c)?this.events.next(new da(c.url)):s.resolve(!1);else{this.events.next(new ca(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return pt}))}))}cancelNavigationTransition(r,i,o){let s=new lr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Tk(t){return t!==oa}var bk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(Ak),providedIn:"root"});let t=e;return t})(),Mg=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Ak=(()=>{let e=class e extends Mg{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Uc(e)))(o||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ND=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(Sk),providedIn:"root"});let t=e;return t})(),Sk=(()=>{let e=class e extends ND{constructor(){super(...arguments),this.location=C(lo),this.urlSerializer=C(ma),this.options=C(wa,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=C(kg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new cr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=vD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof _o)this.stateMemento=this.createStateMemento();else if(r instanceof dr)this.rawUrlTree=i.initialUrl;else if(r instanceof Il){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof la?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof lr&&(r.code===Ot.GuardRejected||r.code===Ot.NoDataFromResolver)?this.restoreHistory(i):r instanceof ca?this.restoreHistory(i,!0):r instanceof Ln&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=N(N({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=N(N({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Uc(e)))(o||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ra=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ra||{});function OD(t,e){t.events.pipe(Ue(n=>n instanceof Ln||n instanceof lr||n instanceof ca||n instanceof dr),L(n=>n instanceof Ln||n instanceof dr?ra.COMPLETE:(n instanceof lr?n.code===Ot.Redirect||n.code===Ot.SupersededByNewNavigation:!1)?ra.REDIRECTING:ra.FAILED),Ue(n=>n!==ra.REDIRECTING),xn(1)).subscribe(()=>{e()})}function Mk(t){throw t}var xk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Pk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ii=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=C(Xc),this.stateManager=C(ND),this.options=C(wa,{optional:!0})||{},this.pendingTasks=C(Yr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=C(Fg),this.urlSerializer=C(ma),this.location=C(lo),this.urlHandlingStrategy=C(kg),this._events=new je,this.errorHandler=this.options.errorHandler||Mk,this.navigated=!1,this.routeReuseStrategy=C(bk),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=C(Ml,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!C(Pl,{optional:!0}),this.eventsSubscription=new Se,this.isNgZoneEnabled=C(J)instanceof J&&J.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof lr&&i.code!==Ot.Redirect&&i.code!==Ot.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ln)this.navigated=!0;else if(i instanceof da){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Tk(o.source)};this.scheduleNavigation(a,oa,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}Nk(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),oa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=N({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Rg),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:a,d=null;switch(u){case"merge":d=N(N({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=pD(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return gD(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=vo(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,oa,null,i)}navigate(r,i={skipLocationChange:!1}){return Rk(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=N({},xk):i===!1?o=N({},Pk):o=i,vo(r))return Y0(this.currentUrlTree,r,o);let s=this.parseUrl(r);return Y0(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,c,l;a?(u=a.resolve,c=a.reject,l=a.promise):l=new Promise((h,f)=>{u=h,c=f});let d=this.pendingTasks.add();return OD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Rk(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new U(4008,!1)}function Nk(t){return!(t instanceof la)&&!(t instanceof da)}var xl=class{};var Ok=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ue(r=>r instanceof Ln),Mn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Zc(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,u=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(u,s.children??s._loadedRoutes))}return ie(o).pipe(Zn())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=F(null);let s=o.pipe(Ne(a=>a===null?F(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return ie([s,a]).pipe(Zn())}else return s})}};e.\u0275fac=function(i){return new(i||e)(D(ii),D(Jc),D(ct),D(xl),D(Og))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),kD=new M(""),kk=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof _o?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Ln?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof dr&&r.code===El.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Dl&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Dl(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){FI()},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function Fk(t){return t.routerState.root}function Ea(t,e){return{\u0275kind:t,\u0275providers:e}}function Vk(){let t=C(Wt);return e=>{let n=t.get(Zr);if(e!==n.components[0])return;let r=t.get(ii),i=t.get(FD);t.get(Vg)===1&&r.initialNavigation(),t.get(VD,null,Y.Optional)?.setUpPreloading(),t.get(kD,null,Y.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var FD=new M("",{factory:()=>new je}),Vg=new M("",{providedIn:"root",factory:()=>1});function Lk(){return Ea(2,[{provide:Vg,useValue:0},{provide:nl,multi:!0,deps:[Wt],useFactory:e=>{let n=e.get(E0,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(ii),o=e.get(FD);OD(i,()=>{r(!0)}),e.get(Fg).afterPreactivation=()=>(r(!0),o.closed?F(void 0):o),i.initialNavigation()}))}}])}function jk(){return Ea(3,[{provide:nl,multi:!0,useFactory:()=>{let e=C(ii);return()=>{e.setUpLocationChangeListener()}}},{provide:Vg,useValue:2}])}var VD=new M("");function Uk(t){return Ea(0,[{provide:VD,useExisting:Ok},{provide:xl,useExisting:t}])}function Bk(){return Ea(8,[eD,{provide:Pl,useExisting:eD}])}function $k(t){let e=[{provide:PD,useValue:Dk},{provide:RD,useValue:N({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ea(9,e)}var nD=new M("ROUTER_FORROOT_GUARD"),zk=[lo,{provide:ma,useClass:aa},ii,ya,{provide:wo,useFactory:Fk,deps:[ii]},Og,[]],Lg=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[zk,[],{provide:Ml,multi:!0,useValue:r},{provide:nD,useFactory:Wk,deps:[[ii,new qs,new uI]]},{provide:wa,useValue:i||{}},i?.useHash?Hk():Gk(),qk(),i?.preloadingStrategy?Uk(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Kk(i):[],i?.bindToComponentInputs?Bk().\u0275providers:[],i?.enableViewTransitions?$k().\u0275providers:[],Qk()]}}static forChild(r){return{ngModule:e,providers:[{provide:Ml,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(D(nD,8))},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({});let t=e;return t})();function qk(){return{provide:kD,useFactory:()=>{let t=C(b0),e=C(J),n=C(wa),r=C(Fg),i=C(ma);return n.scrollOffset&&t.setOffset(n.scrollOffset),new kk(i,r,t,e,n)}}}function Hk(){return{provide:Jr,useClass:D0}}function Gk(){return{provide:Jr,useClass:jp}}function Wk(t){return"guarded"}function Kk(t){return[t.initialNavigation==="disabled"?jk().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Lk().\u0275providers:[]]}var rD=new M("");function Qk(){return[{provide:rD,useFactory:Vk},{provide:rl,multi:!0,useExisting:rD}]}var Yk=[],LD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({imports:[Lg.forRoot(Yk),Lg]});let t=e;return t})();function Zk(t,e){t&1&&(Ee(0,"ul",22)(1,"li",23)(2,"a"),Rt(3,"\u0648\u0627\u0641\u0644"),le(),Ke(4,"img",24),le(),Ee(5,"li",23)(6,"a"),Rt(7,"\u0631\u0632 \u0628\u0644\u0628\u0646 "),le(),Ke(8,"img",25),le(),Ee(9,"li",23)(10,"a"),Rt(11,"\u0641\u0634\u0627\u0631 "),le(),Ke(12,"img",26),le(),Ee(13,"li",23)(14,"a"),Rt(15,"\u0643\u0648\u0641\u064A "),le(),Ke(16,"img",27),le()())}var jD=(()=>{let e=class e{constructor(){this.title="Front",this.Array=["A","B","C","A","B","C","A","B","C","A","B","C","A","B","C","A","B","C","A","B","C","A","B","C","A","B","C"],this.Show_Menu=!1}Toggle_List_Of_Menu(){this.Show_Menu=!this.Show_Menu}Disable_List_Of_Menu(){this.Show_Menu=!1}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Fc({type:e,selectors:[["app-root"]],decls:43,vars:1,consts:[[1,"container"],[1,"row","logo"],["src","assets/logo1.jpg","alt","logo","loading","lazy"],[1,"row","justify-content-center"],["id","menu"],[3,"click"],["src","assets/tools/home.png",1,"nav-img"],[1,"Parent-of-list-of-menu",3,"click"],["src","assets/tools/menu.png",1,"nav-img"],["class","list-of-menu",4,"ngIf"],["src","assets/tools/cart.png",1,"nav-img"],["src","assets/tools/contact-us.png",1,"nav-img"],[1,"Product-intro","col-12"],[1,"Product-intro-row","row"],[1,"col-lg-6","col-md-6","col-sm-6"],["src","assets/imageing/WhatsApp Image 2024-02-11 at 17.16.00_d7ed65b5.jpg","alt","",1,"image-intro"],[1,"Bumbo-into","col-lg-6","col-md-6","col-sm-6"],[1,"Product-Hightlight","scroll-container","row"],[1,"col-lg-4","col-md-6","col-sm-6"],["src","assets/imageing/1.jpg","alt","",1,"scroll-item"],["src","assets/imageing/2.jpg","alt","",1,"scroll-item"],["src","assets/imageing/3.jpg","alt","",1,"scroll-item"],[1,"list-of-menu"],[1,"list-of-menu-item"],["src","assets/imageing/\u0644\u0628\u0629-\u0648\u0627\u0641\u0644.gif","alt","",1,"list-of-menu-img"],["src","assets/imageing/2\u0631\u0632-\u0628\u0644\u0628\u0646.gif","alt","",1,"list-of-menu-img"],["src","assets/imageing/2\u0639\u0644\u0628\u0629-\u0641\u064A\u0634\u0627\u0631.gif","alt","",1,"list-of-menu-img"],["src","assets/imageing/\u0639\u0644\u0628\u0629-\u0643\u0648\u0641\u0649.gif","alt","",1,"list-of-menu-img"]],template:function(i,o){i&1&&(Ee(0,"div",0)(1,"div",1),Ke(2,"img",2),le(),Ee(3,"div",3)(4,"nav")(5,"ul",4)(6,"li",5),ar("click",function(){return o.Disable_List_Of_Menu()}),Ee(7,"a"),Rt(8,"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629"),le(),Ke(9,"img",6),le(),Ee(10,"li",7),ar("click",function(){return o.Toggle_List_Of_Menu()}),Ee(11,"a"),Rt(12,"\u0627\u0644\u0645\u0646\u064A\u0648"),le(),Ke(13,"img",8),Tp(14,Zk,17,0,"ul",9),le(),Ee(15,"li",5),ar("click",function(){return o.Disable_List_Of_Menu()}),Ee(16,"a"),Rt(17,"\u0627\u0644\u0633\u0644\u0629"),le(),Ke(18,"img",10),le(),Ee(19,"li",5),ar("click",function(){return o.Disable_List_Of_Menu()}),Ee(20,"a"),Rt(21,"\u0625\u062A\u0635\u0644 \u0628\u0646\u0627"),le(),Ke(22,"img",11),le()()(),Ee(23,"div",12)(24,"div",13)(25,"div",14),Ke(26,"img",15),le(),Ee(27,"div",16)(28,"h2")(29,"strong"),Rt(30," \u0628\u0648\u0645\u0628\u0648 "),le()(),Ee(31,"p"),Rt(32," \u0646\u0634\u0623\u062A \u0641\u0649 \u0627\u0631\u0636 \u0627\u0644\u062D\u0636\u0627\u0631\u0629 \u0641\u0623\u062F\u0631\u0643\u062A \u0623\u0646\u0646\u064A \u063A\u0628\u062A \u0639\u0634\u0631\u0627\u062A \u0627\u0644\u0642\u0631\u0648\u0646 \u0639\u0646 \u0627\u0644\u0639\u0627\u0644\u0645 \u0641\u0648\u0642 \u0627\u0644\u0633\u0645\u0627\u0621 \u0648 \u0627\u0644\u064A\u0648\u0645 \u0627\u062A\u064A\u062A \u0627\u0644\u0649 \u0627\u0631\u0636 \u0645\u062C\u0627\u0646 \u0644\u0627\u0645\u062F\u0643\u0645 \u0628\u0627\u0644\u062D\u0628 \u0648 \u0627\u0644\u0637\u0627\u0642\u0629 \u0648 \u0627\u0644\u0637\u0639\u0645 \u0627\u0644\u0627\u0641\u0636\u0644 \u0641\u0649 \u0639\u064F\u0645\u0627\u0646 "),le(),Ee(33,"p")(34,"strong"),Rt(35," Boumbo - Oman's\xA0best\xA0flavor "),le()()()()(),Ee(36,"div",17)(37,"div",18),Ke(38,"img",19),le(),Ee(39,"div",18),Ke(40,"img",20),le(),Ee(41,"div",18),Ke(42,"img",21),le()()()()),i&2&&(OI(14),bp("ngIf",o.Show_Menu))},dependencies:[C0],styles:[".container[_ngcontent-%COMP%]{box-shadow:0 0 6px 2px #0000006e;height:-webkit-fill-available;overflow:auto;background:radial-gradient(circle at center,#fce0c2,#da7e1b);padding-bottom:150px}.container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{max-height:400px;overflow:hidden;display:flex;align-content:flex-start}.container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:0}.Mahmoud[_ngcontent-%COMP%]{padding:0;text-align:center}.Mahmoud[_ngcontent-%COMP%]   .MyCard[_ngcontent-%COMP%]{background-color:#c7c7c7;min-height:150px;margin:4px;width:-webkit-fill-available;box-shadow:2px 3px 6px #0000006e;border-radius:4px}.Mahmoud[_ngcontent-%COMP%]   .MyCard[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:-webkit-fill-available}.Product-intro[_ngcontent-%COMP%]   .image-intro[_ngcontent-%COMP%]{max-width:85%}.Product-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.Product-intro[_ngcontent-%COMP%]   .Product-intro-row[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.Product-intro[_ngcontent-%COMP%]   .Product-intro-row[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:12px;box-shadow:2px 3px 6px #000000f2}.Product-intro[_ngcontent-%COMP%]   .Product-intro-row[_ngcontent-%COMP%]   .Bumbo-into[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center}.Product-Hightlight[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.Product-Hightlight[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:85%;margin:18px 0;border-radius:4px;filter:drop-shadow(2px 3px 6px #00000075)}ul[_ngcontent-%COMP%]{list-style:none;display:flex;flex-direction:row-reverse;justify-content:space-evenly;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:8px;display:flex;flex-direction:column-reverse;justify-content:center;align-items:center;cursor:pointer}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .nav-img[_ngcontent-%COMP%]{width:24px}.Parent-of-list-of-menu[_ngcontent-%COMP%]{position:relative}.list-of-menu[_ngcontent-%COMP%]{position:absolute;background:radial-gradient(circle at top,#ffb564,#ec9a41);border:1px solid #505050;top:-50px;left:50%;transform:translate(-50%);border-radius:6px;box-shadow:0 20px 16px #00000063}.list-of-menu[_ngcontent-%COMP%]   .list-of-menu-item[_ngcontent-%COMP%]{margin:10px 18px;position:relative}.list-of-menu[_ngcontent-%COMP%]   .list-of-menu-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{white-space:nowrap;font-size:small;margin:3px;font-weight:700}.list-of-menu[_ngcontent-%COMP%]   .list-of-menu-item[_ngcontent-%COMP%]   .list-of-menu-img[_ngcontent-%COMP%]{position:absolute;top:-46px;width:70px;height:54px;filter:drop-shadow(0px 2px 1px rgba(0,0,0,50%))}@media screen and (max-width: 768px){nav[_ngcontent-%COMP%]{z-index:1;position:absolute;bottom:0;background:radial-gradient(circle at top,#ffb564,#ec9a41);border-top:3px solid #505050;border-radius:17px 17px 0 0;box-shadow:0 -10px 11px #00000017}}"]});let t=e;return t})();var Xk="firebase",Jk="10.8.0";Yn(Xk,Jk,"app");var si=new On("ANGULARFIRE2_VERSION");var eF=(t,e)=>{let n=e?[e]:Y_(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},oi=class{constructor(){return eF(tF)}},tF="app-check";function jg(){}var Nl=class{zone;delegate;constructor(e,n=Zh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Ug=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",jg,{},jg,jg)),n.pipe(Me({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Ol=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Nl(Zone.current)),this.insideAngular=n.run(()=>new Nl(Zone.current,Es)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(D(J))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nF(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function yt(t){return rF(nF())(t)}function rF(t){return function(n){return n=n.lift(new Ug(t.ngZone)),n.pipe($t(t.outsideAngular),At(t.insideAngular))}}var sF=new Map,aF={activated:!1,tokenObservers:[]},uF={initialized:!1,enabled:!1};function Kt(t){return sF.get(t)||Object.assign({},aF)}function HD(){return uF}var cF="https://content-firebaseappcheck.googleapis.com/v1";var lF="exchangeDebugToken",BD={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},NH=24*60*60*1e3;var $g=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new kh,this.pending.promise.catch(n=>{}),yield dF(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new kh,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function dF(t){return new Promise(e=>{setTimeout(e,t)})}var hF={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},fr=new K_("appCheck","AppCheck",hF);function GD(t){if(!Kt(t).activated)throw fr.create("use-before-activation",{appName:t.name})}function WD(r,i){return y(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(f){throw fr.create("fetch-network-error",{originalErrorMessage:f?.message})}if(u.status!==200)throw fr.create("fetch-status-error",{httpStatus:u.status});let c;try{c=yield u.json()}catch(f){throw fr.create("fetch-parse-error",{originalErrorMessage:f?.message})}let l=c.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw fr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let d=Number(l[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function KD(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${cF}/projects/${n}/apps/${r}:${lF}?key=${i}`,body:{debug_token:e}}}var fF="firebase-app-check-database",pF=1,zg="firebase-app-check-store";var kl=null;function gF(){return kl||(kl=new Promise((t,e)=>{try{let n=indexedDB.open(fF,pF);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(fr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(zg,{keyPath:"compositeKey"})}}}catch(n){e(fr.create("storage-open",{originalErrorMessage:n?.message}))}}),kl)}function mF(t,e){return yF(vF(t),e)}function yF(t,e){return y(this,null,function*(){let r=(yield gF()).transaction(zg,"readwrite"),o=r.objectStore(zg).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var c;a(fr.create("storage-set",{originalErrorMessage:(c=u.target.error)===null||c===void 0?void 0:c.message}))}})})}function vF(t){return`${t.options.appId}-${t.name}`}var qg=new Vu("@firebase/app-check");function Bg(t,e){return Fu()?mF(t,e).catch(n=>{qg.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function QD(){return HD().enabled}function YD(){return y(this,null,function*(){let t=HD();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var _F={error:"UNKNOWN_ERROR"};function wF(t){return H_.encodeString(JSON.stringify(t),!1)}function Hg(t,e=!1){return y(this,null,function*(){let n=t.app;GD(n);let r=Kt(n),i=r.token,o;if(i&&!Ia(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Ia(u)?i=u:yield Bg(n,void 0))}if(!e&&i&&Ia(i))return{token:i.token};let s=!1;if(QD()){r.exchangeTokenPromise||(r.exchangeTokenPromise=WD(KD(n,yield YD()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield Bg(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Kt(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?qg.warn(u.message):qg.error(u),o=u}let a;return i?o?Ia(i)?a={token:i.token,internalError:o}:a=zD(o):(a={token:i.token},r.token=i,yield Bg(n,i)):a=zD(o),s&&CF(n,a),a})}function EF(t){return y(this,null,function*(){let e=t.app;GD(e);let{provider:n}=Kt(e);if(QD()){let r=yield YD(),{token:i}=yield WD(KD(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function IF(t,e,n,r){let{app:i}=t,o=Kt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ia(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),$D(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>$D(t))}function ZD(t,e){let n=Kt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function $D(t){let{app:e}=t,n=Kt(e),r=n.tokenRefresher;r||(r=DF(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function DF(t){let{app:e}=t;return new $g(()=>y(this,null,function*(){let n=Kt(e),r;if(n.token?r=yield Hg(t,!0):r=yield Hg(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Kt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},BD.RETRIAL_MIN_WAIT,BD.RETRIAL_MAX_WAIT)}function CF(t,e){let n=Kt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ia(t){return t.expireTimeMillis-Date.now()>0}function zD(t){return{token:wF(_F),error:t}}var Gg=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Kt(this.app);for(let n of e)ZD(this.app,n.next);return Promise.resolve()}};function TF(t,e){return new Gg(t,e)}function bF(t){return{getToken:e=>Hg(t,e),getLimitedUseToken:()=>EF(t),addTokenListener:e=>IF(t,"INTERNAL",e),removeTokenListener:e=>ZD(t.app,e)}}var AF="@firebase/app-check",SF="0.8.2";var MF="app-check",qD="app-check-internal";function xF(){ys(new kr(MF,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return TF(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(qD).initialize()})),ys(new kr(qD,t=>{let e=t.getProvider("app-check").getImmediate();return bF(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Yn(AF,SF)}xF();var PF=["localhost","0.0.0.0","127.0.0.1"],HH=typeof window<"u"&&PF.includes(window.location.hostname);var RF="firebase",NF="10.8.0";at.registerVersion(RF,NF,"app-compat");var OF=["ngOnDestroy"],eC=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(OF.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(c=>n.run(()=>c)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,c)=>s.then(l=>{let d=l?.(...c);return r?.spy?.apply&&r.spy.apply(o,c,d),d})})})});var Fl=class{constructor(e){return e}},Do=new M("angularfire2.app.options"),Co=new M("angularfire2.app.name");function Da(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=at.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>at.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;kF("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Fl(s)}var kF=(t,...e)=>{Rp()&&typeof console<"u"&&console[t](...e)},FF={provide:Fl,useFactory:Da,deps:[Do,J,[new qs,Co]]},tC=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Do,useValue:n},{provide:Co,useValue:r}]}}constructor(n){at.registerVersion("angularfire",si.full,"core"),at.registerVersion("angularfire",si.full,"app-compat"),at.registerVersion("angular",o0.full,n.toString())}static \u0275fac=function(r){return new(r||t)(D(tt))};static \u0275mod=Ce({type:t});static \u0275inj=De({providers:[FF]})}return t})();function Vl(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return VF(i,s)||(JD("error",`${e} was already initialized on the ${n} Firebase App with different settings.${LF?" You may need to reload as Firebase is not HMR aware.":""}`),JD("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function VF(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var LF=typeof module<"u"&&!!module.hot,JD=(t,...e)=>{Rp()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Wg=new M("angularfire2.auth.use-emulator"),Kg=new M("angularfire2.auth.settings"),Qg=new M("angularfire2.auth.tenant-id"),Yg=new M("angularfire2.auth.langugage-code"),Zg=new M("angularfire2.auth.use-device-language"),Xg=new M("angularfire.auth.persistence"),Jg=(t,e,n,r,i,o,s,a)=>Vl(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[c,l]of Object.entries(s))u.settings[c]=l;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]),em=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,c,l,d,h,f){let _=new je,v=F(void 0).pipe(At(s.outsideAngular),ye(()=>o.runOutsideAngular(()=>import("./chunk-SFVC2T43.js"))),L(()=>Da(n,o,r)),L(m=>Jg(m,o,a,c,l,d,u,h)),sc({bufferSize:1,refCount:!1}));if(ei(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=F(null);else{v.pipe(St()).subscribe();let m=v.pipe(ye(T=>T.getRedirectResult().then(R=>R,()=>null)),yt,sc({bufferSize:1,refCount:!1})),I=v.pipe(ye(T=>new Z(R=>({unsubscribe:o.runOutsideAngular(()=>T.onAuthStateChanged(j=>R.next(j),j=>R.error(j),()=>R.complete()))})))),P=v.pipe(ye(T=>new Z(R=>({unsubscribe:o.runOutsideAngular(()=>T.onIdTokenChanged(j=>R.next(j),j=>R.error(j),()=>R.complete()))}))));this.authState=m.pipe(ac(I),$t(s.outsideAngular),At(s.insideAngular)),this.user=m.pipe(ac(P),$t(s.outsideAngular),At(s.insideAngular)),this.idToken=this.user.pipe(ye(T=>T?ie(T.getIdToken()):F(null))),this.idTokenResult=this.user.pipe(ye(T=>T?ie(T.getIdTokenResult()):F(null))),this.credential=ef(m,_,this.authState.pipe(Ue(T=>!T))).pipe(L(T=>T?.user?T:null),$t(s.outsideAngular),At(s.insideAngular))}return eC(this,v,o,{spy:{apply:(m,I,P)=>{(m.startsWith("signIn")||m.startsWith("createUser"))&&P.then(T=>_.next(T))}}})}static \u0275fac=function(r){return new(r||t)(D(Do),D(Co,8),D(tt),D(J),D(Ol),D(Wg,8),D(Kg,8),D(Qg,8),D(Yg,8),D(Zg,8),D(Xg,8),D(oi,8))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),nC=(()=>{class t{constructor(){at.registerVersion("angularfire",si.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ce({type:t});static \u0275inj=De({providers:[em]})}return t})();var UF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yt={},A,Im=Im||{},z=UF||self;function Zl(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Va(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function BF(t){return Object.prototype.hasOwnProperty.call(t,tm)&&t[tm]||(t[tm]=++$F)}var tm="closure_uid_"+(1e9*Math.random()>>>0),$F=0;function zF(t,e,n){return t.call.apply(t.bind,arguments)}function qF(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function rt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?rt=zF:rt=qF,rt.apply(null,arguments)}function Ll(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function qe(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function pr(){this.s=this.s,this.o=this.o}var HF=0;pr.prototype.s=!1;pr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),HF!=0)&&BF(this)};pr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var gC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Dm(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function rC(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Zl(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function it(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var GF=function(){if(!z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};z.addEventListener("test",n,e),z.removeEventListener("test",n,e)}catch{}return t}();function Ma(t){return/^[\s\xa0]*$/.test(t)}function Xl(){var t=z.navigator;return t&&(t=t.userAgent)?t:""}function pn(t){return Xl().indexOf(t)!=-1}function Cm(t){return Cm[" "](t),t}Cm[" "]=function(){};function WF(t,e){var n=kV;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var KF=pn("Opera"),So=pn("Trident")||pn("MSIE"),mC=pn("Edge"),sm=mC||So,yC=pn("Gecko")&&!(Xl().toLowerCase().indexOf("webkit")!=-1&&!pn("Edge"))&&!(pn("Trident")||pn("MSIE"))&&!pn("Edge"),QF=Xl().toLowerCase().indexOf("webkit")!=-1&&!pn("Edge");function vC(){var t=z.document;return t?t.documentMode:void 0}var am;e:{if(jl="",Ul=function(){var t=Xl();if(yC)return/rv:([^\);]+)(\)|;)/.exec(t);if(mC)return/Edge\/([\d\.]+)/.exec(t);if(So)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(QF)return/WebKit\/(\S+)/.exec(t);if(KF)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Ul&&(jl=Ul?Ul[1]:""),So&&(Bl=vC(),Bl!=null&&Bl>parseFloat(jl))){am=String(Bl);break e}am=jl}var jl,Ul,Bl,um;z.document&&So?(nm=vC(),um=nm||parseInt(am,10)||void 0):um=void 0;var nm,YF=um;function xa(t,e){if(it.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(yC){e:{try{Cm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:ZF[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&xa.$.h.call(this)}}qe(xa,it);var ZF={2:"touch",3:"pen",4:"mouse"};xa.prototype.h=function(){xa.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var La="closure_listenable_"+(1e6*Math.random()|0),XF=0;function JF(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++XF,this.fa=this.ia=!1}function Jl(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Tm(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function eV(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function _C(t){let e={};for(let n in t)e[n]=t[n];return e}var iC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wC(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<iC.length;o++)n=iC[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ed(t){this.src=t,this.g={},this.h=0}ed.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=lm(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new JF(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function cm(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=gC(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Jl(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function lm(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var bm="closure_lm_"+(1e6*Math.random()|0),rm={};function EC(t,e,n,r,i){if(r&&r.once)return DC(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)EC(t,e[o],n,r,i);return null}return n=Mm(n),t&&t[La]?t.O(e,n,Va(r)?!!r.capture:!!r,i):IC(t,e,n,!1,r,i)}function IC(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Va(i)?!!i.capture:!!i,a=Sm(t);if(a||(t[bm]=a=new ed(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=tV(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)GF||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(TC(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function tV(){function t(n){return e.call(t.src,t.listener,n)}let e=nV;return t}function DC(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)DC(t,e[o],n,r,i);return null}return n=Mm(n),t&&t[La]?t.P(e,n,Va(r)?!!r.capture:!!r,i):IC(t,e,n,!0,r,i)}function CC(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)CC(t,e[o],n,r,i);else r=Va(r)?!!r.capture:!!r,n=Mm(n),t&&t[La]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=lm(o,n,r,i),-1<n&&(Jl(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=Sm(t))&&(e=t.g[e.toString()],t=-1,e&&(t=lm(e,n,r,i)),(n=-1<t?e[t]:null)&&Am(n))}function Am(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[La])cm(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(TC(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Sm(e))?(cm(n,t),n.h==0&&(n.src=null,e[bm]=null)):Jl(t)}}}function TC(t){return t in rm?rm[t]:rm[t]="on"+t}function nV(t,e){if(t.fa)t=!0;else{e=new xa(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Am(t),t=n.call(r,e)}return t}function Sm(t){return t=t[bm],t instanceof ed?t:null}var im="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mm(t){return typeof t=="function"?t:(t[im]||(t[im]=function(e){return t.handleEvent(e)}),t[im])}function ze(){pr.call(this),this.i=new ed(this),this.S=this,this.J=null}qe(ze,pr);ze.prototype[La]=!0;ze.prototype.removeEventListener=function(t,e,n,r){CC(this,t,e,n,r)};function Ye(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new it(e,t);else if(e instanceof it)e.target=e.target||t;else{var i=e;e=new it(r,t),wC(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=$l(s,r,!0,e)&&i}if(s=e.g=t,i=$l(s,r,!0,e)&&i,i=$l(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=$l(s,r,!1,e)&&i}ze.prototype.N=function(){if(ze.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Jl(n[r]);delete t.g[e],t.h--}}this.J=null};ze.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ze.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function $l(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&cm(t.i,s),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var xm=z.JSON.stringify,dm=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function rV(){var t=Pm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var hm=class{constructor(){this.h=this.g=null}add(e,n){let r=bC.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},bC=new dm(()=>new fm,t=>t.reset()),fm=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function iV(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function oV(t){z.setTimeout(()=>{throw t},0)}var Pa,Ra=!1,Pm=new hm,AC=()=>{let t=z.Promise.resolve(void 0);Pa=()=>{t.then(sV)}},sV=()=>{for(var t;t=rV();){try{t.h.call(t.g)}catch(n){oV(n)}var e=bC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ra=!1};function td(t,e){ze.call(this),this.h=t||1,this.g=e||z,this.j=rt(this.qb,this),this.l=Date.now()}qe(td,ze);A=td.prototype;A.ga=!1;A.T=null;A.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ye(this,"tick"),this.ga&&(Rm(this),this.start()))}};A.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Rm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}A.N=function(){td.$.N.call(this),Rm(this),delete this.g};function Nm(t,e,n){if(typeof t=="function")n&&(t=rt(t,n));else if(t&&typeof t.handleEvent=="function")t=rt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:z.setTimeout(t,e||0)}function SC(t){t.g=Nm(()=>{t.g=null,t.i&&(t.i=!1,SC(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var pm=class extends pr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:SC(this)}N(){super.N(),this.g&&(z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Na(t){pr.call(this),this.h=t,this.g={}}qe(Na,pr);var oC=[];function MC(t,e,n,r){Array.isArray(n)||(n&&(oC[0]=n.toString()),n=oC);for(var i=0;i<n.length;i++){var o=EC(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function xC(t){Tm(t.g,function(e,n){this.g.hasOwnProperty(n)&&Am(e)},t),t.g={}}Na.prototype.N=function(){Na.$.N.call(this),xC(this)};Na.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function nd(){this.g=!0}nd.prototype.Ea=function(){this.g=!1};function aV(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");s=2<=d.length&&d[1]=="type"?s+(l+"="+c+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function uV(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function bo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+lV(t,n)+(r?" "+r:"")})}function cV(t,e){t.info(function(){return"TIMEOUT: "+e})}nd.prototype.info=function(){};function lV(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return xm(n)}catch{return e}}var li={},sC=null;function rd(){return sC=sC||new ze}li.Ta="serverreachability";function PC(t){it.call(this,li.Ta,t)}qe(PC,it);function Oa(t){let e=rd();Ye(e,new PC(e))}li.STAT_EVENT="statevent";function RC(t,e){it.call(this,li.STAT_EVENT,t),this.stat=e}qe(RC,it);function lt(t){let e=rd();Ye(e,new RC(e,t))}li.Ua="timingevent";function NC(t,e){it.call(this,li.Ua,t),this.size=e}qe(NC,it);function ja(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return z.setTimeout(function(){t()},e)}var id={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},OC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Om(){}Om.prototype.h=null;function aC(t){return t.h||(t.h=t.i())}function kC(){}var Ua={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function km(){it.call(this,"d")}qe(km,it);function Fm(){it.call(this,"c")}qe(Fm,it);var gm;function od(){}qe(od,Om);od.prototype.g=function(){return new XMLHttpRequest};od.prototype.i=function(){return{}};gm=new od;function Ba(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Na(this),this.P=dV,t=sm?125:void 0,this.V=new td(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new FC}function FC(){this.i=null,this.g="",this.h=!1}var dV=45e3,VC={},mm={};A=Ba.prototype;A.setTimeout=function(t){this.P=t};function ym(t,e,n){t.L=1,t.A=ad(Un(e)),t.u=n,t.S=!0,LC(t,null)}function LC(t,e){t.G=Date.now(),$a(t),t.B=Un(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),GC(n.i,"t",r),t.o=0,n=t.l.J,t.h=new FC,t.g=fT(t.l,n?e:null,!t.u),0<t.O&&(t.M=new pm(rt(t.Pa,t,t.g),t.O)),MC(t.U,t.g,"readystatechange",t.nb),e=t.I?_C(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Oa(),aV(t.j,t.v,t.B,t.m,t.W,t.u)}A.nb=function(t){t=t.target;let e=this.M;e&&gn(t)==3?e.l():this.Pa(t)};A.Pa=function(t){try{if(t==this.g)e:{let l=gn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||sm||this.g&&(this.h.h||this.g.ja()||dC(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?Oa(3):Oa(2)),sd(this);var n=this.g.da();this.ca=n;t:if(jC(this)){var r=dC(this.g);t="";var i=r.length,o=gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ai(this),Sa(this);var s="";break t}this.h.i=new z.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,uV(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ma(a)){var c=a;break t}}c=null}if(n=c)bo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vm(this,n);else{this.i=!1,this.s=3,lt(12),ai(this),Sa(this);break e}}this.S?(UC(this,l,s),sm&&this.i&&l==3&&(MC(this.U,this.V,"tick",this.mb),this.V.start())):(bo(this.j,this.m,s,null),vm(this,s)),l==4&&ai(this),this.i&&!this.J&&(l==4?cT(this.l,this):(this.i=!1,$a(this)))}else RV(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),ai(this),Sa(this)}}}catch{}finally{}};function jC(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function UC(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=hV(t,n),i==mm){e==4&&(t.s=4,lt(14),r=!1),bo(t.j,t.m,null,"[Incomplete Response]");break}else if(i==VC){t.s=4,lt(15),bo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else bo(t.j,t.m,i,null),vm(t,i);jC(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,lt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),$m(e),e.M=!0,lt(11))):(bo(t.j,t.m,n,"[Invalid Chunked Response]"),ai(t),Sa(t))}A.mb=function(){if(this.g){var t=gn(this.g),e=this.g.ja();this.o<e.length&&(sd(this),UC(this,t,e),this.i&&t!=4&&$a(this))}};function hV(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?mm:(n=Number(e.substring(n,r)),isNaN(n)?VC:(r+=1,r+n>e.length?mm:(e=e.slice(r,r+n),t.o=r+n,e)))}A.cancel=function(){this.J=!0,ai(this)};function $a(t){t.Y=Date.now()+t.P,BC(t,t.P)}function BC(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=ja(rt(t.lb,t),e)}function sd(t){t.C&&(z.clearTimeout(t.C),t.C=null)}A.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(cV(this.j,this.B),this.L!=2&&(Oa(),lt(17)),ai(this),this.s=2,Sa(this)):BC(this,this.Y-t)};function Sa(t){t.l.H==0||t.J||cT(t.l,t)}function ai(t){sd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Rm(t.V),xC(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function vm(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||_m(n.i,t))){if(!t.K&&_m(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Wl(n),ld(n);else break e;Bm(n),lt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=ja(rt(n.ib,n),6e3));if(1>=QC(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ui(n,11)}else if((t.K||n.g==t)&&Wl(n),!Ma(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let l=c[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let _=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var o=r.i;o.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Vm(o,o.h),o.h=null))}if(r.F){let v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,ge(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=hT(r,r.J?r.pa:null,r.Y),s.K){YC(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(sd(a),$a(a)),r.g=s}else aT(r);0<n.j.length&&dd(n)}else c[0]!="stop"&&c[0]!="close"||ui(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?ui(n,7):Um(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Oa(4)}catch{}}function fV(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Zl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function pV(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Zl(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function $C(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Zl(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=pV(t),r=fV(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var zC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gV(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ci(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ci){this.h=t.h,Hl(this,t.j),this.s=t.s,this.g=t.g,Gl(this,t.m),this.l=t.l;var e=t.i,n=new ka;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),uC(this,n),this.o=t.o}else t&&(e=String(t).match(zC))?(this.h=!1,Hl(this,e[1]||"",!0),this.s=ba(e[2]||""),this.g=ba(e[3]||"",!0),Gl(this,e[4]),this.l=ba(e[5]||"",!0),uC(this,e[6]||"",!0),this.o=ba(e[7]||"")):(this.h=!1,this.i=new ka(null,this.h))}ci.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Aa(e,cC,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Aa(e,cC,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Aa(n,n.charAt(0)=="/"?vV:yV,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Aa(n,wV)),t.join("")};function Un(t){return new ci(t)}function Hl(t,e,n){t.j=n?ba(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Gl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function uC(t,e,n){e instanceof ka?(t.i=e,EV(t.i,t.h)):(n||(e=Aa(e,_V)),t.i=new ka(e,t.h))}function ge(t,e,n){t.i.set(e,n)}function ad(t){return ge(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ba(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Aa(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,mV),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function mV(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var cC=/[#\/\?@]/g,yV=/[#\?:]/g,vV=/[#\?]/g,_V=/[#\?@]/g,wV=/#/g;function ka(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function gr(t){t.g||(t.g=new Map,t.h=0,t.i&&gV(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}A=ka.prototype;A.add=function(t,e){gr(this),this.i=null,t=Mo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function qC(t,e){gr(t),e=Mo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function HC(t,e){return gr(t),e=Mo(t,e),t.g.has(e)}A.forEach=function(t,e){gr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};A.ta=function(){gr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};A.Z=function(t){gr(this);let e=[];if(typeof t=="string")HC(this,t)&&(e=e.concat(this.g.get(Mo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};A.set=function(t,e){return gr(this),this.i=null,t=Mo(this,t),HC(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};A.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function GC(t,e,n){qC(t,e),0<n.length&&(t.i=null,t.g.set(Mo(t,e),Dm(n)),t.h+=n.length)}A.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function Mo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function EV(t,e){e&&!t.j&&(gr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(qC(this,r),GC(this,i,n))},t)),t.j=e}var IV=class{constructor(t,e){this.g=t,this.map=e}};function WC(t){this.l=t||DV,z.PerformanceNavigationTiming?(t=z.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(z.g&&z.g.Ka&&z.g.Ka()&&z.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var DV=10;function KC(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function QC(t){return t.h?1:t.g?t.g.size:0}function _m(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Vm(t,e){t.g?t.g.add(e):t.h=e}function YC(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}WC.prototype.cancel=function(){if(this.i=ZC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function ZC(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Dm(t.i)}var CV=class{stringify(t){return z.JSON.stringify(t,void 0)}parse(t){return z.JSON.parse(t,void 0)}};function TV(){this.g=new CV}function bV(t,e,n){let r=n||"";try{$C(t,function(i,o){let s=i;Va(i)&&(s=xm(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function AV(t,e){let n=new nd;if(z.Image){let r=new Image;r.onload=Ll(zl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ll(zl,n,r,"TestLoadImage: error",!1,e),r.onabort=Ll(zl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ll(zl,n,r,"TestLoadImage: timeout",!1,e),z.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function zl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function za(t){this.l=t.ec||null,this.j=t.ob||!1}qe(za,Om);za.prototype.g=function(){return new ud(this.l,this.j)};za.prototype.i=function(t){return function(){return t}}({});function ud(t,e){ze.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Lm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qe(ud,ze);var Lm=0;A=ud.prototype;A.open=function(t,e){if(this.readyState!=Lm)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Fa(this)};A.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||z).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};A.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qa(this)),this.readyState=Lm};A.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Fa(this)),this.g&&(this.readyState=3,Fa(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;XC(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function XC(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}A.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?qa(this):Fa(this),this.readyState==3&&XC(this)}};A.Za=function(t){this.g&&(this.response=this.responseText=t,qa(this))};A.Ya=function(t){this.g&&(this.response=t,qa(this))};A.ka=function(){this.g&&qa(this)};function qa(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Fa(t)}A.setRequestHeader=function(t,e){this.v.append(t,e)};A.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};A.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Fa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(ud.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var SV=z.JSON.parse;function Te(t){ze.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=JC,this.L=this.M=!1}qe(Te,ze);var JC="",MV=/^https?$/i,xV=["POST","PUT"];A=Te.prototype;A.Oa=function(t){this.M=t};A.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():gm.g(),this.C=this.u?aC(this.u):aC(gm),this.g.onreadystatechange=rt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){lC(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=z.FormData&&t instanceof z.FormData,!(0<=gC(xV,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{nT(this),0<this.B&&((this.L=PV(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rt(this.ua,this)):this.A=Nm(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){lC(this,o)}};function PV(t){return So&&typeof t.timeout=="number"&&t.ontimeout!==void 0}A.ua=function(){typeof Im<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ye(this,"timeout"),this.abort(8))};function lC(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,eT(t),cd(t)}function eT(t){t.F||(t.F=!0,Ye(t,"complete"),Ye(t,"error"))}A.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ye(this,"complete"),Ye(this,"abort"),cd(this))};A.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cd(this,!0)),Te.$.N.call(this)};A.La=function(){this.s||(this.G||this.v||this.l?tT(this):this.kb())};A.kb=function(){tT(this)};function tT(t){if(t.h&&typeof Im<"u"&&(!t.C[1]||gn(t)!=4||t.da()!=2)){if(t.v&&gn(t)==4)Nm(t.La,0,t);else if(Ye(t,"readystatechange"),gn(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(zC)[1]||null;!i&&z.self&&z.self.location&&(i=z.self.location.protocol.slice(0,-1)),r=!MV.test(i?i.toLowerCase():"")}n=r}if(n)Ye(t,"complete"),Ye(t,"success");else{t.m=6;try{var o=2<gn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",eT(t)}}finally{cd(t)}}}}function cd(t,e){if(t.g){nT(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ye(t,"ready");try{n.onreadystatechange=r}catch{}}}function nT(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(z.clearTimeout(t.A),t.A=null)}A.isActive=function(){return!!this.g};function gn(t){return t.g?t.g.readyState:0}A.da=function(){try{return 2<gn(this)?this.g.status:-1}catch{return-1}};A.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};A.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),SV(e)}};function dC(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case JC:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function RV(t){let e={};t=(t.g&&2<=gn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ma(t[r]))continue;var n=iV(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}eV(e,function(r){return r.join(", ")})}A.Ia=function(){return this.m};A.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function rT(t){let e="";return Tm(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function jm(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=rT(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ge(t,e,n))}function Ca(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function iT(t){this.Ga=0,this.j=[],this.l=new nd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ca("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ca("baseRetryDelayMs",5e3,t),this.hb=Ca("retryDelaySeedMs",1e4,t),this.eb=Ca("forwardChannelMaxRetries",2,t),this.xa=Ca("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new WC(t&&t.concurrentRequestLimit),this.Ja=new TV,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}A=iT.prototype;A.ra=8;A.H=1;function Um(t){if(oT(t),t.H==3){var e=t.W++,n=Un(t.I);if(ge(n,"SID",t.K),ge(n,"RID",e),ge(n,"TYPE","terminate"),Ha(t,n),e=new Ba(t,t.l,e),e.L=2,e.A=ad(Un(n)),n=!1,z.navigator&&z.navigator.sendBeacon)try{n=z.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&z.Image&&(new Image().src=e.A,n=!0),n||(e.g=fT(e.l,null),e.g.ha(e.A)),e.G=Date.now(),$a(e)}dT(t)}function ld(t){t.g&&($m(t),t.g.cancel(),t.g=null)}function oT(t){ld(t),t.u&&(z.clearTimeout(t.u),t.u=null),Wl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&z.clearTimeout(t.m),t.m=null)}function dd(t){if(!KC(t.i)&&!t.m){t.m=!0;var e=t.Na;Pa||AC(),Ra||(Pa(),Ra=!0),Pm.add(e,t),t.C=0}}function NV(t,e){return QC(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ja(rt(t.Na,t,e),lT(t,t.C)),t.C++,!0)}A.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new Ba(this,this.l,t),o=this.s;if(this.U&&(o?(o=_C(o),wC(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=sT(this,i,e),n=Un(this.I),ge(n,"RID",t),ge(n,"CVER",22),this.F&&ge(n,"X-HTTP-Session-Id",this.F),Ha(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(rT(o)))+"&"+e:this.o&&jm(n,this.o,o)),Vm(this.i,i),this.bb&&ge(n,"TYPE","init"),this.P?(ge(n,"$req",e),ge(n,"SID","null"),i.aa=!0,ym(i,n,null)):ym(i,n,e),this.H=2}}else this.H==3&&(t?hC(this,t):this.j.length==0||KC(this.i)||hC(this))};function hC(t,e){var n;e?n=e.m:n=t.W++;let r=Un(t.I);ge(r,"SID",t.K),ge(r,"RID",n),ge(r,"AID",t.V),Ha(t,r),t.o&&t.s&&jm(r,t.o,t.s),n=new Ba(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=sT(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Vm(t.i,n),ym(n,r,e)}function Ha(t,e){t.na&&Tm(t.na,function(n,r){ge(e,r,n)}),t.h&&$C({},function(n,r){ge(e,r,n)})}function sT(t,e,n){n=Math.min(t.j.length,n);var r=t.h?rt(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let c=i[u].g,l=i[u].map;if(c-=o,0>c)o=Math.max(0,i[u].g-100),a=!1;else try{bV(l,s,"req"+c+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function aT(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Pa||AC(),Ra||(Pa(),Ra=!0),Pm.add(e,t),t.A=0}}function Bm(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ja(rt(t.Ma,t),lT(t,t.A)),t.A++,!0)}A.Ma=function(){if(this.u=null,uT(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ja(rt(this.jb,this),t)}};A.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,lt(10),ld(this),uT(this))};function $m(t){t.B!=null&&(z.clearTimeout(t.B),t.B=null)}function uT(t){t.g=new Ba(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Un(t.wa);ge(e,"RID","rpc"),ge(e,"SID",t.K),ge(e,"AID",t.V),ge(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ge(e,"TO",t.qa),ge(e,"TYPE","xmlhttp"),Ha(t,e),t.o&&t.s&&jm(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=ad(Un(e)),n.u=null,n.S=!0,LC(n,t)}A.ib=function(){this.v!=null&&(this.v=null,ld(this),Bm(this),lt(19))};function Wl(t){t.v!=null&&(z.clearTimeout(t.v),t.v=null)}function cT(t,e){var n=null;if(t.g==e){Wl(t),$m(t),t.g=null;var r=2}else if(_m(t.i,e))n=e.F,YC(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=rd(),Ye(r,new NC(r,n)),dd(t)}else aT(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&NV(t,e)||r==2&&Bm(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ui(t,5);break;case 4:ui(t,10);break;case 3:ui(t,6);break;default:ui(t,2)}}}function lT(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ui(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=rt(t.pb,t);n||(n=new ci("//www.google.com/images/cleardot.gif"),z.location&&z.location.protocol=="http"||Hl(n,"https"),ad(n)),AV(n.toString(),r)}else lt(2);t.H=0,t.h&&t.h.za(e),dT(t),oT(t)}A.pb=function(t){t?(this.l.info("Successfully pinged google.com"),lt(2)):(this.l.info("Failed to ping google.com"),lt(1))};function dT(t){if(t.H=0,t.ma=[],t.h){let e=ZC(t.i);(e.length!=0||t.j.length!=0)&&(rC(t.ma,e),rC(t.ma,t.j),t.i.i.length=0,Dm(t.j),t.j.length=0),t.h.ya()}}function hT(t,e,n){var r=n instanceof ci?Un(n):new ci(n);if(r.g!="")e&&(r.g=e+"."+r.g),Gl(r,r.m);else{var i=z.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new ci(null);r&&Hl(o,r),e&&(o.g=e),i&&Gl(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&ge(r,n,e),ge(r,"VER",t.ra),Ha(t,r),r}function fT(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Te(new za({ob:n})):new Te(t.va),e.Oa(t.J),e}A.isActive=function(){return!!this.h&&this.h.isActive(this)};function pT(){}A=pT.prototype;A.Ba=function(){};A.Aa=function(){};A.za=function(){};A.ya=function(){};A.isActive=function(){return!0};A.Va=function(){};function Kl(){if(So&&!(10<=Number(YF)))throw Error("Environmental error: no available transport.")}Kl.prototype.g=function(t,e){return new Dt(t,e)};function Dt(t,e){ze.call(this),this.g=new iT(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ma(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ma(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new xo(this)}qe(Dt,ze);Dt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;lt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=hT(t,null,t.Y),dd(t)};Dt.prototype.close=function(){Um(this.g)};Dt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=xm(t),t=n);e.j.push(new IV(e.fb++,t)),e.H==3&&dd(e)};Dt.prototype.N=function(){this.g.h=null,delete this.j,Um(this.g),delete this.g,Dt.$.N.call(this)};function gT(t){km.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}qe(gT,km);function mT(){Fm.call(this),this.status=1}qe(mT,Fm);function xo(t){this.g=t}qe(xo,pT);xo.prototype.Ba=function(){Ye(this.g,"a")};xo.prototype.Aa=function(t){Ye(this.g,new gT(t))};xo.prototype.za=function(t){Ye(this.g,new mT)};xo.prototype.ya=function(){Ye(this.g,"b")};function OV(){this.blockSize=-1}function Qt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}qe(Qt,OV);Qt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function om(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}Qt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)om(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){om(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){om(this,r),i=0;break}}this.h=i,this.i+=e};Qt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ae(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var kV={};function zm(t){return-128<=t&&128>t?WF(t,function(e){return new ae([e|0],0>e?-1:0)}):new ae([t|0],0>t?-1:0)}function mn(t){if(isNaN(t)||!isFinite(t))return Ao;if(0>t)return Qe(mn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=wm;return new ae(e,0)}function yT(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Qe(yT(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=mn(Math.pow(e,8)),r=Ao,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=mn(Math.pow(e,o)),r=r.R(o).add(mn(s))):(r=r.R(n),r=r.add(mn(s)))}return r}var wm=4294967296,Ao=zm(0),Em=zm(1),fC=zm(16777216);A=ae.prototype;A.ea=function(){if(Ft(this))return-Qe(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:wm+r)*e,e*=wm}return t};A.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(jn(this))return"0";if(Ft(this))return"-"+Qe(this).toString(t);for(var e=mn(Math.pow(t,6)),n=this,r="";;){var i=Yl(n,e).g;n=Ql(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,jn(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};A.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function jn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Ft(t){return t.h==-1}A.X=function(t){return t=Ql(this,t),Ft(t)?-1:jn(t)?0:1};function Qe(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ae(n,~t.h).add(Em)}A.abs=function(){return Ft(this)?Qe(this):this};A.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new ae(n,n[n.length-1]&-2147483648?-1:0)};function Ql(t,e){return t.add(Qe(e))}A.R=function(t){if(jn(this)||jn(t))return Ao;if(Ft(this))return Ft(t)?Qe(this).R(Qe(t)):Qe(Qe(this).R(t));if(Ft(t))return Qe(this.R(Qe(t)));if(0>this.X(fC)&&0>t.X(fC))return mn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=s*u,ql(n,2*r+2*i),n[2*r+2*i+1]+=o*u,ql(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,ql(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,ql(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ae(n,0)};function ql(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ta(t,e){this.g=t,this.h=e}function Yl(t,e){if(jn(e))throw Error("division by zero");if(jn(t))return new Ta(Ao,Ao);if(Ft(t))return e=Yl(Qe(t),e),new Ta(Qe(e.g),Qe(e.h));if(Ft(e))return e=Yl(t,Qe(e)),new Ta(Qe(e.g),e.h);if(30<t.g.length){if(Ft(t)||Ft(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Em,r=e;0>=r.X(t);)n=pC(n),r=pC(r);var i=To(n,1),o=To(r,1);for(r=To(r,2),n=To(n,2);!jn(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=To(r,1),n=To(n,1)}return e=Ql(t,i.R(e)),new Ta(i,e)}for(i=Ao;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=mn(n),s=o.R(e);Ft(s)||0<s.X(t);)n-=r,o=mn(n),s=o.R(e);jn(o)&&(o=Em),i=i.add(o),t=Ql(t,s)}return new Ta(i,t)}A.gb=function(t){return Yl(this,t).h};A.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ae(n,this.h&t.h)};A.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ae(n,this.h|t.h)};A.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ae(n,this.h^t.h)};function pC(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ae(n,t.h)}function To(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new ae(i,t.h)}Kl.prototype.createWebChannel=Kl.prototype.g;Dt.prototype.send=Dt.prototype.u;Dt.prototype.open=Dt.prototype.m;Dt.prototype.close=Dt.prototype.close;id.NO_ERROR=0;id.TIMEOUT=8;id.HTTP_ERROR=6;OC.COMPLETE="complete";kC.EventType=Ua;Ua.OPEN="a";Ua.CLOSE="b";Ua.ERROR="c";Ua.MESSAGE="d";ze.prototype.listen=ze.prototype.O;Te.prototype.listenOnce=Te.prototype.P;Te.prototype.getLastError=Te.prototype.Sa;Te.prototype.getLastErrorCode=Te.prototype.Ia;Te.prototype.getStatus=Te.prototype.da;Te.prototype.getResponseJson=Te.prototype.Wa;Te.prototype.getResponseText=Te.prototype.ja;Te.prototype.send=Te.prototype.ha;Te.prototype.setWithCredentials=Te.prototype.Oa;Qt.prototype.digest=Qt.prototype.l;Qt.prototype.reset=Qt.prototype.reset;Qt.prototype.update=Qt.prototype.j;ae.prototype.add=ae.prototype.add;ae.prototype.multiply=ae.prototype.R;ae.prototype.modulo=ae.prototype.gb;ae.prototype.compare=ae.prototype.X;ae.prototype.toNumber=ae.prototype.ea;ae.prototype.toString=ae.prototype.toString;ae.prototype.getBits=ae.prototype.D;ae.fromNumber=mn;ae.fromString=yT;var vT=Yt.createWebChannelTransport=function(){return new Kl},_T=Yt.getStatEventTarget=function(){return rd()},hd=Yt.ErrorCode=id,wT=Yt.EventType=OC,ET=Yt.Event=li,qm=Yt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},mG=Yt.FetchXmlHttpFactory=za,Ga=Yt.WebChannel=kC,IT=Yt.XhrIo=Te,DT=Yt.Md5=Qt,di=Yt.Integer=ae;var CT="@firebase/firestore";var Fe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Fe.UNAUTHENTICATED=new Fe(null),Fe.GOOGLE_CREDENTIALS=new Fe("google-credentials-uid"),Fe.FIRST_PARTY=new Fe("first-party-uid"),Fe.MOCK_USER=new Fe("mock-user");var ss="10.8.0";var Ir=new Vu("@firebase/firestore");function ko(){return Ir.logLevel}function Db(t){Ir.setLogLevel(t)}function E(t,...e){if(Ir.logLevel<=tn.DEBUG){let n=e.map(Gv);Ir.debug(`Firestore (${ss}): ${t}`,...n)}}function xe(t,...e){if(Ir.logLevel<=tn.ERROR){let n=e.map(Gv);Ir.error(`Firestore (${ss}): ${t}`,...n)}}function Lt(t,...e){if(Ir.logLevel<=tn.WARN){let n=e.map(Gv);Ir.warn(`Firestore (${ss}): ${t}`,...n)}}function Gv(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function x(t="Unexpected state"){let e=`FIRESTORE (${ss}) INTERNAL ASSERTION FAILED: `+t;throw xe(e),new Error(e)}function k(t,e){t||x()}function Cb(t,e){t||x()}function S(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=class extends W_{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ve=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Dd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Qm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Fe.UNAUTHENTICATED))}shutdown(){}},Ym=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Zm=class{constructor(e){this.t=e,this.currentUser=Fe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Ve;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ve,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>y(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{E("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ve)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(k(typeof r.accessToken=="string"),new Dd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return k(e===null||typeof e=="string"),new Fe(e)}},Xm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Fe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Jm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Xm(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Fe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ey=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ty=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&E("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,E("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{E("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(k(typeof n.token=="string"),this.R=n.token,new ey(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function FV(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Cd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=FV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function H(t,e){return t<e?-1:t>e?1:0}function qo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Tb(t){return t+"\0"}var Ie=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new w(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new w(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new w(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?H(this.nanoseconds,e.nanoseconds):H(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var V=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ie(0,0))}static max(){return new t(new Ie(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Td=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&x(),r===void 0?r=e.length-n:r>e.length-n&&x(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ne=class t extends Td{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new w(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},VV=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pe=class t extends Td{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return VV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new w(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new w(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new w(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new w(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var b=class t{constructor(e){this.path=e}static fromPath(e){return new t(ne.fromString(e))}static fromName(e){return new t(ne.fromString(e).popFirst(5))}static empty(){return new t(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ne(e.slice()))}};var Ho=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function ny(t){return t.fields.find(e=>e.kind===2)}function fi(t){return t.fields.filter(e=>e.kind!==2)}Ho.UNKNOWN_ID=-1;var Bo=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var iu=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,jt.min())}};function bb(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=V.fromTimestamp(r===1e9?new Ie(n+1,0):new Ie(n,r));return new jt(i,b.empty(),e)}function Ab(t){return new jt(t.readTime,t.key,-1)}var jt=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(V.min(),b.empty(),-1)}static max(){return new t(V.max(),b.empty(),-1)}};function Wv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=b.comparator(t.documentKey,e.documentKey),n!==0?n:H(t.largestBatchId,e.largestBatchId))}var Sb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",bd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Rr(t){return y(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==Sb)throw t;E("LocalStore","Unexpectedly lost primary lease")})}var p=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&x(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let c=u;n(e[c]).next(l=>{s[c]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var Ad=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Ve,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new _i(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Kv(r.target.error);this.V.reject(new _i(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new _i(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(E("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new iy(n)}},zn=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(ms())===12.2&&xe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return E("SimpleDb","Removing database:",e),pi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Fu())return!1;if(t.C())return!0;let e=ms(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return y(this,null,function*(){return this.db||(E("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new _i(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new w(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new w(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new _i(e,s))},i.onupgradeneeded=o=>{E("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{E("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return y(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=Ad.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),p.reject(c))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,c=u.name!=="FirebaseError"&&s<3;if(E("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}},ry=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return pi(this.k.delete())}},_i=class extends w{constructor(e,n){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Nr(t){return t.name==="IndexedDbTransactionError"}var iy=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(E("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(E("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pi(r)}add(e){return E("SimpleDb","ADD",this.store.name,e,e),pi(this.store.add(e))}get(e){return pi(this.store.get(e)).next(n=>(n===void 0&&(n=null),E("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return E("SimpleDb","DELETE",this.store.name,e),pi(this.store.delete(e))}count(){return E("SimpleDb","COUNT",this.store.name),pi(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new p((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.G(o,(a,u)=>{s.push(u)}).next(()=>s)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new p((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){E("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new p((r,i)=>{n.onerror=o=>{let s=Kv(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new p((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new ry(a),c=n(a.primaryKey,a.value,u);if(c instanceof p){let l=c.catch(d=>(u.done(),p.reject(d)));r.push(l)}u.isDone?i():u.$===null?a.continue():a.continue(u.$)}}).next(()=>p.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function pi(t){return new p((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Kv(r.target.error);n(i)}})}var TT=!1;function Kv(t){let e=zn.S(ms());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new w("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return TT||(TT=!0,setTimeout(()=>{throw r},0)),r}}return t}var oy=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){E("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>y(this,null,function*(){this.task=null;try{E("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){Nr(n)?E("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Rr(n)}yield this.ee(6e4)}))}},sy=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return y(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,o=!0;return p.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return E("IndexBackfiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(E("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=Ab(o);Wv(s,r)>0&&(r=s)}),new jt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Ct=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Au(t){return t==null}function ou(t){return t===0&&1/t==-1/0}function Mb(t){return typeof t=="number"&&Number.isInteger(t)&&!ou(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function dt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=bT(e)),e=LV(t.get(n),e);return bT(e)}function LV(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function bT(t){return t+""}function yn(t){let e=t.length;if(k(e>=2),e===2)return k(t.charAt(0)===""&&t.charAt(1)===""),ne.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&x(),t.charAt(s+1)){case"":let a=t.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:x()}o=s+2}return new ne(r)}var AT=["userId","batchId"];function yd(t,e){return[t,dt(e)]}function xb(t,e,n){return[t,dt(e),n]}var jV={},UV=["prefixPath","collectionGroup","readTime","documentId"],BV=["prefixPath","collectionGroup","documentId"],$V=["collectionGroup","readTime","prefixPath","documentId"],zV=["canonicalId","targetId"],qV=["targetId","path"],HV=["path","targetId"],GV=["collectionId","parent"],WV=["indexId","uid"],KV=["uid","sequenceNumber"],QV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],YV=["indexId","uid","orderedDocumentKey"],ZV=["userId","collectionPath","documentId"],XV=["userId","collectionPath","largestBatchId"],JV=["userId","collectionGroup","largestBatchId"],Pb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eL=[...Pb,"documentOverlays"],Rb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Nb=Rb,tL=[...Nb,"indexConfiguration","indexState","indexEntries"];var su=class extends bd{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function Ge(t,e){let n=S(t);return zn.M(n.ae,e)}function ST(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ob(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var me=class t{constructor(e,n){this.comparator=e,this.root=n||_n.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_n.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Uo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Uo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Uo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Uo(this.root,e,this.comparator,!0)}},Uo=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},_n=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw x();let e=this.left.check();if(e!==this.right.check())throw x();return e+(this.isRed()?0:1)}};_n.EMPTY=null,_n.RED=!0,_n.BLACK=!1;_n.EMPTY=new class{constructor(){this.size=0}get key(){throw x()}get value(){throw x()}get color(){throw x()}get left(){throw x()}get right(){throw x()}copy(e,n,r,i,o){return this}insert(e,n,r){return new _n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var de=class t{constructor(e){this.comparator=e,this.data=new me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sd(this.data.getIterator())}getIteratorFrom(e){return new Sd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Sd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Po(t){return t.hasNext()?t.getNext():void 0}var Tt=class t{constructor(e){this.fields=e,e.sort(Pe.comparator)}static empty(){return new t([])}unionWith(e){let n=new de(Pe.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Md=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function kb(){return typeof atob<"u"}var He=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Md("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return H(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};He.EMPTY_BYTE_STRING=new He("");var nL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(t){if(k(!!t),typeof t=="string"){let e=0,n=nL.exec(t);if(k(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cr(t){return typeof t=="string"?He.fromBase64String(t):He.fromUint8Array(t)}function _h(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Qv(t){let e=t.mapValue.fields.__previous_value__;return _h(e)?Qv(e):e}function au(t){let e=Dr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ie(e.seconds,e.nanos)}var ay=class{constructor(e,n,r,i,o,s,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}},Tr=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var wr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vd={nullValue:"NULL_VALUE"};function wi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_h(t)?4:Fb(t)?9007199254740991:10:x()}function In(t,e){if(t===e)return!0;let n=wi(t);if(n!==wi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return au(t).isEqual(au(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Dr(i.timestampValue),a=Dr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Cr(i.bytesValue).isEqual(Cr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return be(i.geoPointValue.latitude)===be(o.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return be(i.integerValue)===be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=be(i.doubleValue),a=be(o.doubleValue);return s===a?ou(s)===ou(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return qo(t.arrayValue.values||[],e.arrayValue.values||[],In);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(ST(s)!==ST(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!In(s[u],a[u])))return!1;return!0}(t,e);default:return x()}}function uu(t,e){return(t.values||[]).find(n=>In(n,e))!==void 0}function br(t,e){if(t===e)return 0;let n=wi(t),r=wi(e);if(n!==r)return H(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return H(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=be(o.integerValue||o.doubleValue),u=be(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return MT(t.timestampValue,e.timestampValue);case 4:return MT(au(t),au(e));case 5:return H(t.stringValue,e.stringValue);case 6:return function(o,s){let a=Cr(o),u=Cr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){let l=H(a[c],u[c]);if(l!==0)return l}return H(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=H(be(o.latitude),be(s.latitude));return a!==0?a:H(be(o.longitude),be(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],u=s.values||[];for(let c=0;c<a.length&&c<u.length;++c){let l=br(a[c],u[c]);if(l)return l}return H(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===wr.mapValue&&s===wr.mapValue)return 0;if(o===wr.mapValue)return 1;if(s===wr.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),c=s.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){let h=H(u[d],l[d]);if(h!==0)return h;let f=br(a[u[d]],c[l[d]]);if(f!==0)return f}return H(u.length,l.length)}(t.mapValue,e.mapValue);default:throw x()}}function MT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return H(t,e);let n=Dr(t),r=Dr(e),i=H(n.seconds,r.seconds);return i!==0?i:H(n.nanos,r.nanos)}function Go(t){return uy(t)}function uy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Dr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return b.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=uy(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${uy(n.fields[s])}`;return i+"}"}(t.mapValue):x()}function Ei(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cy(t){return!!t&&"integerValue"in t}function cu(t){return!!t&&"arrayValue"in t}function xT(t){return!!t&&"nullValue"in t}function PT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _d(t){return!!t&&"mapValue"in t}function Ja(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Pi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ja(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ja(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Fb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function rL(t){return"nullValue"in t?vd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ei(Tr.empty(),b.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:x()}function iL(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ei(Tr.empty(),b.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?wr:x()}function RT(t,e){let n=br(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function NT(t,e){let n=br(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var st=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_d(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ja(n)}setAll(e){let n=Pe.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Ja(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());_d(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return In(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];_d(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Pi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(Ja(this.value))}};function Vb(t){let e=[];return Pi(t.fields,(n,r)=>{let i=new Pe([n]);if(_d(r)){let o=Vb(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Tt(e)}var Le=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,V.min(),V.min(),V.min(),st.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,V.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,V.min(),V.min(),st.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,V.min(),V.min(),st.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(V.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=st.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=st.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=V.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Dn=class{constructor(e,n){this.position=e,this.inclusive=n}};function OT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=b.comparator(b.fromName(s.referenceValue),n.key):r=br(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function kT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!In(t.position[n],e.position[n]))return!1;return!0}var Ii=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function oL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var xd=class{},X=class t extends xd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hy(e,n,r):n==="array-contains"?new gy(e,r):n==="in"?new Pd(e,r):n==="not-in"?new my(e,r):n==="array-contains-any"?new yy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fy(e,r):new py(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(br(n,this.value)):n!==null&&wi(this.value)===wi(n)&&this.matchesComparison(br(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return x()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ue=class t extends xd{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return Wo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Wo(t){return t.op==="and"}function ly(t){return t.op==="or"}function Yv(t){return Lb(t)&&Wo(t)}function Lb(t){for(let e of t.filters)if(e instanceof ue)return!1;return!0}function dy(t){if(t instanceof X)return t.field.canonicalString()+t.op.toString()+Go(t.value);if(Yv(t))return t.filters.map(e=>dy(e)).join(",");{let e=t.filters.map(n=>dy(n)).join(",");return`${t.op}(${e})`}}function jb(t,e){return t instanceof X?function(r,i){return i instanceof X&&r.op===i.op&&r.field.isEqual(i.field)&&In(r.value,i.value)}(t,e):t instanceof ue?function(r,i){return i instanceof ue&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&jb(s,i.filters[a]),!0):!1}(t,e):void x()}function Ub(t,e){let n=t.filters.concat(e);return ue.create(n,t.op)}function Bb(t){return t instanceof X?function(n){return`${n.field.canonicalString()} ${n.op} ${Go(n.value)}`}(t):t instanceof ue?function(n){return n.op.toString()+" {"+n.getFilters().map(Bb).join(" ,")+"}"}(t):"Filter"}var hy=class extends X{constructor(e,n,r){super(e,n,r),this.key=b.fromName(r.referenceValue)}matches(e){let n=b.comparator(e.key,this.key);return this.matchesComparison(n)}},fy=class extends X{constructor(e,n){super(e,"in",n),this.keys=$b("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},py=class extends X{constructor(e,n){super(e,"not-in",n),this.keys=$b("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function $b(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>b.fromName(r.referenceValue))}var gy=class extends X{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return cu(n)&&uu(n.arrayValue,this.value)}},Pd=class extends X{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&uu(this.value.arrayValue,n)}},my=class extends X{constructor(e,n){super(e,"not-in",n)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!uu(this.value.arrayValue,n)}},yy=class extends X{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!cu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>uu(this.value.arrayValue,r))}};var vy=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function _y(t,e=null,n=[],r=[],i=null,o=null,s=null){return new vy(t,e,n,r,i,o,s)}function Di(t){let e=S(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>dy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Au(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Go(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Go(r)).join(",")),e.ce=n}return e.ce}function Su(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kT(t.startAt,e.startAt)&&kT(t.endAt,e.endAt)}function Rd(t){return b.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Nd(t,e){return t.filters.filter(n=>n instanceof X&&n.field.isEqual(e))}function FT(t,e,n){let r=vd,i=!0;for(let o of Nd(t,e)){let s=vd,a=!0;switch(o.op){case"<":case"<=":s=rL(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=vd}RT({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];RT({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function VT(t,e,n){let r=wr,i=!0;for(let o of Nd(t,e)){let s=wr,a=!0;switch(o.op){case">=":case">":s=iL(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=wr}NT({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];NT({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var Zt=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function zb(t,e,n,r,i,o,s,a){return new Zt(t,e,n,r,i,o,s,a)}function as(t){return new Zt(t)}function LT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Zv(t){return t.collectionGroup!==null}function $o(t){let e=S(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new de(Pe.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new Ii(o,r))}),n.has(Pe.keyField().canonicalString())||e.le.push(new Ii(Pe.keyField(),r))}return e.le}function ht(t){let e=S(t);return e.he||(e.he=sL(e,$o(t))),e.he}function sL(t,e){if(t.limitType==="F")return _y(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Ii(i.field,o)});let n=t.endAt?new Dn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Dn(t.startAt.position,t.startAt.inclusive):null;return _y(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function wy(t,e){let n=t.filters.concat([e]);return new Zt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Od(t,e,n){return new Zt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mu(t,e){return Su(ht(t),ht(e))&&t.limitType===e.limitType}function qb(t){return`${Di(ht(t))}|lt:${t.limitType}`}function Fo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Bb(i)).join(", ")}]`),Au(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Go(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Go(i)).join(",")),`Target(${r})`}(ht(t))}; limitType=${t.limitType})`}function xu(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):b.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of $o(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let c=OT(s,a,u);return s.inclusive?c<=0:c<0}(r.startAt,$o(r),i)||r.endAt&&!function(s,a,u){let c=OT(s,a,u);return s.inclusive?c>=0:c>0}(r.endAt,$o(r),i))}(t,e)}function Hb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Gb(t){return(e,n)=>{let r=!1;for(let i of $o(t)){let o=aL(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function aL(t,e,n){let r=t.field.isKeyField()?b.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),c=a.data.field(o);return u!==null&&c!==null?br(u,c):x()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return x()}}var Cn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Ob(this.inner)}size(){return this.innerSize}};var uL=new me(b.comparator);function vt(){return uL}var Wb=new me(b.comparator);function Za(...t){let e=Wb;for(let n of t)e=e.insert(n.key,n);return e}function Kb(t){let e=Wb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function vn(){return eu()}function Qb(){return eu()}function eu(){return new Cn(t=>t.toString(),(t,e)=>t.isEqual(e))}var cL=new me(b.comparator),lL=new de(b.comparator);function G(...t){let e=lL;for(let n of t)e=e.add(n);return e}var dL=new de(H);function Xv(){return dL}function Yb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ou(e)?"-0":e}}function Zb(t){return{integerValue:""+t}}function Xb(t,e){return Mb(e)?Zb(e):Yb(t,e)}var Ko=class{constructor(){this._=void 0}};function hL(t,e,n){return t instanceof Ar?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&_h(o)&&(o=Qv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof qn?eA(t,e):t instanceof Hn?tA(t,e):function(i,o){let s=Jb(i,o),a=jT(s)+jT(i.Ie);return cy(s)&&cy(i.Ie)?Zb(a):Yb(i.serializer,a)}(t,e)}function fL(t,e,n){return t instanceof qn?eA(t,e):t instanceof Hn?tA(t,e):n}function Jb(t,e){return t instanceof Sr?function(r){return cy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ar=class extends Ko{},qn=class extends Ko{constructor(e){super(),this.elements=e}};function eA(t,e){let n=nA(e);for(let r of t.elements)n.some(i=>In(i,r))||n.push(r);return{arrayValue:{values:n}}}var Hn=class extends Ko{constructor(e){super(),this.elements=e}};function tA(t,e){let n=nA(e);for(let r of t.elements)n=n.filter(i=>!In(i,r));return{arrayValue:{values:n}}}var Sr=class extends Ko{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function jT(t){return be(t.integerValue||t.doubleValue)}function nA(t){return cu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ci=class{constructor(e,n){this.field=e,this.transform=n}};function pL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof qn&&i instanceof qn||r instanceof Hn&&i instanceof Hn?qo(r.elements,i.elements,In):r instanceof Sr&&i instanceof Sr?In(r.Ie,i.Ie):r instanceof Ar&&i instanceof Ar}(t.transform,e.transform)}var Ey=class{constructor(e,n){this.version=e,this.transformResults=n}},Ae=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function wd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Qo=class{};function rA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xr(t.key,Ae.none()):new Mr(t.key,t.data,Ae.none());{let n=t.data,r=st.empty(),i=new de(Pe.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Xt(t.key,r,new Tt(i.toArray()),Ae.none())}}function gL(t,e,n){t instanceof Mr?function(i,o,s){let a=i.value.clone(),u=BT(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Xt?function(i,o,s){if(!wd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=BT(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(iA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function tu(t,e,n,r){return t instanceof Mr?function(o,s,a,u){if(!wd(o.precondition,s))return a;let c=o.value.clone(),l=$T(o.fieldTransforms,u,s);return c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xt?function(o,s,a,u){if(!wd(o.precondition,s))return a;let c=$T(o.fieldTransforms,u,s),l=s.data;return l.setAll(iA(o)),l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return wd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function mL(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=Jb(r.transform,i||null);o!=null&&(n===null&&(n=st.empty()),n.set(r.field,o))}return n||null}function UT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qo(r,i,(o,s)=>pL(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Mr=class extends Qo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Xt=class extends Qo{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function iA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function BT(t,e,n){let r=new Map;k(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,fL(s,a,n[i]))}return r}function $T(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,hL(o,s,e))}return r}var xr=class extends Qo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},lu=class extends Qo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var du=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&gL(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=tu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=tu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=Qb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=rA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(V.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),G())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,(n,r)=>UT(n,r))&&qo(this.baseMutations,e.baseMutations,(n,r)=>UT(n,r))}},Iy=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){k(e.mutations.length===r.length);let i=function(){return cL}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var hu=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Dy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Oe,te;function oA(t){switch(t){default:return x();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function sA(t){if(t===void 0)return xe("GRPC error has no .code"),g.UNKNOWN;switch(t){case Oe.OK:return g.OK;case Oe.CANCELLED:return g.CANCELLED;case Oe.UNKNOWN:return g.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return g.INTERNAL;case Oe.UNAVAILABLE:return g.UNAVAILABLE;case Oe.UNAUTHENTICATED:return g.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case Oe.NOT_FOUND:return g.NOT_FOUND;case Oe.ALREADY_EXISTS:return g.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return g.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case Oe.ABORTED:return g.ABORTED;case Oe.OUT_OF_RANGE:return g.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return g.UNIMPLEMENTED;case Oe.DATA_LOSS:return g.DATA_LOSS;default:return x()}}(te=Oe||(Oe={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";var zT=null;function aA(){return new TextEncoder}var yL=new di([4294967295,4294967295],0);function qT(t){let e=aA().encode(t),n=new DT;return n.update(e),new Uint8Array(n.digest())}function HT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new di([n,r],0),new di([i,o],0)]}var Cy=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new vi(`Invalid padding: ${n}`);if(r<0)throw new vi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new vi(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=di.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(di.fromNumber(r)));return i.compare(yL)===1&&(i=new di([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=qT(e),[r,i]=HT(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=qT(e),[r,i]=HT(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},vi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var fu=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(V.min(),i,new me(H),vt(),G())}},pu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,G(),G(),G())}};var zo=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},kd=class{constructor(e,n){this.targetId=e,this.fe=n}},Fd=class{constructor(e,n,r=He.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Vd=class{constructor(){this.ge=0,this.pe=WT(),this.ye=He.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=G(),n=G(),r=G();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:x()}}),new pu(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=WT()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,k(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},Ty=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=vt(),this.Qe=GT(),this.Ke=new me(H)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:x()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(Rd(o))if(r===0){let s=new b(o.path);this.We(n,s,Le.newNoDocument(s,V.min()))}else k(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),u=a?this.et(a,e,s):1;if(u!==0){this.He(n);let c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}zT?.tt(function(l,d,h,f,_){var v,m,I,P,T,R;let j={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},q=d.unchangedNames;return q&&(j.bloomFilter={applied:_===0,hashCount:(v=q?.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(P=(I=(m=q?.bits)===null||m===void 0?void 0:m.bitmap)===null||I===void 0?void 0:I.length)!==null&&P!==void 0?P:0,padding:(R=(T=q?.bits)===null||T===void 0?void 0:T.padding)!==null&&R!==void 0?R:0,mightContain:he=>{var bt;return(bt=f?.mightContain(he))!==null&&bt!==void 0&&bt}}),j}(s,e.fe,this.Le.nt(),a,u))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Cr(r).toUint8Array()}catch(u){if(u instanceof Md)return Lt("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Cy(s,i,o)}catch(u){return Lt(u instanceof vi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&Rd(a.target)){let u=new b(a.target.path);this.qe.get(u)!==null||this.st(s,u)||this.We(s,u,Le.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=G();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let c=this.Ye(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new fu(e,n,this.Ke,this.qe,r);return this.qe=vt(),this.Qe=GT(),this.Ke=new me(H),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Vd,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new de(H),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||E("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Vd),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function GT(){return new me(b.comparator)}function WT(){return new me(b.comparator)}var vL={asc:"ASCENDING",desc:"DESCENDING"},_L={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wL={and:"AND",or:"OR"},by=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Ay(t,e){return t.useProto3Json||Au(e)?e:{value:e}}function Yo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function EL(t,e){return Yo(t,e.toTimestamp())}function Re(t){return k(!!t),V.fromTimestamp(function(n){let r=Dr(n);return new Ie(r.seconds,r.nanos)}(t))}function Jv(t,e){return Sy(t,e).canonicalString()}function Sy(t,e){let n=function(i){return new ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function cA(t){let e=ne.fromString(t);return k(_A(e)),e}function gu(t,e){return Jv(t.databaseId,e.path)}function wn(t,e){let n=cA(e);if(n.get(1)!==t.databaseId.projectId)throw new w(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new w(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new b(hA(n))}function lA(t,e){return Jv(t.databaseId,e)}function dA(t){let e=cA(t);return e.length===4?ne.emptyPath():hA(e)}function My(t){return new ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hA(t){return k(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function KT(t,e,n){return{name:gu(t,e),fields:n.value.mapValue.fields}}function fA(t,e,n){let r=wn(t,e.name),i=Re(e.updateTime),o=e.createTime?Re(e.createTime):V.min(),s=new st({mapValue:{fields:e.fields}}),a=Le.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function IL(t,e){return"found"in e?function(r,i){k(!!i.found),i.found.name,i.found.updateTime;let o=wn(r,i.found.name),s=Re(i.found.updateTime),a=i.found.createTime?Re(i.found.createTime):V.min(),u=new st({mapValue:{fields:i.found.fields}});return Le.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){k(!!i.missing),k(!!i.readTime);let o=wn(r,i.missing),s=Re(i.readTime);return Le.newNoDocument(o,s)}(t,e):x()}function DL(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:x()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,l){return c.useProto3Json?(k(l===void 0||typeof l=="string"),He.fromBase64String(l||"")):(k(l===void 0||l instanceof Uint8Array),He.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){let l=c.code===void 0?g.UNKNOWN:sA(c.code);return new w(l,c.message||"")}(s);n=new Fd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=wn(t,r.document.name),o=Re(r.document.updateTime),s=r.document.createTime?Re(r.document.createTime):V.min(),a=new st({mapValue:{fields:r.document.fields}}),u=Le.newFoundDocument(i,o,s,a),c=r.targetIds||[],l=r.removedTargetIds||[];n=new zo(c,l,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=wn(t,r.document),o=r.readTime?Re(r.readTime):V.min(),s=Le.newNoDocument(i,o),a=r.removedTargetIds||[];n=new zo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=wn(t,r.document),o=r.removedTargetIds||[];n=new zo([],o,i,null)}else{if(!("filter"in e))return x();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Dy(i,o),a=r.targetId;n=new kd(a,s)}}return n}function mu(t,e){let n;if(e instanceof Mr)n={update:KT(t,e.key,e.value)};else if(e instanceof xr)n={delete:gu(t,e.key)};else if(e instanceof Xt)n={update:KT(t,e.key,e.data),updateMask:ML(e.fieldMask)};else{if(!(e instanceof lu))return x();n={verify:gu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ar)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Sr)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw x()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:EL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:x()}(t,e.precondition)),n}function xy(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Ae.updateTime(Re(o.updateTime)):o.exists!==void 0?Ae.exists(o.exists):Ae.none()}(e.currentDocument):Ae.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)k(a.setToServerValue==="REQUEST_TIME"),u=new Ar;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];u=new qn(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];u=new Hn(l)}else"increment"in a?u=new Sr(s,a.increment):x();let c=Pe.fromServerFormat(a.fieldPath);return new Ci(c,u)}(t,i)):[];if(e.update){e.update.name;let i=wn(t,e.update.name),o=new st({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let c=u.fieldPaths||[];return new Tt(c.map(l=>Pe.fromServerFormat(l)))}(e.updateMask);return new Xt(i,o,s,n,r)}return new Mr(i,o,n,r)}if(e.delete){let i=wn(t,e.delete);return new xr(i,n)}if(e.verify){let i=wn(t,e.verify);return new lu(i,n)}return x()}function CL(t,e){return t&&t.length>0?(k(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Re(i.updateTime):Re(o);return s.isEqual(V.min())&&(s=Re(o)),new Ey(s,i.transformResults||[])}(n,e))):[]}function pA(t,e){return{documents:[lA(t,e.path)]}}function gA(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lA(t,i);let o=function(c){if(c.length!==0)return vA(ue.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(c){if(c.length!==0)return c.map(l=>function(h){return{field:Vo(h.field),direction:bL(h.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=Ay(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function mA(t){let e=dA(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){k(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];n.where&&(o=function(d){let h=yA(d);return h instanceof ue&&Yv(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(_){return new Ii(Lo(_.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Au(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(d){let h=!!d.before,f=d.values||[];return new Dn(f,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){let h=!d.before,f=d.values||[];return new Dn(f,h)}(n.endAt)),zb(e,i,s,o,a,"F",u,c)}function TL(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return x()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Lo(n.unaryFilter.field);return X.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Lo(n.unaryFilter.field);return X.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Lo(n.unaryFilter.field);return X.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Lo(n.unaryFilter.field);return X.create(s,"!=",{nullValue:"NULL_VALUE"});default:return x()}}(t):t.fieldFilter!==void 0?function(n){return X.create(Lo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return x()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ue.create(n.compositeFilter.filters.map(r=>yA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return x()}}(n.compositeFilter.op))}(t):x()}function bL(t){return vL[t]}function AL(t){return _L[t]}function SL(t){return wL[t]}function Vo(t){return{fieldPath:t.canonicalString()}}function Lo(t){return Pe.fromServerFormat(t.fieldPath)}function vA(t){return t instanceof X?function(n){if(n.op==="=="){if(PT(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NAN"}};if(xT(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(PT(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NAN"}};if(xT(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(n.field),op:AL(n.op),value:n.value}}}(t):t instanceof ue?function(n){let r=n.getFilters().map(i=>vA(i));return r.length===1?r[0]:{compositeFilter:{op:SL(n.op),filters:r}}}(t):x()}function ML(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _A(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Zo=class t{constructor(e,n,r,i,o=V.min(),s=V.min(),a=He.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ld=class{constructor(e){this.ct=e}};function xL(t,e){let n;if(e.document)n=fA(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=b.fromSegments(e.noDocument.path),i=bi(e.noDocument.readTime);n=Le.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return x();{let r=b.fromSegments(e.unknownDocument.path),i=bi(e.unknownDocument.version);n=Le.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new Ie(i[0],i[1]);return V.fromTimestamp(o)}(e.readTime)),n}function QT(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:jd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:gu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Yo(o,s.version.toTimestamp()),createTime:Yo(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ti(e.version)};else{if(!e.isUnknownDocument())return x();r.unknownDocument={path:n.path.toArray(),version:Ti(e.version)}}return r}function jd(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ti(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bi(t){let e=new Ie(t.seconds,t.nanoseconds);return V.fromTimestamp(e)}function gi(t,e){let n=(e.baseMutations||[]).map(o=>xy(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>xy(t.ct,o)),i=Ie.fromMillis(e.localWriteTimeMs);return new du(e.batchId,i,n,r)}function Xa(t){let e=bi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?bi(t.lastLimboFreeSnapshotVersion):V.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return k(o.documents.length===1),ht(as(dA(o.documents[0])))}(t.query):function(o){return ht(mA(o))}(t.query),new Zo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,He.fromBase64String(t.resumeToken))}function wA(t,e){let n=Ti(e.snapshotVersion),r=Ti(e.lastLimboFreeSnapshotVersion),i;i=Rd(e.target)?pA(t.ct,e.target):gA(t.ct,e.target).ut;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Di(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function e_(t){let e=mA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Od(e,e.limit,"L"):e}function Hm(t,e){return new hu(e.largestBatchId,xy(t.ct,e.overlayMutation))}function YT(t,e){let n=e.path.lastSegment();return[t,dt(e.path.popLast()),n]}function ZT(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ti(r.readTime),documentKey:dt(r.documentKey.path),largestBatchId:r.largestBatchId}}var Py=class{getBundleMetadata(e,n){return XT(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:bi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return XT(e).put(function(i){return{bundleId:i.id,createTime:Ti(Re(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return JT(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:e_(o.bundledQuery),readTime:bi(o.readTime)}}(r)})}saveNamedQuery(e,n){return JT(e).put(function(i){return{name:i.name,readTime:Ti(Re(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function XT(t){return Ge(t,"bundles")}function JT(t){return Ge(t,"namedQueries")}var Ud=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Wa(e).get(YT(this.userId,n)).next(r=>r?Hm(this.serializer,r):null)}getOverlays(e,n){let r=vn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new hu(n,s);i.push(this.ht(e,a))}),p.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(dt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Wa(e).H("collectionPathOverlayIndex",a))}),p.waitFor(o)}getOverlaysForCollection(e,n,r){let i=vn(),o=dt(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Wa(e).W("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let c=Hm(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=vn(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Wa(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,c,l)=>{let d=Hm(this.serializer,c);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):l.done()}).next(()=>o)}ht(e,n){return Wa(e).put(function(i,o,s){let[a,u,c]=YT(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:mu(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Wa(t){return Ge(t,"documentOverlays")}var Bn=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),ou(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Cr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?Fb(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):x()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),b.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Bn.bt=new Bn;function PL(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function eb(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=PL(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var Ry=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){let n=this.Lt(e),r=eb(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Lt(e),r=eb(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Ny=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}},Oy=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},mi=class{constructor(){this.Gt=new Ry,this.zt=new Ny(this.Gt),this.jt=new Oy(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var yi=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function mr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=tb(t.arrayValue,e.arrayValue),n!==0?n:(n=tb(t.directionalValue,e.directionalValue),n!==0?n:b.comparator(t.documentKey,e.documentKey)))}function tb(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var Bd=class{constructor(e){this.Yt=new de((n,r)=>Pe.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(k(e.collectionGroup===this.collectionId),this.en)return!1;let n=ny(e);if(n!==void 0&&!this.nn(n))return!1;let r=fi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.rn(a,u)||!this.sn(this.Zt[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new de(Pe.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Bo(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Bo(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Bo(r.field,r.dir==="asc"?0:1)));return new Ho(Ho.UNKNOWN_ID,this.collectionId,n,iu.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function EA(t){var e,n;if(k(t instanceof X||t instanceof ue),t instanceof X){if(t instanceof Pd){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>X.create(t.field,"==",o)))||[];return ue.create(i,"or")}return t}let r=t.filters.map(i=>EA(i));return ue.create(r,t.op)}function RL(t){if(t.getFilters().length===0)return[];let e=Vy(EA(t));return k(IA(e)),ky(e)||Fy(e)?[e]:e.getFilters()}function ky(t){return t instanceof X}function Fy(t){return t instanceof ue&&Yv(t)}function IA(t){return ky(t)||Fy(t)||function(n){if(n instanceof ue&&ly(n)){for(let r of n.getFilters())if(!ky(r)&&!Fy(r))return!1;return!0}return!1}(t)}function Vy(t){if(k(t instanceof X||t instanceof ue),t instanceof X)return t;if(t.filters.length===1)return Vy(t.filters[0]);let e=t.filters.map(r=>Vy(r)),n=ue.create(e,t.op);return n=$d(n),IA(n)?n:(k(n instanceof ue),k(Wo(n)),k(n.filters.length>1),n.filters.reduce((r,i)=>t_(r,i)))}function t_(t,e){let n;return k(t instanceof X||t instanceof ue),k(e instanceof X||e instanceof ue),n=t instanceof X?e instanceof X?function(i,o){return ue.create([i,o],"and")}(t,e):nb(t,e):e instanceof X?nb(e,t):function(i,o){if(k(i.filters.length>0&&o.filters.length>0),Wo(i)&&Wo(o))return Ub(i,o.getFilters());let s=ly(i)?i:o,a=ly(i)?o:i,u=s.filters.map(c=>t_(c,a));return ue.create(u,"or")}(t,e),$d(n)}function nb(t,e){if(Wo(e))return Ub(e,t.getFilters());{let n=e.filters.map(r=>t_(t,r));return ue.create(n,"or")}}function $d(t){if(k(t instanceof X||t instanceof ue),t instanceof X)return t;let e=t.getFilters();if(e.length===1)return $d(e[0]);if(Lb(t))return t;let n=e.map(i=>$d(i)),r=[];return n.forEach(i=>{i instanceof X?r.push(i):i instanceof ue&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ue.create(r,t.op)}var Ly=class{constructor(){this._n=new yu}addToCollectionParentIndex(e,n){return this._n.add(n),p.resolve()}getCollectionParents(e,n){return p.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return p.resolve()}deleteFieldIndex(e,n){return p.resolve()}deleteAllFieldIndexes(e){return p.resolve()}createTargetIndexes(e,n){return p.resolve()}getDocumentsMatchingTarget(e,n){return p.resolve(null)}getIndexType(e,n){return p.resolve(0)}getFieldIndexes(e,n){return p.resolve([])}getNextCollectionGroupToUpdate(e){return p.resolve(null)}getMinOffset(e,n){return p.resolve(jt.min())}getMinOffsetFromCollectionGroup(e,n){return p.resolve(jt.min())}updateCollectionGroup(e,n,r){return p.resolve()}updateIndexEntries(e,n){return p.resolve()}},yu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new de(ne.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new de(ne.comparator)).toArray()}};var fd=new Uint8Array(0),jy=class{constructor(e,n){this.databaseId=n,this.an=new yu,this.un=new Cn(r=>Di(r),(r,i)=>Su(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:dt(i)};return rb(e).put(o)}return p.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[Tb(n),""],!1,!0);return rb(e).W(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(yn(s.parent))}return r})}addFieldIndex(e,n){let r=Ka(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=No(e);return o.next(a=>{s.put(ZT(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=Ka(e),i=No(e),o=Ro(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Ka(e),r=Ro(e),i=No(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return p.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Bd(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=Ro(e),i=!0,o=new Map;return p.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=G(),a=[];return p.forEach(o,(u,c)=>{E("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(u)} to execute ${Di(n)}`);let l=function(T,R){let j=ny(R);if(j===void 0)return null;for(let q of Nd(T,j.fieldPath))switch(q.op){case"array-contains-any":return q.value.arrayValue.values||[];case"array-contains":return[q.value]}return null}(c,u),d=function(T,R){let j=new Map;for(let q of fi(R))for(let he of Nd(T,q.fieldPath))switch(he.op){case"==":case"in":j.set(q.fieldPath.canonicalString(),he.value);break;case"not-in":case"!=":return j.set(q.fieldPath.canonicalString(),he.value),Array.from(j.values())}return null}(c,u),h=function(T,R){let j=[],q=!0;for(let he of fi(R)){let bt=he.kind===0?FT(T,he.fieldPath,T.startAt):VT(T,he.fieldPath,T.startAt);j.push(bt.value),q&&(q=bt.inclusive)}return new Dn(j,q)}(c,u),f=function(T,R){let j=[],q=!0;for(let he of fi(R)){let bt=he.kind===0?VT(T,he.fieldPath,T.endAt):FT(T,he.fieldPath,T.endAt);j.push(bt.value),q&&(q=bt.inclusive)}return new Dn(j,q)}(c,u),_=this.hn(u,c,h),v=this.hn(u,c,f),m=this.Pn(u,c,d),I=this.In(u.indexId,l,_,h.inclusive,v,f.inclusive,m);return p.forEach(I,P=>r.j(P,n.limit).next(T=>{T.forEach(R=>{let j=b.fromSegments(R.documentKey);s.has(j)||(s=s.add(j),a.push(j))})}))}).next(()=>a)}return p.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=RL(ue.create(e.filters,"and")).map(r=>_y(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let u=(n!=null?n.length:1)*Math.max(r.length,o.length),c=u/(n!=null?n.length:1),l=[];for(let d=0;d<u;++d){let h=n?this.Tn(n[d/c]):fd,f=this.En(e,h,r[d%c],i),_=this.dn(e,h,o[d%c],s),v=a.map(m=>this.En(e,h,m,!0));l.push(...this.createRange(f,_,v))}return l}En(e,n,r,i){let o=new yi(e,b.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new yi(e,b.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new Bd(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return p.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let c=new de(Pe.comparator),l=!1;for(let d of u.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?l=!0:c=c.add(h.field));for(let d of u.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(l?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new mi;for(let i of fi(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);Bn.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new mi;return Bn.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new mi;return Bn.bt.Pt(Ei(this.databaseId,n),r.Ht(function(o){let s=fi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new mi);let o=0;for(let s of fi(e)){let a=r[o++];for(let u of i)if(this.Vn(n,s.fieldPath)&&cu(a))i=this.mn(i,s,a);else{let c=u.Ht(s.kind);Bn.bt.Pt(a,c)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new mi;u.seed(a.Wt()),Bn.bt.Pt(s,u.Ht(n.kind)),o.push(u)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof X&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Ka(e),i=No(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{let s=[];return p.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(l,d){let h=d?new iu(d.sequenceNumber,new jt(bi(d.readTime),new b(yn(d.documentKey)),d.largestBatchId)):iu.empty(),f=l.fields.map(([_,v])=>new Bo(Pe.fromServerFormat(_),v));return new Ho(l.indexId,l.collectionGroup,f,h)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:H(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Ka(e),o=No(e);return this.gn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>p.forEach(a,u=>o.put(ZT(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return p.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?p.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),p.forEach(a,u=>this.pn(e,i,u).next(c=>{let l=this.yn(o,u);return c.isEqual(l)?p.resolve():this.wn(e,o,u,c,l)}))))})}Sn(e,n,r,i){return Ro(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Ro(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=Ro(e),o=new de(mr);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new yi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new de(mr),i=this.An(n,e);if(i==null)return r;let o=ny(n);if(o!=null){let s=e.data.field(o.fieldPath);if(cu(s))for(let a of s.arrayValue.values||[])r=r.add(new yi(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new yi(n.indexId,e.key,fd,i));return r}wn(e,n,r,i,o){E("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(u,c,l,d,h){let f=u.getIterator(),_=c.getIterator(),v=Po(f),m=Po(_);for(;v||m;){let I=!1,P=!1;if(v&&m){let T=l(v,m);T<0?P=!0:T>0&&(I=!0)}else v!=null?P=!0:I=!0;I?(d(m),m=Po(_)):P?(h(v),v=Po(f)):(v=Po(f),m=Po(_))}}(i,o,mr,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),p.waitFor(s)}gn(e){let n=1;return No(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>mr(s,a)).filter((s,a,u)=>!a||mr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=mr(s,e),u=mr(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&u<0)i.push(s),i.push(s.Jt());else if(u>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,fd,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,fd,[]];o.push(IDBKeyRange.bound(a,u))}return o}Dn(e,n){return mr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(ib)}getMinOffset(e,n){return p.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||x())).next(ib)}};function rb(t){return Ge(t,"collectionParents")}function Ro(t){return Ge(t,"indexEntries")}function Ka(t){return Ge(t,"indexConfiguration")}function No(t){return Ge(t,"indexState")}function ib(t){k(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;Wv(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new jt(e.readTime,e.documentKey,n)}var ob={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function DA(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Y({range:s},(l,d,h)=>(a++,h.delete()));o.push(u.next(()=>{k(a===1)}));let c=[];for(let l of n.mutations){let d=xb(e,l.key.path,n.batchId);o.push(i.delete(d)),c.push(l.key)}return p.waitFor(o).next(()=>c)}function zd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw x();e=t.noDocument}return JSON.stringify(e).length}Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt(41943040,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);var qd=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){k(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yr(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=jo(e),s=yr(e);return s.add({}).next(a=>{k(typeof a=="number");let u=new du(a,n,r,i),c=function(f,_,v){let m=v.baseMutations.map(P=>mu(f.ct,P)),I=v.mutations.map(P=>mu(f.ct,P));return{userId:_,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:m,mutations:I}}(this.serializer,this.userId,u),l=[],d=new de((h,f)=>H(h.canonicalString(),f.canonicalString()));for(let h of i){let f=xb(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(s.put(c)),l.push(o.put(f,jV))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),p.waitFor(l).next(()=>u)})}lookupMutationBatch(e,n){return yr(e).get(n).next(r=>r?(k(r.userId===this.userId),gi(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?p.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return yr(e).Y({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(k(a.batchId>=r),o=gi(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return yr(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yr(e).W("userMutationsIndex",n).next(r=>r.map(i=>gi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=yd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return jo(e).Y({range:i},(s,a,u)=>{let[c,l,d]=s,h=yn(l);if(c===this.userId&&n.path.isEqual(h))return yr(e).get(d).next(f=>{if(!f)throw x();k(f.userId===this.userId),o.push(gi(this.serializer,f))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new de(H),i=[];return n.forEach(o=>{let s=yd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=jo(e).Y({range:a},(c,l,d)=>{let[h,f,_]=c,v=yn(f);h===this.userId&&o.path.isEqual(v)?r=r.add(_):d.done()});i.push(u)}),p.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=yd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new de(H);return jo(e).Y({range:s},(u,c,l)=>{let[d,h,f]=u,_=yn(h);d===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(f)):l.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(yr(e).get(o).next(s=>{if(s===null)throw x();k(s.userId===this.userId),r.push(gi(this.serializer,s))}))}),p.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return DA(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),p.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return p.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return jo(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=yn(o[1]);i.push(u)}else a.done()}).next(()=>{k(i.length===0)})})}containsKey(e,n){return CA(e,this.userId,n)}xn(e){return TA(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function CA(t,e,n){let r=yd(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return jo(t).Y({range:o,J:!0},(a,u,c)=>{let[l,d,h]=a;l===e&&d===i&&(s=!0),c.done()}).next(()=>s)}function yr(t){return Ge(t,"mutations")}function jo(t){return Ge(t,"documentMutations")}function TA(t){return Ge(t,"mutationQueues")}var Xo=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var Uy=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let r=new Xo(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>V.fromTimestamp(new Ie(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Oo(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(k(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return Oo(e).Y((s,a)=>{let u=Xa(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>p.waitFor(o)).next(()=>i)}forEachTarget(e,n){return Oo(e).Y((r,i)=>{let o=Xa(i);n(o)})}Ln(e){return sb(e).get("targetGlobalKey").next(n=>(k(n!==null),n))}kn(e,n){return sb(e).put("targetGlobalKey",n)}qn(e,n){return Oo(e).put(wA(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Di(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return Oo(e).Y({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let c=Xa(a);Su(n,c.target)&&(o=c,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=vr(e);return n.forEach(s=>{let a=dt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),p.waitFor(i)}removeMatchingKeys(e,n,r){let i=vr(e);return p.forEach(n,o=>{let s=dt(o.path);return p.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=vr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=vr(e),o=G();return i.Y({range:r,J:!0},(s,a,u)=>{let c=yn(s[1]),l=new b(c);o=o.add(l)}).next(()=>o)}containsKey(e,n){let r=dt(n.path),i=IDBKeyRange.bound([r],[Tb(r)],!1,!0),o=0;return vr(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],u,c)=>{s!==0&&(o++,c.done())}).next(()=>o>0)}_t(e,n){return Oo(e).get(n).next(r=>r?Xa(r):null)}};function Oo(t){return Ge(t,"targets")}function sb(t){return Ge(t,"targetGlobal")}function vr(t){return Ge(t,"targetDocuments")}function ab([t,e],[n,r]){let i=H(t,n);return i===0?H(e,r):i}var By=class{constructor(e){this.Kn=e,this.buffer=new de(ab),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();ab(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},$y=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){E("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Nr(n)?E("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Rr(n)}yield this.zn(3e5)}))}},zy=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return p.resolve(Ct._e);let r=new By(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(E("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(ob)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(E("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ob):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,u,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(E("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),ko()<=tn.DEBUG&&E("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${d} documents in `+(c-u)+`ms
Total Duration: ${c-l}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}};function NL(t,e){return new zy(t,e)}var qy=class{constructor(e,n){this.db=e,this.garbageCollector=NL(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return pd(e,r)}removeReference(e,n,r){return pd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return pd(e,n)}er(e,n){return function(i,o){let s=!1;return TA(i).Z(a=>CA(i,a,o).next(u=>(u&&(s=!0),p.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let u=this.er(e,s).next(c=>{if(!c)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,V.min()),vr(e).delete(function(d){return[0,dt(d.path)]}(s))))});i.push(u)}}).next(()=>p.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return pd(e,n)}Xn(e,n){let r=vr(e),i,o=Ct._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:c})=>{s===0?(o!==Ct._e&&n(new b(yn(i)),o),o=c,i=u):o=Ct._e}).next(()=>{o!==Ct._e&&n(new b(yn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function pd(t,e){return vr(t).put(function(r,i){return{targetId:0,path:dt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Hd=class{constructor(){this.changes=new Cn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Le.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?p.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Hy=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return hi(e).put(r)}removeEntry(e,n,r){return hi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],jd(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=Le.newInvalidDocument(n);return hi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Qa(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:Le.newInvalidDocument(n)};return hi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Qa(n))},(i,o)=>{r={document:this.nr(n,o),size:zd(o)}}).next(()=>r)}getEntries(e,n){let r=vt();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=vt(),i=new me(b.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,zd(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return p.resolve();let i=new de(lb);n.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Qa(i.first()),Qa(i.last())),s=i.getIterator(),a=s.getNext();return hi(e).Y({index:"documentKeyIndex",range:o},(u,c,l)=>{let d=b.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&lb(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,c),a=s.hasNext()?s.getNext():null),a?l.U(Qa(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),jd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hi(e).W(IDBKeyRange.bound(a,u,!0)).next(c=>{o?.incrementDocumentReadCount(c.length);let l=vt();for(let d of c){let h=this.nr(b.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(xu(n,h)||i.has(h.key))&&(l=l.insert(h.key,h))}return l})}getAllFromCollectionGroup(e,n,r,i){let o=vt(),s=cb(n,r),a=cb(n,jt.max());return hi(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,c,l)=>{let d=this.nr(b.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(d.key,d),o.size===i&&l.done()}).next(()=>o)}newChangeBuffer(e){return new Gy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ub(e).get("remoteDocumentGlobalKey").next(n=>(k(!!n),n))}tr(e,n){return ub(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=xL(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(V.min())))return r}return Le.newInvalidDocument(e)}};function bA(t){return new Hy(t)}var Gy=class extends Hd{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Cn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new de((o,s)=>H(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=QT(this.ar.serializer,s);i=i.add(o.path.popLast());let c=zd(u);r+=c-a.size,n.push(this.ar.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=QT(this.ar.serializer,s.convertToNoDocument(V.min()));n.push(this.ar.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),p.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function ub(t){return Ge(t,"remoteDocumentGlobal")}function hi(t){return Ge(t,"remoteDocumentsV14")}function Qa(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cb(t,e){let n=e.documentKey.path.toArray();return[t,jd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function lb(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=H(n[o],r[o]),i)return i;return i=H(n.length,r.length),i||(i=H(n[n.length-2],r[r.length-2]),i||H(n[n.length-1],r[r.length-1]))}var Wy=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Gd=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&tu(r.mutation,i,Tt.empty(),Ie.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,G()).next(()=>r))}getLocalViewOfDocuments(e,n,r=G()){let i=vn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Za();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=vn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,G()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=vt(),s=eu(),a=function(){return eu()}();return n.forEach((u,c)=>{let l=r.get(c.key);i.has(c.key)&&(l===void 0||l.mutation instanceof Xt)?o=o.insert(c.key,c):l!==void 0?(s.set(c.key,l.mutation.getFieldMask()),tu(l.mutation,c,l.mutation.getFieldMask(),Ie.now())):s.set(c.key,Tt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,l)=>s.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new Wy(l,(d=s.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=eu(),i=new me((s,a)=>s-a),o=G();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let c=n.get(u);if(c===null)return;let l=r.get(u)||Tt.empty();l=a.applyToLocalView(c,l),r.set(u,l);let d=(i.get(a.batchId)||G()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),c=u.key,l=u.value,d=Qb();l.forEach(h=>{if(!o.has(h)){let f=rA(n.get(h),r.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return p.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return b.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Zv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):p.resolve(vn()),a=-1,u=o;return s.next(c=>p.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?p.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,G())).next(l=>({batchId:a,changes:Kb(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new b(n)).next(r=>{let i=Za();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Za();return this.indexManager.getCollectionParents(e,o).next(a=>p.forEach(a,u=>{let c=function(d,h){return new Zt(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,c)=>{let l=c.getKey();s.get(l)===null&&(s=s.insert(l,Le.newInvalidDocument(l)))});let a=Za();return s.forEach((u,c)=>{let l=o.get(u);l!==void 0&&tu(l.mutation,c,Tt.empty(),Ie.now()),xu(n,c)&&(a=a.insert(u,c))}),a})}};var Ky=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return p.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Re(i.createTime)}}(n)),p.resolve()}getNamedQuery(e,n){return p.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:e_(i.bundledQuery),readTime:Re(i.readTime)}}(n)),p.resolve()}};var Qy=class{constructor(){this.overlays=new me(b.comparator),this.hr=new Map}getOverlay(e,n){return p.resolve(this.overlays.get(n))}getOverlays(e,n){let r=vn();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),p.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),p.resolve()}getOverlaysForCollection(e,n,r){let i=vn(),o=n.length+1,s=new b(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return p.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new me((c,l)=>c-l),s=this.overlays.getIterator();for(;s.hasNext();){let c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=o.get(c.largestBatchId);l===null&&(l=vn(),o=o.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}let a=vn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return p.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new hu(n,r));let o=this.hr.get(n);o===void 0&&(o=G(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var vu=class{constructor(){this.Pr=new de(ke.Ir),this.Tr=new de(ke.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new ke(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ke(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new b(new ne([])),r=new ke(n,e),i=new ke(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new b(new ne([])),r=new ke(n,e),i=new ke(n,e+1),o=G();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new ke(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},ke=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return b.comparator(e.key,n.key)||H(e.pr,n.pr)}static Er(e,n){return H(e.pr,n.pr)||b.comparator(e.key,n.key)}};var Yy=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new de(ke.Ir)}checkEmpty(e){return p.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new du(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new ke(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return p.resolve(s)}lookupMutationBatch(e,n){return p.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return p.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return p.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new ke(n,0),i=new ke(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),p.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new de(H);return n.forEach(i=>{let o=new ke(i,0),s=new ke(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),p.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;b.isDocumentKey(o)||(o=o.child(""));let s=new ke(new b(o),0),a=new de(H);return this.wr.forEachWhile(u=>{let c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.pr)),!0)},s),p.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){k(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return p.forEach(n.mutations,i=>{let o=new ke(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new ke(n,0),i=this.wr.firstAfterOrEqual(r);return p.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,p.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Zy=class{constructor(e){this.vr=e,this.docs=function(){return new me(b.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return p.resolve(r?r.document.mutableCopy():Le.newInvalidDocument(n))}getEntries(e,n){let r=vt();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Le.newInvalidDocument(i))}),p.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=vt(),s=n.path,a=new b(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:c,value:{document:l}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||Wv(Ab(l),r)<=0||(i.has(l.key)||xu(n,l))&&(o=o.insert(l.key,l.mutableCopy()))}return p.resolve(o)}getAllFromCollectionGroup(e,n,r,i){x()}Fr(e,n){return p.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Xy(this)}getSize(e){return p.resolve(this.size)}},Xy=class extends Hd{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),p.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Jy=class{constructor(e){this.persistence=e,this.Mr=new Cn(n=>Di(n),Su),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.Or=0,this.Nr=new vu,this.targetCount=0,this.Br=Xo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),p.resolve()}getLastRemoteSnapshotVersion(e){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return p.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),p.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new Xo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,p.resolve()}updateTargetData(e,n){return this.qn(n),p.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,p.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),p.waitFor(o).next(()=>i)}getTargetCount(e){return p.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return p.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),p.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),p.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),p.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return p.resolve(r)}containsKey(e,n){return p.resolve(this.Nr.containsKey(n))}};var Wd=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new Ct(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Jy(this),this.indexManager=new Ly,this.remoteDocumentCache=function(i){return new Zy(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Ld(n),this.$r=new Ky(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Qy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new Yy(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){E("MemoryPersistence","Starting transaction:",e);let i=new ev(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return p.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},ev=class extends bd{constructor(e){super(),this.currentSequenceNumber=e}},Kd=class t{constructor(e){this.persistence=e,this.zr=new vu,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw x()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),p.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),p.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),p.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Jr,r=>{let i=b.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,V.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return p.or([()=>p.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var tv=class{constructor(e){this.serializer=e}N(e,n,r,i){let o=new Ad("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AT,{unique:!0}),u.createObjectStore("documentMutations")}(e),db(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=p.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),db(e)),s=s.next(()=>function(u){let c=u.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:V.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",l)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,c){return c.store("mutations").W().next(l=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",AT,{unique:!0});let d=c.store("mutations"),h=l.map(f=>d.put(f));return p.waitFor(h)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let c=u.createObjectStore("documentOverlays",{keyPath:ZV});c.createIndex("collectionPathOverlayIndex",XV,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",JV,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let c=u.createObjectStore("remoteDocumentsV14",{keyPath:UV});c.createIndex("documentKeyIndex",BV),c.createIndex("collectionGroupIndex",$V)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:WV}).createIndex("sequenceNumberIndex",KV,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:QV}).createIndex("documentKeyIndex",YV,{unique:!1})}(e))),s}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=zd(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>p.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>p.forEach(a,u=>{k(u.userId===o.userId);let c=gi(this.serializer,u);return DA(e,o.userId,c).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.Y((s,a)=>{let u=new ne(s),c=function(d){return[0,dt(d)]}(u);o.push(n.get(c).next(l=>l?p.resolve():(d=>n.put({targetId:0,path:dt(d),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>p.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:GV});let r=n.store("collectionParents"),i=new yu,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:dt(u)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let u=new ne(s);return o(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,u],c)=>{let l=yn(a);return o(l.popLast())}))}ri(e){let n=e.store("targets");return n.Y((r,i)=>{let o=Xa(i),s=wA(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),u=function(d){return d.document?new b(ne.fromString(d.document.name).popFirst(5)):d.noDocument?b.fromSegments(d.noDocument.path):d.unknownDocument?b.fromSegments(d.unknownDocument.path):x()}(s).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(c))}).next(()=>p.waitFor(i))}si(e,n){let r=n.store("mutations"),i=bA(this.serializer),o=new Wd(Kd.Hr,this.serializer.ct);return r.W().next(s=>{let a=new Map;return s.forEach(u=>{var c;let l=(c=a.get(u.userId))!==null&&c!==void 0?c:G();gi(this.serializer,u).keys().forEach(d=>l=l.add(d)),a.set(u.userId,l)}),p.forEach(a,(u,c)=>{let l=new Fe(c),d=Ud.lt(this.serializer,l),h=o.getIndexManager(l),f=qd.lt(l,this.serializer,h,o.referenceDelegate);return new Gd(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new su(n,Ct._e),u).next()})})}};function db(t){t.createObjectStore("targetDocuments",{keyPath:qV}).createIndex("documentTargetsIndex",HV,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",zV,{unique:!0}),t.createObjectStore("targetGlobal")}var Gm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nv=class t{constructor(e,n,r,i,o,s,a,u,c,l,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=c,this.ai=l,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new w(g.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qy(this,i),this.Ti=n+"main",this.serializer=new Ld(u),this.Ei=new zn(this.Ti,this.ui,new tv(this.serializer)),this.Qr=new Uy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bA(this.serializer),this.$r=new Py,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,l===!1&&xe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new w(g.FAILED_PRECONDITION,Gm);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Ct(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>y(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>y(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>y(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Nr(e))return E("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return E("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Ya(e).get("owner").next(n=>p.resolve(this.Si(n)))}bi(e){return gd(e).delete(this.clientId)}Di(){return y(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=Ge(n,"clientMetadata");return r.W().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return p.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?p.resolve(!0):Ya(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new w(g.FAILED_PRECONDITION,Gm);return!1}}return!(!this.networkEnabled||!this.inForeground)||gd(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&E("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return y(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new su(e,Ct._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Bi()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>gd(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return qd.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ud.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){E("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(u){return u===15?tL:u===14?Nb:u===13?Rb:u===12?eL:u===11?Pb:void x()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new su(a,this.kr?this.kr.next():Ct._e),n==="readwrite-primary"?this.gi(s).next(u=>!!u||this.pi(s)).next(u=>{if(!u)throw xe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new w(g.FAILED_PRECONDITION,Sb);return r(s)}).next(u=>this.wi(s).next(()=>u)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Ya(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new w(g.FAILED_PRECONDITION,Gm)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ya(e).put("owner",n)}static D(){return zn.D()}yi(e){let n=Ya(e);return n.get("owner").next(r=>this.Si(r)?(E("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):p.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(xe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;Fh()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return E("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return xe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){xe("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Ya(t){return Ge(t,"owner")}function gd(t){return Ge(t,"clientMetadata")}function n_(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var rv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=G(),i=G();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var iv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Qd=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Fh()?8:zn.v(ms())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new iv;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(ko()<=tn.DEBUG&&E("QueryEngine","SDK will not create cache indexes for query:",Fo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),p.resolve()):(ko()<=tn.DEBUG&&E("QueryEngine","Query:",Fo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(ko()<=tn.DEBUG&&E("QueryEngine","The SDK decides to create cache indexes for query:",Fo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ht(n))):p.resolve())}ji(e,n){if(LT(n))return p.resolve(null);let r=ht(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Od(n,null,"F"),r=ht(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=G(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let c=this.Zi(n,a);return this.Xi(n,c,s,u.readTime)?this.ji(e,Od(n,null,"F")):this.es(e,c,n,u)}))})))}Hi(e,n,r,i){return LT(n)||i.isEqual(V.min())?p.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?p.resolve(null):(ko()<=tn.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fo(n)),this.es(e,s,n,bb(i,-1)).next(a=>a))})}Zi(e,n){let r=new de(Gb(e));return n.forEach((i,o)=>{xu(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return ko()<=tn.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",Fo(n)),this.zi.getDocumentsMatchingQuery(e,n,jt.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var ov=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new me(H),this.rs=new Cn(o=>Di(o),Su),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gd(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function AA(t,e,n,r){return new ov(t,e,n,r)}function SA(t,e){return y(this,null,function*(){let n=S(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=G();for(let c of i){s.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}for(let c of o){a.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})})}function OL(t,e){let n=S(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){let d=c.batch,h=d.keys(),f=p.resolve();return h.forEach(_=>{f=f.next(()=>l.getEntry(u,_)).next(v=>{let m=c.docVersions.get(_);k(m!==null),v.version.compareTo(m)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),l.addEntry(v)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=G();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function MA(t){let e=S(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function kL(t,e){let n=S(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(o,l.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(He.EMPTY_BYTE_STRING,V.min()).withLastLimboFreeSnapshotVersion(V.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(v,m,I){return v.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(h,f,l)&&a.push(n.Qr.updateTargetData(o,f))});let u=vt(),c=G();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(xA(o,s,e.documentUpdates).next(l=>{u=l.cs,c=l.ls})),!r.isEqual(V.min())){let l=n.Qr.getLastRemoteSnapshotVersion(o).next(d=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return p.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(n.ns=i,o))}function xA(t,e,n){let r=G(),i=G();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=vt();return n.forEach((a,u)=>{let c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(V.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):E("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{cs:s,ls:i}})}function FL(t,e){let n=S(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Jo(t,e){let n=S(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,p.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new Zo(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function es(t,e,n){return y(this,null,function*(){let r=S(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Nr(s))throw s;E("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Yd(t,e,n){let r=S(t),i=V.min(),o=G();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,l){let d=S(u),h=d.rs.get(l);return h!==void 0?p.resolve(d.ns.get(h)):d.Qr.getTargetData(c,l)}(r,s,ht(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:V.min(),n?o:G())).next(a=>(NA(r,Hb(e),a),{documents:a,hs:o})))}function PA(t,e){let n=S(t),r=S(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function RA(t,e){let n=S(t),r=n.ss.get(e)||V.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,bb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(NA(n,e,i),i))}function NA(t,e,n){let r=t.ss.get(e)||V.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function VL(t,e,n,r){return y(this,null,function*(){let i=S(t),o=G(),s=vt();for(let c of n){let l=e.Ps(c.metadata.name);c.document&&(o=o.add(l));let d=e.Is(c);d.setReadTime(e.Ts(c.metadata.readTime)),s=s.insert(l,d)}let a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield Jo(i,function(l){return ht(as(ne.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>xA(c,a,s).next(l=>(a.apply(c),l)).next(l=>i.Qr.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.Qr.addMatchingKeys(c,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,l.cs,l.ls)).next(()=>l.cs)))})}function LL(r,i){return y(this,arguments,function*(t,e,n=G()){let o=yield Jo(t,ht(e_(e.bundledQuery))),s=S(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Re(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.$r.saveNamedQuery(a,e);let c=o.withResumeToken(He.EMPTY_BYTE_STRING,u);return s.ns=s.ns.insert(c.targetId,c),s.Qr.updateTargetData(a,c).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function hb(t,e){return`firestore_clients_${t}_${e}`}function fb(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Wm(t,e){return`firestore_targets_${t}_${e}`}var Zd=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new w(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(xe("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},nu=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new w(r.error.code,r.error.message))),o?new t(e,r.state,i):(xe("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Xd=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Xv();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Mb(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(xe("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},sv=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(xe("SharedClientState",`Failed to parse online state: ${e}`),null)}},_u=class{constructor(){this.activeTargetIds=Xv()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},ru=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new me(H),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=hb(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new _u),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return y(this,null,function*(){let e=yield this.syncEngine.Li();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(hb(this.persistenceKey,r));if(i){let o=Xd.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,r){this.Bs(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Wm(this.persistenceKey,e));if(r){let i=nu.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Wm(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return E("SharedClientState","READ",e,n),n}setItem(e,n){E("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){E("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(E("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void xe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>y(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=Ct._e;if(o!=null)try{let a=JSON.parse(o);k(typeof a=="number"),s=a}catch(a){xe("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==Ct._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,r){let i=new Zd(this.currentUser,e,n,r),o=fb(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Ls(e){let n=fb(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=Wm(this.persistenceKey,e),o=new nu(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return Xd.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Zd.Es(new Fe(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return nu.Es(i,n)}xs(e){return sv.Es(e)}Js(e){return JSON.parse(e)}zs(e){return y(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);E("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Xv();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},Jd=class{constructor(){this.no=new _u,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new _u,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var av=class{io(e){}shutdown(){}};var eh=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var md=null;function Km(){return md===null?md=function(){return 268435456+Math.round(2147483648*Math.random())}():md++,"0x"+md.toString(16)}var jL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var uv=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var ot="WebChannelConnection",cv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){let a=Km(),u=this.bo(n,r.toUriEncodedString());E("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(n,u,c,i).then(l=>(E("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Lt("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ss}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){let i=jL[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let o=Km();return new Promise((s,a)=>{let u=new IT;u.setWithCredentials(!0),u.listenOnce(wT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case hd.NO_ERROR:let l=u.getResponseJson();E(ot,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case hd.TIMEOUT:E(ot,`RPC '${e}' ${o} timed out`),a(new w(g.DEADLINE_EXCEEDED,"Request time out"));break;case hd.HTTP_ERROR:let d=u.getStatus();if(E(ot,`RPC '${e}' ${o} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let _=function(m){let I=m.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(I)>=0?I:g.UNKNOWN}(f.status);a(new w(_,f.message))}else a(new w(g.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new w(g.UNAVAILABLE,"Connection failed."));break;default:x()}}finally{E(ot,`RPC '${e}' ${o} completed.`)}});let c=JSON.stringify(i);E(ot,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}Fo(e,n,r){let i=Km(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=vT(),a=_T(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let l=o.join("");E(ot,`Creating RPC '${e}' stream ${i}: ${l}`,u);let d=s.createWebChannel(l,u),h=!1,f=!1,_=new uv({lo:m=>{f?E(ot,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(E(ot,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),E(ot,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},ho:()=>d.close()}),v=(m,I,P)=>{m.listen(I,T=>{try{P(T)}catch(R){setTimeout(()=>{throw R},0)}})};return v(d,Ga.EventType.OPEN,()=>{f||E(ot,`RPC '${e}' stream ${i} transport opened.`)}),v(d,Ga.EventType.CLOSE,()=>{f||(f=!0,E(ot,`RPC '${e}' stream ${i} transport closed`),_.Vo())}),v(d,Ga.EventType.ERROR,m=>{f||(f=!0,Lt(ot,`RPC '${e}' stream ${i} transport errored:`,m),_.Vo(new w(g.UNAVAILABLE,"The operation could not be completed")))}),v(d,Ga.EventType.MESSAGE,m=>{var I;if(!f){let P=m.data[0];k(!!P);let T=P,R=T.error||((I=T[0])===null||I===void 0?void 0:I.error);if(R){E(ot,`RPC '${e}' stream ${i} received error:`,R);let j=R.status,q=function(Nh){let B_=Oe[Nh];if(B_!==void 0)return sA(B_)}(j),he=R.message;q===void 0&&(q=g.INTERNAL,he="Unknown error status: "+j+" with message "+R.message),f=!0,_.Vo(new w(q,he)),d.close()}else E(ot,`RPC '${e}' stream ${i} received:`,P),_.mo(P)}}),v(a,ET.STAT_EVENT,m=>{m.stat===qm.PROXY?E(ot,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===qm.NOPROXY&&E(ot,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.Ro()},0),_}};function OA(){return typeof window<"u"?window:null}function Ed(){return typeof document<"u"?document:null}function Pu(t){return new by(t,!0)}var wu=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&E("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var th=class{constructor(e,n,r,i,o,s,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new wu(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return y(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return y(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return y(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(xe(n.toString()),xe("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new w(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>y(this,null,function*(){this.state=0,this.start()}))}__(e){return E("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},lv=class extends th{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=DL(this.serializer,e),r=function(o){if(!("targetChange"in o))return V.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?V.min():s.readTime?Re(s.readTime):V.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=My(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=Rd(u)?{documents:pA(o,u)}:{query:gA(o,u).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=uA(o,s.resumeToken);let c=Ay(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(V.min())>0){a.readTime=Yo(o,s.snapshotVersion.toTimestamp());let c=Ay(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let r=TL(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=My(this.serializer),n.removeTarget=e,this.t_(n)}},dv=class extends th{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(k(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=CL(e.writeResults,e.commitTime),r=Re(e.commitTime);return this.listener.T_(r,n)}return k(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=My(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>mu(this.serializer,r))};this.t_(n)}};var hv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new w(g.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,Sy(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new w(g.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,Sy(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new w(g.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var fv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(xe(n),this.g_=!1):E("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var pv=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{r.enqueueAndForget(()=>y(this,null,function*(){Or(this)&&(E("RemoteStore","Restarting streams for network reachability change."),yield function(u){return y(this,null,function*(){let c=S(u);c.v_.add(4),yield us(c),c.x_.set("Unknown"),c.v_.delete(4),yield Ru(c)})}(this))}))}),this.x_=new fv(r,i)}};function Ru(t){return y(this,null,function*(){if(Or(t))for(let e of t.F_)yield e(!0)})}function us(t){return y(this,null,function*(){for(let e of t.F_)yield e(!1)})}function wh(t,e){let n=S(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),o_(n)?i_(n):ls(n).Jo()&&r_(n,e))}function Eu(t,e){let n=S(t),r=ls(n);n.C_.delete(e),r.Jo()&&kA(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Or(n)&&n.x_.set("Unknown"))}function r_(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(V.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ls(t).c_(e)}function kA(t,e){t.O_.Oe(e),ls(t).l_(e)}function i_(t){t.O_=new Ty({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ls(t).start(),t.x_.p_()}function o_(t){return Or(t)&&!ls(t).Ho()&&t.C_.size>0}function Or(t){return S(t).v_.size===0}function FA(t){t.O_=void 0}function UL(t){return y(this,null,function*(){t.C_.forEach((e,n)=>{r_(t,e)})})}function BL(t,e){return y(this,null,function*(){FA(t),o_(t)?(t.x_.S_(e),i_(t)):t.x_.set("Unknown")})}function $L(t,e,n){return y(this,null,function*(){if(t.x_.set("Online"),e instanceof Fd&&e.state===2&&e.cause)try{yield function(i,o){return y(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){E("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield nh(t,r)}else if(e instanceof zo?t.O_.$e(e):e instanceof kd?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(V.min()))try{let r=yield MA(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){let l=o.C_.get(c);l&&o.C_.set(c,l.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,c)=>{let l=o.C_.get(u);if(!l)return;o.C_.set(u,l.withResumeToken(He.EMPTY_BYTE_STRING,l.snapshotVersion)),kA(o,u);let d=new Zo(l.target,u,c,l.sequenceNumber);r_(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){E("RemoteStore","Failed to raise snapshot:",r),yield nh(t,r)}})}function nh(t,e,n){return y(this,null,function*(){if(!Nr(e))throw e;t.v_.add(1),yield us(t),t.x_.set("Offline"),n||(n=()=>MA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){E("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Ru(t)}))})}function VA(t,e){return e().catch(n=>nh(t,n,e))}function cs(t){return y(this,null,function*(){let e=S(t),n=Pr(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;zL(e);)try{let i=yield FL(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,qL(e,i)}catch(i){yield nh(e,i)}LA(e)&&jA(e)})}function zL(t){return Or(t)&&t.D_.length<10}function qL(t,e){t.D_.push(e);let n=Pr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function LA(t){return Or(t)&&!Pr(t).Ho()&&t.D_.length>0}function jA(t){Pr(t).start()}function HL(t){return y(this,null,function*(){Pr(t).d_()})}function GL(t){return y(this,null,function*(){let e=Pr(t);for(let n of t.D_)e.I_(n.mutations)})}function WL(t,e,n){return y(this,null,function*(){let r=t.D_.shift(),i=Iy.from(r,e,n);yield VA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield cs(t)})}function KL(t,e){return y(this,null,function*(){e&&Pr(t).P_&&(yield function(r,i){return y(this,null,function*(){if(function(s){return oA(s)&&s!==g.ABORTED}(i.code)){let o=r.D_.shift();Pr(r).Zo(),yield VA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield cs(r)}})}(t,e)),LA(t)&&jA(t)})}function pb(t,e){return y(this,null,function*(){let n=S(t);n.asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials");let r=Or(n);n.v_.add(3),yield us(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Ru(n)})}function gv(t,e){return y(this,null,function*(){let n=S(t);e?(n.v_.delete(2),yield Ru(n)):e||(n.v_.add(2),yield us(n),n.x_.set("Unknown"))})}function ls(t){return t.N_||(t.N_=function(n,r,i){let o=S(n);return o.R_(),new lv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:UL.bind(null,t),To:BL.bind(null,t),u_:$L.bind(null,t)}),t.F_.push(e=>y(this,null,function*(){e?(t.N_.Zo(),o_(t)?i_(t):t.x_.set("Unknown")):(yield t.N_.stop(),FA(t))}))),t.N_}function Pr(t){return t.B_||(t.B_=function(n,r,i){let o=S(n);return o.R_(),new dv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:HL.bind(null,t),To:KL.bind(null,t),E_:GL.bind(null,t),T_:WL.bind(null,t)}),t.F_.push(e=>y(this,null,function*(){e?(t.B_.Zo(),yield cs(t)):(yield t.B_.stop(),t.D_.length>0&&(E("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var mv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ve,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new w(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ds(t,e){if(xe("AsyncQueue",`${e}: ${t}`),Nr(t))return new w(g.UNAVAILABLE,`${e}: ${t}`);throw t}var rh=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||b.comparator(n.key,r.key):(n,r)=>b.comparator(n.key,r.key),this.keyedMap=Za(),this.sortedSet=new me(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var ih=class{constructor(){this.L_=new me(b.comparator)}track(e){let n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):x():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}},ts=class t{constructor(e,n,r,i,o,s,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,rh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var yv=class{constructor(){this.q_=void 0,this.Q_=[]}},vv=class{constructor(){this.queries=new Cn(e=>qb(e),Mu),this.onlineState="Unknown",this.K_=new Set}};function s_(t,e){return y(this,null,function*(){let n=S(t),r=e.query,i=!1,o=n.queries.get(r);if(o||(i=!0,o=new yv),i)try{o.q_=yield n.onListen(r)}catch(s){let a=ds(s,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.Q_.push(e),e.U_(n.onlineState),o.q_&&e.W_(o.q_)&&u_(n)})}function a_(t,e){return y(this,null,function*(){let n=S(t),r=e.query,i=!1,o=n.queries.get(r);if(o){let s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=o.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function QL(t,e){let n=S(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Q_)a.W_(i)&&(r=!0);s.q_=i}}r&&u_(n)}function YL(t,e,n){let r=S(t),i=r.queries.get(e);if(i)for(let o of i.Q_)o.onError(n);r.queries.delete(e)}function u_(t){t.K_.forEach(e=>{e.next()})}var Iu=class{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ts(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=ts.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var _v=class{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}};var oh=class{constructor(e){this.serializer=e}Ps(e){return wn(this.serializer,e)}Is(e){return e.metadata.exists?fA(this.serializer,e.document,!1):Le.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Re(e)}},wv=class{constructor(e,n,r){this.ta=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UA(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;let r=ne.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){let n=new Map,r=new oh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||G()).add(o);n.set(s,a)}}return n}complete(){return y(this,null,function*(){let e=yield VL(this.localStore,new oh(this.serializer),this.documents,this.ta.id),n=this.ra(this.documents);for(let r of this.queries)yield LL(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}})}};function UA(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var sh=class{constructor(e){this.key=e}},ah=class{constructor(e){this.key=e}},uh=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=G(),this.mutatedKeys=G(),this.ua=Gb(e),this.ca=new rh(this.ua)}get la(){return this.oa}ha(e,n){let r=n?n.Pa:new ih,i=n?n.ca:this.ca,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=xu(this.query,d)?d:null,_=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),m=!1;h&&f?h.data.isEqual(f.data)?_!==v&&(r.track({type:3,doc:f}),m=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),m=!0,(u&&this.ua(f,u)>0||c&&this.ua(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(u||c)&&(a=!0)),m&&(f?(s=s.add(f),o=v?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ca:s,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let s=e.Pa.k_();s.sort((l,d)=>function(f,_){let v=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return x()}};return v(f)-v(_)}(l.type,d.type)||this.ua(l.doc,d.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],u=this.aa.size===0&&this.current&&!i?1:0,c=u!==this._a;return this._a=u,s.length!==0||c?{snapshot:new ts(this.query,e.ca,o,s,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new ih,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=G(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new ah(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new sh(r))}),n}Ra(e){this.oa=e.hs,this.aa=G();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return ts.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},Ev=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Iv=class{constructor(e){this.key=e,this.ma=!1}},Dv=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Cn(a=>qb(a),Mu),this.pa=new Map,this.ya=new Set,this.wa=new me(b.comparator),this.Sa=new Map,this.ba=new vu,this.Da={},this.Ca=new Map,this.va=Xo.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function ZL(t,e){return y(this,null,function*(){let n=f_(t),r,i,o=n.ga.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{let s=yield Jo(n.localStore,ht(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield c_(n,e,r,a==="current",s.resumeToken),n.isPrimaryClient&&wh(n.remoteStore,s)}return i})}function c_(t,e,n,r,i){return y(this,null,function*(){t.Ma=(d,h,f)=>function(v,m,I,P){return y(this,null,function*(){let T=m.view.ha(I);T.Xi&&(T=yield Yd(v.localStore,m.query,!1).then(({documents:he})=>m.view.ha(he,T)));let R=P&&P.targetChanges.get(m.targetId),j=P&&P.targetMismatches.get(m.targetId)!=null,q=m.view.applyChanges(T,v.isPrimaryClient,R,j);return Cv(v,m.targetId,q.da),q.snapshot})}(t,d,h,f);let o=yield Yd(t.localStore,e,!0),s=new uh(e,o.hs),a=s.ha(o.documents),u=pu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,u);Cv(t,n,c.da);let l=new Ev(e,n,s);return t.ga.set(e,l),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot})}function XL(t,e){return y(this,null,function*(){let n=S(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(o=>!Mu(o,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield es(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Eu(n.remoteStore,r.targetId),ns(n,r.targetId)}).catch(Rr))):(ns(n,r.targetId),yield es(n.localStore,r.targetId,!0))})}function JL(t,e,n){return y(this,null,function*(){let r=p_(t);try{let i=yield function(s,a){let u=S(s),c=Ie.now(),l=a.reduce((f,_)=>f.add(_.key),G()),d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let _=vt(),v=G();return u.os.getEntries(f,l).next(m=>{_=m,_.forEach((I,P)=>{P.isValidDocument()||(v=v.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,_)).next(m=>{d=m;let I=[];for(let P of a){let T=mL(P,d.get(P.key).overlayedDocument);T!=null&&I.push(new Xt(P.key,T,Vb(T.value.mapValue),Ae.exists(!0)))}return u.mutationQueue.addMutationBatch(f,c,I,a)}).next(m=>{h=m;let I=m.applyToLocalDocumentSet(d,v);return u.documentOverlayCache.saveOverlays(f,m.batchId,I)})}).then(()=>({batchId:h.batchId,changes:Kb(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let c=s.Da[s.currentUser.toKey()];c||(c=new me(H)),c=c.insert(a,u),s.Da[s.currentUser.toKey()]=c}(r,i.batchId,n),yield Kn(r,i.changes),yield cs(r.remoteStore)}catch(i){let o=ds(i,"Failed to persist write");n.reject(o)}})}function BA(t,e){return y(this,null,function*(){let n=S(t);try{let r=yield kL(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Sa.get(o);s&&(k(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?k(s.ma):i.removedDocuments.size>0&&(k(s.ma),s.ma=!1))}),yield Kn(n,r,e)}catch(r){yield Rr(r)}})}function gb(t,e,n){let r=S(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((o,s)=>{let a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=S(s);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(let h of d.Q_)h.U_(a)&&(c=!0)}),c&&u_(u)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function e2(t,e,n){return y(this,null,function*(){let r=S(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Sa.get(e),o=i&&i.key;if(o){let s=new me(b.comparator);s=s.insert(o,Le.newNoDocument(o,V.min()));let a=G().add(o),u=new fu(V.min(),new Map,new me(H),s,a);yield BA(r,u),r.wa=r.wa.remove(o),r.Sa.delete(e),h_(r)}else yield es(r.localStore,e,!1).then(()=>ns(r,e,n)).catch(Rr)})}function t2(t,e){return y(this,null,function*(){let n=S(t),r=e.batch.batchId;try{let i=yield OL(n.localStore,e);d_(n,r,null),l_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Kn(n,i)}catch(i){yield Rr(i)}})}function n2(t,e,n){return y(this,null,function*(){let r=S(t);try{let i=yield function(s,a){let u=S(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(k(d!==null),l=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);d_(r,e,n),l_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Kn(r,i)}catch(i){yield Rr(i)}})}function r2(t,e){return y(this,null,function*(){let n=S(t);Or(n.remoteStore)||E("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=S(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Ca.get(r)||[];i.push(e),n.Ca.set(r,i)}catch(r){let i=ds(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function l_(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function d_(t,e,n){let r=S(t),i=r.Da[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function ns(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||$A(t,r)})}function $A(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(Eu(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),h_(t))}function Cv(t,e,n){for(let r of n)r instanceof sh?(t.ba.addReference(r.key,e),i2(t,r)):r instanceof ah?(E("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||$A(t,r.key)):x()}function i2(t,e){let n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(E("SyncEngine","New document in limbo: "+n),t.ya.add(r),h_(t))}function h_(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new b(ne.fromString(e)),r=t.va.next();t.Sa.set(r,new Iv(n)),t.wa=t.wa.insert(n,r),wh(t.remoteStore,new Zo(ht(as(n.path)),r,"TargetPurposeLimboResolution",Ct._e))}}function Kn(t,e,n){return y(this,null,function*(){let r=S(t),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach((a,u)=>{s.push(r.Ma(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);let l=rv.Ki(u.targetId,c);o.push(l)}}))}),yield Promise.all(s),r.fa.u_(i),yield function(u,c){return y(this,null,function*(){let l=S(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>p.forEach(c,h=>p.forEach(h.qi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>p.forEach(h.Qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!Nr(d))throw d;E("LocalStore","Failed to update sequence numbers: "+d)}for(let d of c){let h=d.targetId;if(!d.fromCache){let f=l.ns.get(h),_=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(_);l.ns=l.ns.insert(h,v)}}})}(r.localStore,o))})}function o2(t,e){return y(this,null,function*(){let n=S(t);if(!n.currentUser.isEqual(e)){E("SyncEngine","User change. New user:",e.toKey());let r=yield SA(n.localStore,e);n.currentUser=e,function(o,s){o.Ca.forEach(a=>{a.forEach(u=>{u.reject(new w(g.CANCELLED,s))})}),o.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Kn(n,r.us)}})}function s2(t,e){let n=S(t),r=n.Sa.get(e);if(r&&r.ma)return G().add(r.key);{let i=G(),o=n.pa.get(e);if(!o)return i;for(let s of o){let a=n.ga.get(s);i=i.unionWith(a.view.la)}return i}}function a2(t,e){return y(this,null,function*(){let n=S(t),r=yield Yd(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&Cv(n,e.targetId,i.da),i})}function u2(t,e){return y(this,null,function*(){let n=S(t);return RA(n.localStore,e).then(r=>Kn(n,r))})}function c2(t,e,n,r){return y(this,null,function*(){let i=S(t),o=yield function(a,u){let c=S(a),l=S(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.vn(d,u).next(h=>h?c.localDocuments.getDocuments(d,h):p.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield cs(i.remoteStore):n==="acknowledged"||n==="rejected"?(d_(i,e,r||null),l_(i,e),function(a,u){S(S(a).mutationQueue).Mn(u)}(i.localStore,e)):x(),yield Kn(i,o)):E("SyncEngine","Cannot apply mutation batch with id: "+e)})}function l2(t,e){return y(this,null,function*(){let n=S(t);if(f_(n),p_(n),e===!0&&n.Fa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield mb(n,r.toArray());n.Fa=!0,yield gv(n.remoteStore,!0);for(let o of i)wh(n.remoteStore,o)}else if(e===!1&&n.Fa!==!1){let r=[],i=Promise.resolve();n.pa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(ns(n,s),es(n.localStore,s,!0))),Eu(n.remoteStore,s)}),yield i,yield mb(n,r),function(s){let a=S(s);a.Sa.forEach((u,c)=>{Eu(a.remoteStore,c)}),a.ba.mr(),a.Sa=new Map,a.wa=new me(b.comparator)}(n),n.Fa=!1,yield gv(n.remoteStore,!1)}})}function mb(t,e,n){return y(this,null,function*(){let r=S(t),i=[],o=[];for(let s of e){let a,u=r.pa.get(s);if(u&&u.length!==0){a=yield Jo(r.localStore,ht(u[0]));for(let c of u){let l=r.ga.get(c),d=yield a2(r,l);d.snapshot&&o.push(d.snapshot)}}else{let c=yield PA(r.localStore,s);a=yield Jo(r.localStore,c),yield c_(r,zA(c),s,!1,a.resumeToken)}i.push(a)}return r.fa.u_(o),i})}function zA(t){return zb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function d2(t){return function(n){return S(S(n).persistence).Li()}(S(t).localStore)}function h2(t,e,n,r){return y(this,null,function*(){let i=S(t);if(i.Fa)return void E("SyncEngine","Ignoring unexpected query state notification.");let o=i.pa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield RA(i.localStore,Hb(o[0])),a=fu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",He.EMPTY_BYTE_STRING);yield Kn(i,s,a);break}case"rejected":yield es(i.localStore,e,!0),ns(i,e,r);break;default:x()}})}function f2(t,e,n){return y(this,null,function*(){let r=f_(t);if(r.Fa){for(let i of e){if(r.pa.has(i)){E("SyncEngine","Adding an already active target "+i);continue}let o=yield PA(r.localStore,i),s=yield Jo(r.localStore,o);yield c_(r,zA(o),s.targetId,!1,s.resumeToken),wh(r.remoteStore,s)}for(let i of n)r.pa.has(i)&&(yield es(r.localStore,i,!1).then(()=>{Eu(r.remoteStore,i),ns(r,i)}).catch(Rr))}})}function f_(t){let e=S(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=BA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=s2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=e2.bind(null,e),e.fa.u_=QL.bind(null,e.eventManager),e.fa.xa=YL.bind(null,e.eventManager),e}function p_(t){let e=S(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=t2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=n2.bind(null,e),e}function p2(t,e,n){let r=S(t);(function(o,s,a){return y(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(f,_){let v=S(f),m=Re(_.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",I=>v.$r.getBundleMetadata(I,_.id)).then(I=>!!I&&I.createTime.compareTo(m)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(UA(u));let c=new wv(u,o.localStore,s.serializer),l=yield s.Oa();for(;l;){let h=yield c.na(l);h&&a._updateProgress(h),l=yield s.Oa()}let d=yield c.complete();return yield Kn(o,d.sa,void 0),yield function(f,_){let v=S(f);return v.persistence.runTransaction("Save bundle","readwrite",m=>v.$r.saveBundleMetadata(m,_))}(o.localStore,u),a._completeWith(d.progress),Promise.resolve(d.ia)}catch(u){return Lt("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Du=class{constructor(){this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){this.serializer=Pu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return AA(this.persistence,new Qd,e.initialUser,this.serializer)}createPersistence(e){return new Wd(Kd.Hr,this.serializer)}createSharedClientState(e){return new Jd}terminate(){return y(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var ch=class t extends Du{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){yield Oh(t.prototype,this,"initialize").call(this,e),yield this.Na.initialize(this,e),yield p_(this.Na.syncEngine),yield cs(this.Na.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return AA(this.persistence,new Qd,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new $y(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new sy(n,this.persistence);return new oy(e.asyncQueue,r)}createPersistence(e){let n=n_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Vt.withCacheSize(this.cacheSizeBytes):Vt.DEFAULT;return new nv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,OA(),Ed(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Jd}},Tv=class t extends ch{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return y(this,null,function*(){yield Oh(t.prototype,this,"initialize").call(this,e);let n=this.Na.syncEngine;this.sharedClientState instanceof ru&&(this.sharedClientState.syncEngine={Zs:c2.bind(null,n),Xs:h2.bind(null,n),eo:f2.bind(null,n),Li:d2.bind(null,n),Ys:u2.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>y(this,null,function*(){yield l2(this.Na.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=OA();if(!ru.D(n))throw new w(g.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=n_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ru(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Cu=class{initialize(e,n){return y(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=o2.bind(null,this.syncEngine),yield gv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new vv}()}createDatastore(e){let n=Pu(e.databaseInfo.databaseId),r=function(o){return new cv(o)}(e.databaseInfo);return function(o,s,a,u){return new hv(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new pv(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>gb(this.syncEngine,n,0),function(){return eh.D()?new eh:new av}())}createSyncEngine(e,n){return function(i,o,s,a,u,c,l){let d=new Dv(i,o,s,a,u,c);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return y(this,null,function*(){var e;yield function(r){return y(this,null,function*(){let i=S(r);E("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield us(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function yb(t,e=10240){let n=0;return{read(){return y(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return y(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var rs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):xe("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var bv=class{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new Ve,this.buffer=new Uint8Array,this.qa=function(){return new TextDecoder("utf-8")}(),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){return y(this,null,function*(){return this.metadata.promise})}Oa(){return y(this,null,function*(){return yield this.getMetadata(),this.Qa()})}Qa(){return y(this,null,function*(){let e=yield this.Ka();if(e===null)return null;let n=this.qa.decode(e),r=Number(n);isNaN(r)&&this.$a(`length string (${n}) is not valid number`);let i=yield this.Ua(r);return new _v(JSON.parse(i),e.length+r)})}Wa(){return this.buffer.findIndex(e=>e===123)}Ka(){return y(this,null,function*(){for(;this.Wa()<0&&!(yield this.Ga()););if(this.buffer.length===0)return null;let e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ua(e){return y(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ga())&&this.$a("Reached the end of bundle when more is expected.");let n=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){return y(this,null,function*(){let e=yield this.ka.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var Av=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new w(g.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return y(this,null,function*(){let s=S(i),a={documents:o.map(d=>gu(s.serializer,d))},u=yield s.vo("BatchGetDocuments",s.serializer.databaseId,ne.emptyPath(),a,o.length),c=new Map;u.forEach(d=>{let h=IL(s.serializer,d);c.set(h.key.toString(),h)});let l=[];return o.forEach(d=>{let h=c.get(d.toString());k(!!h),l.push(h)}),l})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new xr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=b.fromPath(r);this.mutations.push(new lu(i,this.precondition(i)))}),yield function(r,i){return y(this,null,function*(){let o=S(r),s={writes:i.map(a=>mu(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,ne.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw x();n=V.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new w(g.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(V.min())?Ae.exists(!1):Ae.updateTime(n):Ae.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(V.min()))throw new w(g.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ae.updateTime(n)}return Ae.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Sv=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.za=r.maxAttempts,this.jo=new wu(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo(()=>y(this,null,function*(){let e=new Av(this.datastore),n=this.Ja(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Ya(i)}))}).catch(r=>{this.Ya(r)})}))}Ja(e){try{let n=this.updateFunction(e);return!Au(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!oA(n)}return!1}};var Mv=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Fe.UNAUTHENTICATED,this.clientId=Cd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>y(this,null,function*(){E("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(E("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new w(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ve;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=ds(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Id(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield SA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function xv(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield g_(t);E("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>pb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>pb(e.remoteStore,i)),t._onlineComponents=e})}function qA(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function g_(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){E("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Id(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!qA(n))throw n;Lt("Error using user provided cache. Falling back to memory cache: "+n),yield Id(t,new Du)}}else E("FirestoreClient","Using default OfflineComponentProvider"),yield Id(t,new Du);return t._offlineComponents})}function Eh(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(E("FirestoreClient","Using user provided OnlineComponentProvider"),yield xv(t,t._uninitializedComponentsProvider._online)):(E("FirestoreClient","Using default OnlineComponentProvider"),yield xv(t,new Cu))),t._onlineComponents})}function HA(t){return g_(t).then(e=>e.persistence)}function m_(t){return g_(t).then(e=>e.localStore)}function GA(t){return Eh(t).then(e=>e.remoteStore)}function y_(t){return Eh(t).then(e=>e.syncEngine)}function g2(t){return Eh(t).then(e=>e.datastore)}function is(t){return y(this,null,function*(){let e=yield Eh(t),n=e.eventManager;return n.onListen=ZL.bind(null,e.syncEngine),n.onUnlisten=XL.bind(null,e.syncEngine),n})}function m2(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield HA(t),n=yield GA(t);return e.setNetworkEnabled(!0),function(i){let o=S(i);return o.v_.delete(0),Ru(o)}(n)}))}function y2(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield HA(t),n=yield GA(t);return e.setNetworkEnabled(!1),function(i){return y(this,null,function*(){let o=S(i);o.v_.add(0),yield us(o),o.x_.set("Offline")})}(n)}))}function v2(t,e){let n=new Ve;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o,s){return y(this,null,function*(){try{let a=yield function(c,l){let d=S(c);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,l))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new w(g.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=ds(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield m_(t),e,n)})),n.promise}function WA(t,e,n={}){let r=new Ve;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,u,c){let l=new rs({next:h=>{s.enqueueAndForget(()=>a_(o,d));let f=h.docs.has(a);!f&&h.fromCache?c.reject(new w(g.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&u.source==="server"?c.reject(new w(g.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Iu(as(a.path),l,{includeMetadataChanges:!0,Z_:!0});return s_(o,d)}(yield is(t),t.asyncQueue,e,n,r)})),r.promise}function _2(t,e){let n=new Ve;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o,s){return y(this,null,function*(){try{let a=yield Yd(i,o,!0),u=new uh(o,a.hs),c=u.ha(a.documents),l=u.applyChanges(c,!1);s.resolve(l.snapshot)}catch(a){let u=ds(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield m_(t),e,n)})),n.promise}function KA(t,e,n={}){let r=new Ve;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,u,c){let l=new rs({next:h=>{s.enqueueAndForget(()=>a_(o,d)),h.fromCache&&u.source==="server"?c.reject(new w(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Iu(a,l,{includeMetadataChanges:!0,Z_:!0});return s_(o,d)}(yield is(t),t.asyncQueue,e,n,r)})),r.promise}function w2(t,e){let n=new rs(e);return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o){S(i).K_.add(o),o.next()}(yield is(t),n)})),()=>{n.La(),t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o){S(i).K_.delete(o)}(yield is(t),n)}))}}function E2(t,e,n,r){let i=function(s,a){let u;return u=typeof s=="string"?aA().encode(s):s,function(l,d){return new bv(l,d)}(function(l,d){if(l instanceof Uint8Array)return yb(l,d);if(l instanceof ArrayBuffer)return yb(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,Pu(e));t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){p2(yield y_(t),i,r)}))}function I2(t,e){return t.asyncQueue.enqueue(()=>y(this,null,function*(){return function(r,i){let o=S(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield m_(t),e)}))}function QA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var vb=new Map;function v_(t,e,n){if(!n)throw new w(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function __(t,e,n,r){if(e===!0&&r===!0)throw new w(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _b(t){if(!b.isDocumentKey(t))throw new w(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wb(t){if(b.isDocumentKey(t))throw new w(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ih(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":x()}function re(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new w(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Ih(t);throw new w(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function YA(t,e){if(e<=0)throw new w(g.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var lh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new w(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new w(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ai=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new w(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new w(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Qm;switch(r.type){case"firstParty":return new Jm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new w(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=vb.get(n);r&&(E("ComponentProvider","Removing Datastore"),vb.delete(n),r.terminate())}(this),Promise.resolve()}};function ZA(t,e,n,r={}){var i;let o=(t=re(t,Ai))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Lt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Fe.MOCK_USER;else{a=G_(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new w(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Fe(c)}t._authCredentials=new Ym(new Dd(a,u))}}var Ze=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},fe=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new En(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},En=class t extends Ze{constructor(e,n,r){super(e,n,as(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new fe(this.firestore,null,new b(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function w_(t,e,...n){if(t=_e(t),v_("collection","path",e),t instanceof Ai){let r=ne.fromString(e,...n);return wb(r),new En(t,null,r)}{if(!(t instanceof fe||t instanceof En))throw new w(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ne.fromString(e,...n));return wb(r),new En(t.firestore,null,r)}}function XA(t,e){if(t=re(t,Ai),v_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new w(g.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ze(t,null,function(r){return new Zt(ne.emptyPath(),r)}(e))}function Nu(t,e,...n){if(t=_e(t),arguments.length===1&&(e=Cd.newId()),v_("doc","path",e),t instanceof Ai){let r=ne.fromString(e,...n);return _b(r),new fe(t,null,new b(r))}{if(!(t instanceof fe||t instanceof En))throw new w(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ne.fromString(e,...n));return _b(r),new fe(t.firestore,t instanceof En?t.converter:null,new b(r))}}function E_(t,e){return t=_e(t),e=_e(e),(t instanceof fe||t instanceof En)&&(e instanceof fe||e instanceof En)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function I_(t,e){return t=_e(t),e=_e(e),t instanceof Ze&&e instanceof Ze&&t.firestore===e.firestore&&Mu(t._query,e._query)&&t.converter===e.converter}var Pv=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new wu(this,"async_queue_retry"),this._u=()=>{let n=Ed();n&&E("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Ed();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=Ed();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new Ve;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return y(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Nr(e))throw e;E("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw xe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=mv.createAndSchedule(this,e,n,r,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&x()}verifyOperationInProgress(){}hu(){return y(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};function Rv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Nv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ve,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var JA=-1,ve=class extends Ai{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Pv}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||eS(this),this._firestoreClient.terminate()}};function Be(t){return t._firestoreClient||eS(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function eS(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,c,l){return new ay(a,u,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,QA(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Mv(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function tS(t,e){lS(t=re(t,ve));let n=Be(t);if(n._uninitializedComponentsProvider)throw new w(g.FAILED_PRECONDITION,"SDK cache is already specified.");Lt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Cu;return rS(n,i,new ch(i,r.cacheSizeBytes,e?.forceOwnership))}function nS(t){lS(t=re(t,ve));let e=Be(t);if(e._uninitializedComponentsProvider)throw new w(g.FAILED_PRECONDITION,"SDK cache is already specified.");Lt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Cu;return rS(e,r,new Tv(r,n.cacheSizeBytes))}function rS(t,e,n){let r=new Ve;return t.asyncQueue.enqueue(()=>y(this,null,function*(){try{yield Id(t,n),yield xv(t,e),r.resolve()}catch(i){let o=i;if(!qA(o))throw o;Lt("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function iS(t){if(t._initialized&&!t._terminated)throw new w(g.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Ve;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{yield function(r){return y(this,null,function*(){if(!zn.D())return Promise.resolve();let i=r+"main";yield zn.delete(i)})}(n_(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function oS(t){return function(n){let r=new Ve;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return r2(yield y_(n),r)})),r.promise}(Be(t=re(t,ve)))}function sS(t){return m2(Be(t=re(t,ve)))}function aS(t){return y2(Be(t=re(t,ve)))}function uS(t,e){let n=Be(t=re(t,ve)),r=new Nv;return E2(n,t._databaseId,e,r),r}function cS(t,e){return I2(Be(t=re(t,ve)),e).then(n=>n?new Ze(t,null,n.query):null)}function lS(t){if(t._initialized||t._terminated)throw new w(g.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Tn=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(He.fromBase64String(e))}catch(n){throw new w(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(He.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Jt=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new w(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Gn=class{constructor(e){this._methodName=e}};var Si=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new w(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new w(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return H(this._lat,e._lat)||H(this._long,e._long)}};var D2=/^__.*__$/,Ov=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xt(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mr(e,this.data,n,this.fieldTransforms)}},dh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xt(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function dS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw x()}}var hh=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return fh(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(dS(this.du)&&D2.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},kv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Pu(e)}Su(e,n,r,i=!1){return new hh({du:e,methodName:n,wu:r,path:Pe.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ri(t){let e=t._freezeSettings(),n=Pu(t._databaseId);return new kv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Dh(t,e,n,r,i,o={}){let s=t.Su(o.merge||o.mergeFields?2:0,e,n,i);T_("Data must be an object, but it was:",s,r);let a=pS(r,s),u,c;if(o.merge)u=new Tt(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let d of o.mergeFields){let h=Uv(e,d,n);if(!s.contains(h))throw new w(g.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);mS(l,h)||l.push(h)}u=new Tt(l),c=s.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=s.fieldTransforms;return new Ov(new st(a),u,c)}var Tu=class t extends Gn{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function hS(t,e,n){return new hh({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Fv=class t extends Gn{_toFieldTransform(e){return new Ci(e.path,new Ar)}isEqual(e){return e instanceof t}},Vv=class t extends Gn{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=hS(this,e,!0),r=this.bu.map(o=>Ni(o,n)),i=new qn(r);return new Ci(e.path,i)}isEqual(e){return e instanceof t&&Vh(this.bu,e.bu)}},Lv=class t extends Gn{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=hS(this,e,!0),r=this.bu.map(o=>Ni(o,n)),i=new Hn(r);return new Ci(e.path,i)}isEqual(e){return e instanceof t&&Vh(this.bu,e.bu)}},jv=class t extends Gn{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){let n=new Sr(e.serializer,Xb(e.serializer,this.Du));return new Ci(e.path,n)}isEqual(e){return e instanceof t&&this.Du===e.Du}};function D_(t,e,n,r){let i=t.Su(1,e,n);T_("Data must be an object, but it was:",i,r);let o=[],s=st.empty();Pi(r,(u,c)=>{let l=b_(e,u,n);c=_e(c);let d=i.fu(l);if(c instanceof Tu)o.push(l);else{let h=Ni(c,d);h!=null&&(o.push(l),s.set(l,h))}});let a=new Tt(o);return new dh(s,a,i.fieldTransforms)}function C_(t,e,n,r,i,o){let s=t.Su(1,e,n),a=[Uv(e,r,n)],u=[i];if(o.length%2!=0)throw new w(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(Uv(e,o[h])),u.push(o[h+1]);let c=[],l=st.empty();for(let h=a.length-1;h>=0;--h)if(!mS(c,a[h])){let f=a[h],_=u[h];_=_e(_);let v=s.fu(f);if(_ instanceof Tu)c.push(f);else{let m=Ni(_,v);m!=null&&(c.push(f),l.set(f,m))}}let d=new Tt(c);return new dh(l,d,s.fieldTransforms)}function fS(t,e,n,r=!1){return Ni(n,t.Su(r?4:3,e))}function Ni(t,e){if(gS(t=_e(t)))return T_("Unsupported field value:",e,t),pS(t,e);if(t instanceof Gn)return function(r,i){if(!dS(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Ni(a,i.gu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=_e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Xb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ie.fromDate(r);return{timestampValue:Yo(i.serializer,o)}}if(r instanceof Ie){let o=new Ie(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yo(i.serializer,o)}}if(r instanceof Si)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tn)return{bytesValue:uA(i.serializer,r._byteString)};if(r instanceof fe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Jv(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Ih(r)}`)}(t,e)}function pS(t,e){let n={};return Ob(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pi(t,(r,i)=>{let o=Ni(i,e.Ru(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function gS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ie||t instanceof Si||t instanceof Tn||t instanceof fe||t instanceof Gn)}function T_(t,e,n){if(!gS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Ih(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function Uv(t,e,n){if((e=_e(e))instanceof Jt)return e._internalPath;if(typeof e=="string")return b_(t,e);throw fh("Field path arguments must be of type string or ",t,!1,void 0,n)}var C2=new RegExp("[~\\*/\\[\\]]");function b_(t,e,n){if(e.search(C2)>=0)throw fh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jt(...e.split("."))._internalPath}catch{throw fh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new w(g.INVALID_ARGUMENT,a+t+u)}function mS(t,e){return t.some(n=>n.isEqual(e))}var Mi=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Bv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Ch("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Bv=class extends Mi{data(){return super.data()}};function Ch(t,e){return typeof e=="string"?b_(t,e):e instanceof Jt?e._internalPath:e._delegate._internalPath}function yS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new w(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bu=class{},xi=class extends bu{};function Qn(t,e,...n){let r=[];e instanceof bu&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof $v).length,a=o.filter(u=>u instanceof ph).length;if(s>1||s>0&&a>0)throw new w(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var ph=class t extends xi{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return AS(e._query,n),new Ze(e.firestore,e.converter,wy(e._query,n))}_parse(e){let n=Ri(e.firestore);return function(o,s,a,u,c,l,d){let h;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new w(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){Ib(d,l);let f=[];for(let _ of d)f.push(Eb(u,o,_));h={arrayValue:{values:f}}}else h=Eb(u,o,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||Ib(d,l),h=fS(a,s,d,l==="in"||l==="not-in");return X.create(c,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function vS(t,e,n){let r=e,i=Ch("where",t);return ph._create(i,r,n)}var $v=class t extends bu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ue.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)AS(s,u),s=wy(s,u)}(e._query,n),new Ze(e.firestore,e.converter,wy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var zv=class t extends xi{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new w(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new w(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ii(o,s)}(e._query,this._field,this._direction);return new Ze(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Zt(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function _S(t,e="asc"){let n=e,r=Ch("orderBy",t);return zv._create(r,n)}var gh=class t extends xi{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Ze(e.firestore,e.converter,Od(e._query,this._limit,this._limitType))}};function wS(t){return YA("limit",t),gh._create("limit",t,"F")}function ES(t){return YA("limitToLast",t),gh._create("limitToLast",t,"L")}var mh=class t extends xi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=bS(e,this.type,this._docOrFields,this._inclusive);return new Ze(e.firestore,e.converter,function(i,o){return new Zt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function IS(...t){return mh._create("startAt",t,!0)}function DS(...t){return mh._create("startAfter",t,!1)}var yh=class t extends xi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=bS(e,this.type,this._docOrFields,this._inclusive);return new Ze(e.firestore,e.converter,function(i,o){return new Zt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function CS(...t){return yh._create("endBefore",t,!1)}function TS(...t){return yh._create("endAt",t,!0)}function bS(t,e,n,r){if(n[0]=_e(n[0]),n[0]instanceof Mi)return function(o,s,a,u,c){if(!u)throw new w(g.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let d of $o(o))if(d.field.isKeyField())l.push(Ei(s,u.key));else{let h=u.data.field(d.field);if(_h(h))throw new w(g.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new w(g.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(h)}return new Dn(l,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Ri(t.firestore);return function(s,a,u,c,l,d){let h=s.explicitOrderBy;if(l.length>h.length)throw new w(g.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let _=0;_<l.length;_++){let v=l[_];if(h[_].field.isKeyField()){if(typeof v!="string")throw new w(g.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof v}`);if(!Zv(s)&&v.indexOf("/")!==-1)throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${v}' contains a slash.`);let m=s.path.child(ne.fromString(v));if(!b.isDocumentKey(m))throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${m}' is not because it contains an odd number of segments.`);let I=new b(m);f.push(Ei(a,I))}else{let m=fS(u,c,v);f.push(m)}}return new Dn(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Eb(t,e,n){if(typeof(n=_e(n))=="string"){if(n==="")throw new w(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zv(e)&&n.indexOf("/")!==-1)throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ne.fromString(n));if(!b.isDocumentKey(r))throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ei(t,new b(r))}if(n instanceof fe)return Ei(t,n._key);throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ih(n)}.`)}function Ib(t,e){if(!Array.isArray(t)||t.length===0)throw new w(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AS(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new w(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new w(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var os=class{convertValue(e,n="none"){switch(wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw x()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Pi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Si(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Qv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(au(e));default:return null}}convertTimestamp(e){let n=Dr(e);return new Ie(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ne.fromString(e);k(_A(r));let i=new Tr(r.get(1),r.get(3)),o=new b(r.popFirst(5));return i.isEqual(n)||xe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Th(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var qv=class extends os{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new fe(this.firestore,null,n)}};var $n=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ut=class extends Mi{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Er(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Ch("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Er=class extends Ut{data(e={}){return super.data(e)}},en=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new $n(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Er(this._firestore,this._userDataWriter,r.key,r,new $n(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new w(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Er(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $n(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Er(i._firestore,i._userDataWriter,a.doc.key,a.doc,new $n(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),c=-1,l=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:T2(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function T2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return x()}}function A_(t,e){return t instanceof Ut&&e instanceof Ut?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof en&&e instanceof en&&t._firestore===e._firestore&&I_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function SS(t){t=re(t,fe);let e=re(t.firestore,ve);return WA(Be(e),t._key).then(n=>P_(e,t,n))}var Wn=class extends os{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new fe(this.firestore,null,n)}};function MS(t){t=re(t,fe);let e=re(t.firestore,ve),n=Be(e),r=new Wn(e);return v2(n,t._key).then(i=>new Ut(e,r,t._key,i,new $n(i!==null&&i.hasLocalMutations,!0),t.converter))}function xS(t){t=re(t,fe);let e=re(t.firestore,ve);return WA(Be(e),t._key,{source:"server"}).then(n=>P_(e,t,n))}function PS(t){t=re(t,Ze);let e=re(t.firestore,ve),n=Be(e),r=new Wn(e);return yS(t._query),KA(n,t._query).then(i=>new en(e,r,t,i))}function RS(t){t=re(t,Ze);let e=re(t.firestore,ve),n=Be(e),r=new Wn(e);return _2(n,t._query).then(i=>new en(e,r,t,i))}function NS(t){t=re(t,Ze);let e=re(t.firestore,ve),n=Be(e),r=new Wn(e);return KA(n,t._query,{source:"server"}).then(i=>new en(e,r,t,i))}function S_(t,e,n){t=re(t,fe);let r=re(t.firestore,ve),i=Th(t.converter,e,n);return hs(r,[Dh(Ri(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ae.none())])}function M_(t,e,n,...r){t=re(t,fe);let i=re(t.firestore,ve),o=Ri(i),s;return s=typeof(e=_e(e))=="string"||e instanceof Jt?C_(o,"updateDoc",t._key,e,n,r):D_(o,"updateDoc",t._key,e),hs(i,[s.toMutation(t._key,Ae.exists(!0))])}function OS(t){return hs(re(t.firestore,ve),[new xr(t._key,Ae.none())])}function kS(t,e){let n=re(t.firestore,ve),r=Nu(t),i=Th(t.converter,e);return hs(n,[Dh(Ri(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ae.exists(!1))]).then(()=>r)}function x_(t,...e){var n,r,i;t=_e(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||Rv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(Rv(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let u,c,l;if(t instanceof fe)c=re(t.firestore,ve),l=as(t._key.path),u={next:d=>{e[s]&&e[s](P_(c,t,d))},error:e[s+1],complete:e[s+2]};else{let d=re(t,Ze);c=re(d.firestore,ve),l=d._query;let h=new Wn(c);u={next:f=>{e[s]&&e[s](new en(c,h,d,f))},error:e[s+1],complete:e[s+2]},yS(t._query)}return function(h,f,_,v){let m=new rs(v),I=new Iu(f,m,_);return h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return s_(yield is(h),I)})),()=>{m.La(),h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return a_(yield is(h),I)}))}}(Be(c),l,a,u)}function FS(t,e){return w2(Be(t=re(t,ve)),Rv(e)?e:{next:e})}function hs(t,e){return function(r,i){let o=new Ve;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return JL(yield y_(r),i,o)})),o.promise}(Be(t),e)}function P_(t,e,n){let r=n.docs.get(e._key),i=new Wn(t);return new Ut(t,i,e._key,r,new $n(n.hasPendingWrites,n.fromCache),e.converter)}var b2={maxAttempts:5};var vh=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ri(e)}set(e,n,r){this._verifyNotCommitted();let i=_r(e,this._firestore),o=Th(i.converter,n,r),s=Dh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ae.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=_r(e,this._firestore),s;return s=typeof(n=_e(n))=="string"||n instanceof Jt?C_(this._dataReader,"WriteBatch.update",o._key,n,r,i):D_(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Ae.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=_r(e,this._firestore);return this._mutations=this._mutations.concat(new xr(n._key,Ae.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new w(g.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function _r(t,e){if((t=_e(t)).firestore!==e)throw new w(g.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Hv=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ri(n)}get(n){let r=_r(n,this._firestore),i=new qv(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return x();let s=o[0];if(s.isFoundDocument())return new Mi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Mi(this._firestore,i,r._key,null,r.converter);throw x()})}set(n,r,i){let o=_r(n,this._firestore),s=Th(o.converter,r,i),a=Dh(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=_r(n,this._firestore),a;return a=typeof(r=_e(r))=="string"||r instanceof Jt?C_(this._dataReader,"Transaction.update",s._key,r,i,o):D_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=_r(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=_r(e,this._firestore),r=new Wn(this._firestore);return super.get(e).then(i=>new Ut(this._firestore,r,n._key,i._document,new $n(!1,!1),n.converter))}};function VS(t,e,n){t=re(t,ve);let r=Object.assign(Object.assign({},b2),n);return function(o){if(o.maxAttempts<1)throw new w(g.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new Ve;return o.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){let c=yield g2(o);new Sv(o.asyncQueue,c,a,s,u).ja()})),u.promise}(Be(t),i=>e(new Hv(t,i)),r)}function LS(){return new Tu("deleteField")}function jS(){return new Fv("serverTimestamp")}function US(...t){return new Vv("arrayUnion",t)}function BS(...t){return new Lv("arrayRemove",t)}function $S(t){return new jv("increment",t)}(function(e,n=!0){(function(i){ss=i})(Q_),ys(new kr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ve(new Zm(r.getProvider("auth-internal")),new ty(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new w(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tr(c.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Yn(CT,"4.4.2",e),Yn(CT,"4.4.2","esm2017")})();var A2="@firebase/firestore-compat",S2="0.3.25";function V_(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new w("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function zS(){if(typeof Uint8Array>"u")throw new w("unimplemented","Uint8Arrays are not available in this environment.")}function qS(){if(!kb())throw new w("unimplemented","Blobs are unavailable in Firestore in this environment.")}var bh=class t{constructor(e){this._delegate=e}static fromBase64String(e){return qS(),new t(Tn.fromBase64String(e))}static fromUint8Array(e){return zS(),new t(Tn.fromUint8Array(e))}toBase64(){return qS(),this._delegate.toBase64()}toUint8Array(){return zS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function R_(t){return M2(t,["next","error","complete"])}function M2(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var N_=class{enableIndexedDbPersistence(e,n){return tS(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return nS(e._delegate)}clearIndexedDbPersistence(e){return iS(e._delegate)}},Ah=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Tr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Lt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){ZA(this._delegate,e,n,r)}enableNetwork(){return sS(this._delegate)}disableNetwork(){return aS(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,__("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return oS(this._delegate)}onSnapshotsInSync(e){return FS(this._delegate,e)}get app(){if(!this._appCompat)throw new w("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gs(this,w_(this._delegate,e))}catch(n){throw ft(n,"collection()","Firestore.collection()")}}doc(e){try{return new bn(this,Nu(this._delegate,e))}catch(n){throw ft(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Vi(this,XA(this._delegate,e))}catch(n){throw ft(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return VS(this._delegate,n=>e(new Sh(this,n)))}batch(){return Be(this._delegate),new Mh(new vh(this._delegate,e=>hs(this._delegate,e)))}loadBundle(e){return uS(this._delegate,e)}namedQuery(e){return cS(this._delegate,e).then(n=>n?new Vi(this,n):null)}},fs=class extends os{constructor(e){super(),this.firestore=e}convertBytes(e){return new bh(new Tn(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return bn.forKey(n,this.firestore,null)}};function x2(t){Db(t)}var Sh=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new fs(e)}get(e){let n=Oi(e);return this._delegate.get(n).then(r=>new ki(this._firestore,new Ut(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=Oi(e);return r?(V_("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Oi(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Oi(e);return this._delegate.delete(n),this}},Mh=class{constructor(e){this._delegate=e}set(e,n,r){let i=Oi(e);return r?(V_("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Oi(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Oi(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},ps=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Er(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Fi(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new fs(e),n),i.set(n,o)),o}};ps.INSTANCES=new WeakMap;var bn=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new fs(e)}static forPath(e,n,r){if(e.length%2!==0)throw new w("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new fe(n._delegate,r,new b(e)))}static forKey(e,n,r){return new t(n,new fe(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new gs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gs(this.firestore,w_(this._delegate,e))}catch(n){throw ft(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=_e(e),e instanceof fe?E_(this._delegate,e):!1}set(e,n){n=V_("DocumentReference.set",n);try{return n?S_(this._delegate,e,n):S_(this._delegate,e)}catch(r){throw ft(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?M_(this._delegate,e):M_(this._delegate,e,n,...r)}catch(i){throw ft(i,"updateDoc()","DocumentReference.update()")}}delete(){return OS(this._delegate)}onSnapshot(...e){let n=HS(e),r=GS(e,i=>new ki(this.firestore,new Ut(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return x_(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=MS(this._delegate):e?.source==="server"?n=xS(this._delegate):n=SS(this._delegate),n.then(r=>new ki(this.firestore,new Ut(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ps.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ft(t,e,n){return t.message=t.message.replace(e,n),t}function HS(t){for(let e of t)if(typeof e=="object"&&!R_(e))return e;return{}}function GS(t,e){var n,r;let i;return R_(t[0])?i=t[0]:R_(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ki=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new bn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return A_(this._delegate,e._delegate)}},Fi=class extends ki{data(e){let n=this._delegate.data(e);return this._delegate._converter||Cb(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Vi=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new fs(e)}where(e,n,r){try{return new t(this.firestore,Qn(this._delegate,vS(e,n,r)))}catch(i){throw ft(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Qn(this._delegate,_S(e,n)))}catch(r){throw ft(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Qn(this._delegate,wS(e)))}catch(n){throw ft(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Qn(this._delegate,ES(e)))}catch(n){throw ft(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Qn(this._delegate,IS(...e)))}catch(n){throw ft(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Qn(this._delegate,DS(...e)))}catch(n){throw ft(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Qn(this._delegate,CS(...e)))}catch(n){throw ft(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Qn(this._delegate,TS(...e)))}catch(n){throw ft(n,"endAt()","Query.endAt()")}}isEqual(e){return I_(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=RS(this._delegate):e?.source==="server"?n=NS(this._delegate):n=PS(this._delegate),n.then(r=>new Ou(this.firestore,new en(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=HS(e),r=GS(e,i=>new Ou(this.firestore,new en(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return x_(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ps.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},O_=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Fi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Ou=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Vi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Fi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new O_(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Fi(this._firestore,r))})}isEqual(e){return A_(this._delegate,e._delegate)}},gs=class t extends Vi{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new bn(this.firestore,e):null}doc(e){try{return e===void 0?new bn(this.firestore,Nu(this._delegate)):new bn(this.firestore,Nu(this._delegate,e))}catch(n){throw ft(n,"doc()","CollectionReference.doc()")}}add(e){return kS(this._delegate,e).then(n=>new bn(this.firestore,n))}isEqual(e){return E_(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(ps.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Oi(t){return re(t,fe)}var k_=class t{constructor(...e){this._delegate=new Jt(...e)}static documentId(){return new t(Pe.keyField().canonicalString())}isEqual(e){return e=_e(e),e instanceof Jt?this._delegate._internalPath.isEqual(e._internalPath):!1}};var F_=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=jS();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=LS();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=US(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=BS(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=$S(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var P2={Firestore:Ah,GeoPoint:Si,Timestamp:Ie,Blob:bh,Transaction:Sh,WriteBatch:Mh,DocumentReference:bn,DocumentSnapshot:ki,Query:Vi,QueryDocumentSnapshot:Fi,QuerySnapshot:Ou,CollectionReference:gs,FieldPath:k_,FieldValue:F_,setLogLevel:x2,CACHE_SIZE_UNLIMITED:JA};function R2(t,e){t.INTERNAL.registerComponent(new kr("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},P2)))}function N2(t){R2(t,(e,n)=>new Ah(e,n,new N_)),t.registerVersion(A2,S2)}N2(at);function O2(t,e=Es){return new Z(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function WS(t,e){return O2(t,e)}function k2(t,e){return WS(t,e).pipe(Ur(void 0),Ds(),L(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function U_(t,e){return WS(t,e).pipe(L(n=>({payload:n,type:"query"})))}var xh=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=XS(r,n);return new Rh(i,o,this.afs)}snapshotChanges(){return k2(this.ref,this.afs.schedulers.outsideAngular).pipe(yt)}valueChanges(e={}){return this.snapshotChanges().pipe(L(({payload:n})=>e.idField?pe(N({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return ie(this.ref.get(e)).pipe(yt)}};function Ph(t,e){return U_(t,e).pipe(Ur(void 0),Ds(),L(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let c=o.find(d=>d.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function KS(t,e,n){return Ph(t,n).pipe(jr((r,i)=>F2(r,i.map(o=>o.payload),e),[]),nf(),L(r=>r.map(i=>({type:i.type,payload:i}))))}function F2(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=V2(t,r))}),t}function L_(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function V2(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return L_(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return L_(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return L_(t,e.oldIndex,1);break}return t}function QS(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Rh=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Ph(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(L(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Ur(void 0),Ds(),Ue(([r,i])=>i.length>0||!r),L(([,r])=>r),yt)}auditTrail(e){return this.stateChanges(e).pipe(jr((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=QS(e);return KS(this.query,n,this.afs.schedulers.outsideAngular).pipe(yt)}valueChanges(e={}){return U_(this.query,this.afs.schedulers.outsideAngular).pipe(L(n=>n.payload.docs.map(r=>e.idField?pe(N({},r.data()),{[e.idField]:r.id}):r.data())),yt)}get(e){return ie(this.query.get(e)).pipe(yt)}add(e){return this.ref.add(e)}doc(e){return new xh(this.ref.doc(e),this.afs)}},j_=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Ph(this.query,this.afs.schedulers.outsideAngular).pipe(yt):Ph(this.query,this.afs.schedulers.outsideAngular).pipe(L(n=>n.filter(r=>e.indexOf(r.type)>-1)),Ue(n=>n.length>0),yt)}auditTrail(e){return this.stateChanges(e).pipe(jr((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=QS(e);return KS(this.query,n,this.afs.schedulers.outsideAngular).pipe(yt)}valueChanges(e={}){return U_(this.query,this.afs.schedulers.outsideAngular).pipe(L(r=>r.payload.docs.map(i=>e.idField?N({[e.idField]:i.id},i.data()):i.data())),yt)}get(e){return ie(this.query.get(e)).pipe(yt)}},YS=new M("angularfire2.enableFirestorePersistence"),ZS=new M("angularfire2.firestore.persistenceSettings"),L2=new M("angularfire2.firestore.settings"),j2=new M("angularfire2.firestore.use-emulator");function XS(t,e=n=>n){return{query:e(t),ref:t}}var U2=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,c,l,d,h,f,_,v,m,I,P){this.schedulers=u;let T=Da(n,a,r),R=l;d&&Jg(T,a,h,_,v,m,f,I),[this.firestore,this.persistenceEnabled$]=Vl(`${T.name}.firestore`,"AngularFirestore",T.name,()=>{let j=a.runOutsideAngular(()=>T.firestore());if(o&&j.settings(o),R&&j.useEmulator(...R),i&&!ei(s)){let q=()=>{try{return ie(j.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(he){return typeof console<"u"&&console.warn(he),F(!1)}};return[j,a.runOutsideAngular(q)]}else return[j,F(!1)]},[o,R,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=XS(i,r),a=this.schedulers.ngZone.run(()=>o);return new Rh(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new j_(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new xh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(D(Do),D(Co,8),D(YS,8),D(L2,8),D(tt),D(J),D(Ol),D(ZS,8),D(j2,8),D(em,8),D(Wg,8),D(Kg,8),D(Qg,8),D(Yg,8),D(Zg,8),D(Xg,8),D(oi,8))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),JS=(()=>{class t{constructor(){at.registerVersion("angularfire",si.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:YS,useValue:!0},{provide:ZS,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ce({type:t});static \u0275inj=De({providers:[U2]})}return t})();var $2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},v3=pe(N({},$2),{"[class.ng-submitted]":"isSubmitted"});var z2=new M("CallSetDisabledState",{providedIn:"root",factory:()=>eM}),eM="always";var q2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({});let t=e;return t})();var tM=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:z2,useValue:r.callSetDisabledState??eM}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({imports:[q2]});let t=e;return t})();var nM={production:!1,firebaseConfig:{apiKey:"AIzaSyBjK6Iepet70a0ApWMjYkEA6Wcx10MBy3Q",authDomain:"bk-burger.firebaseapp.com",databaseURL:"https://bk-burger-default-rtdb.firebaseio.com",projectId:"bk-burger",storageBucket:"bk-burger.appspot.com",messagingSenderId:"586729585880",appId:"1:586729585880:web:b16e71013809bec688ebad",measurementId:"G-S6TJCELC9P"}};var rM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ce({type:e,bootstrap:[jD]}),e.\u0275inj=De({imports:[W0,LD,tC.initializeApp(nM.firebaseConfig),JS,nC,L0,tM]});let t=e;return t})();G0().bootstrapModule(rM).catch(t=>console.error(t));
