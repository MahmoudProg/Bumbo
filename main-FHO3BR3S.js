import{a as N,b as ge,c as kh,d as y,e as z_,f as Fu,g as q_,h as H_,i as G_,j as Fh,k as W_,l as ys,m as Vh,n as Vu,o as K_,p as Q_,q as Lh,r as we,s as Vr,t as tn,u as Lu,v as vs,w as Y_,x as Z_,y as Zn,z as st}from"./chunk-W354PV4M.js";var X_=null;var jh=1,J_=Symbol("SIGNAL");function Et(t){let e=X_;return X_=t,e}var ew={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function oM(t){if(!($h(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===jh)){if(!t.producerMustRecompute(t)&&!Uh(t)){t.dirty=!1,t.lastCleanEpoch=jh;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=jh}}function tw(t){return t&&(t.nextProducerIndex=0),Et(t)}function nw(t,e){if(Et(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if($h(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Bh(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Uh(t){ju(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(oM(n),r!==n.version))return!0}return!1}function rw(t){if(ju(t),$h(t))for(let e=0;e<t.producerNode.length;e++)Bh(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Bh(t,e){if(sM(t),ju(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Bh(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ju(i),i.producerIndexOfThis[r]=e}}function $h(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ju(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function sM(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function aM(){throw new Error}var uM=aM;function iw(t){uM=t}function $(t){return typeof t=="function"}function ji(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Uu=ji(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Lr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Se=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if($(r))try{r()}catch(o){e=o instanceof Uu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{ow(o)}catch(s){e=e??[],s instanceof Uu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Uu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ow(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Lr(n,e)}remove(e){let{_finalizers:n}=this;n&&Lr(n,e),e instanceof t&&e._removeParent(this)}};Se.EMPTY=(()=>{let t=new Se;return t.closed=!0,t})();var zh=Se.EMPTY;function Bu(t){return t instanceof Se||t&&"closed"in t&&$(t.remove)&&$(t.add)&&$(t.unsubscribe)}function ow(t){$(t)?t():t.unsubscribe()}var Bt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ui={setTimeout(t,e,...n){let{delegate:r}=Ui;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ui;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function $u(t){Ui.setTimeout(()=>{let{onUnhandledError:e}=Bt;if(e)e(t);else throw t})}function _s(){}var sw=qh("C",void 0,void 0);function aw(t){return qh("E",void 0,t)}function uw(t){return qh("N",t,void 0)}function qh(t,e,n){return{kind:t,value:e,error:n}}var jr=null;function Bi(t){if(Bt.useDeprecatedSynchronousErrorHandling){let e=!jr;if(e&&(jr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=jr;if(jr=null,n)throw r}}else t()}function cw(t){Bt.useDeprecatedSynchronousErrorHandling&&jr&&(jr.errorThrown=!0,jr.error=t)}var Ur=class extends Se{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Bu(e)&&e.add(this)):this.destination=dM}static create(e,n,r){return new Sn(e,n,r)}next(e){this.isStopped?Gh(uw(e),this):this._next(e)}error(e){this.isStopped?Gh(aw(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Gh(sw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},cM=Function.prototype.bind;function Hh(t,e){return cM.call(t,e)}var Wh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){zu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){zu(r)}else zu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){zu(n)}}},Sn=class extends Ur{constructor(e,n,r){super();let i;if($(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Bt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Hh(e.next,o),error:e.error&&Hh(e.error,o),complete:e.complete&&Hh(e.complete,o)}):i=e}this.destination=new Wh(i)}};function zu(t){Bt.useDeprecatedSynchronousErrorHandling?cw(t):$u(t)}function lM(t){throw t}function Gh(t,e){let{onStoppedNotification:n}=Bt;n&&Ui.setTimeout(()=>n(t,e))}var dM={closed:!0,next:_s,error:lM,complete:_s};var $i=typeof Symbol=="function"&&Symbol.observable||"@@observable";function at(t){return t}function Kh(...t){return Qh(t)}function Qh(t){return t.length===0?at:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Z=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=fM(n)?n:new Sn(n,r,i);return Bi(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=lw(r),new r((i,o)=>{let s=new Sn({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[$i](){return this}pipe(...n){return Qh(n)(this)}toPromise(n){return n=lw(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function lw(t){var e;return(e=t??Bt.Promise)!==null&&e!==void 0?e:Promise}function hM(t){return t&&$(t.next)&&$(t.error)&&$(t.complete)}function fM(t){return t&&t instanceof Ur||hM(t)&&Bu(t)}function Yh(t){return $(t?.lift)}function K(t){return e=>{if(Yh(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(t,e,n,r,i){return new Zh(t,e,n,r,i)}var Zh=class extends Ur{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function zi(){return K((t,e)=>{let n=null;t._refCount++;let r=Q(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var qi=class extends Z{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Yh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Se;let n=this.getSubject();e.add(this.source.subscribe(Q(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Se.EMPTY)}return e}refCount(){return zi()(this)}};var dw=ji(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class t extends Z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new qu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new dw}next(n){Bi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Bi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Bi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?zh:(this.currentObservers=null,o.push(n),new Se(()=>{this.currentObservers=null,Lr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Z;return n.source=this,n}}return t.create=(e,n)=>new qu(e,n),t})(),qu=class extends Ue{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:zh}};var Ke=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ws={now(){return(ws.delegate||Date).now()},delegate:void 0};var Hu=class extends Ue{constructor(e=1/0,n=1/0,r=ws){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Gu=class extends Se{constructor(e,n){super()}schedule(e,n=0){return this}};var Es={setInterval(t,e,...n){let{delegate:r}=Es;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Es;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Hi=class extends Gu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Es.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Es.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Lr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Gi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Gi.now=ws.now;var Wi=class extends Gi{constructor(e,n=Gi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Is=new Wi(Hi);var Wu=class extends Hi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ku=class extends Wi{};var Xh=new Ku(Wu);var gt=new Z(t=>t.complete());function hw(t){return t&&$(t.schedule)}function Jh(t){return t[t.length-1]}function fw(t){return $(Jh(t))?t.pop():void 0}function nn(t){return hw(Jh(t))?t.pop():void 0}function pw(t,e){return typeof Jh(t)=="number"?t.pop():e}var Qu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Yu(t){return $(t?.then)}function Zu(t){return $(t[$i])}function Xu(t){return Symbol.asyncIterator&&$(t?.[Symbol.asyncIterator])}function Ju(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function pM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ec=pM();function tc(t){return $(t?.[ec])}function nc(t){return q_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Fu(n.read());if(i)return yield Fu(void 0);yield yield Fu(r)}}finally{n.releaseLock()}})}function rc(t){return $(t?.getReader)}function Ee(t){if(t instanceof Z)return t;if(t!=null){if(Zu(t))return gM(t);if(Qu(t))return mM(t);if(Yu(t))return yM(t);if(Xu(t))return gw(t);if(tc(t))return vM(t);if(rc(t))return _M(t)}throw Ju(t)}function gM(t){return new Z(e=>{let n=t[$i]();if($(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function mM(t){return new Z(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function yM(t){return new Z(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,$u)})}function vM(t){return new Z(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function gw(t){return new Z(e=>{wM(t,e).catch(n=>e.error(n))})}function _M(t){return gw(nc(t))}function wM(t,e){var n,r,i,o;return z_(this,void 0,void 0,function*(){try{for(n=H_(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function mt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Mt(t,e=0){return K((n,r)=>{n.subscribe(Q(r,i=>mt(r,t,()=>r.next(i),e),()=>mt(r,t,()=>r.complete(),e),i=>mt(r,t,()=>r.error(i),e)))})}function $t(t,e=0){return K((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function mw(t,e){return Ee(t).pipe($t(e),Mt(e))}function yw(t,e){return Ee(t).pipe($t(e),Mt(e))}function vw(t,e){return new Z(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function _w(t,e){return new Z(n=>{let r;return mt(n,e,()=>{r=t[ec](),mt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>$(r?.return)&&r.return()})}function ic(t,e){if(!t)throw new Error("Iterable cannot be null");return new Z(n=>{mt(n,e,()=>{let r=t[Symbol.asyncIterator]();mt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function ww(t,e){return ic(nc(t),e)}function Ew(t,e){if(t!=null){if(Zu(t))return mw(t,e);if(Qu(t))return vw(t,e);if(Yu(t))return yw(t,e);if(Xu(t))return ic(t,e);if(tc(t))return _w(t,e);if(rc(t))return ww(t,e)}throw Ju(t)}function ie(t,e){return e?Ew(t,e):Ee(t)}function F(...t){let e=nn(t);return ie(t,e)}function Ki(t,e){let n=$(t)?t:()=>t,r=i=>i.error(n());return new Z(e?i=>e.schedule(r,0,i):r)}function ef(t){return!!t&&(t instanceof Z||$(t.lift)&&$(t.subscribe))}var Mn=ji(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function L(t,e){return K((n,r)=>{let i=0;n.subscribe(Q(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:EM}=Array;function IM(t,e){return EM(e)?t(...e):t(e)}function Iw(t){return L(e=>IM(t,e))}var{isArray:DM}=Array,{getPrototypeOf:CM,prototype:TM,keys:bM}=Object;function Dw(t){if(t.length===1){let e=t[0];if(DM(e))return{args:e,keys:null};if(AM(e)){let n=bM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function AM(t){return t&&typeof t=="object"&&CM(t)===TM}function Cw(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ds(...t){let e=nn(t),n=fw(t),{args:r,keys:i}=Dw(t);if(r.length===0)return ie([],e);let o=new Z(SM(r,e,i?s=>Cw(i,s):at));return n?o.pipe(Iw(n)):o}function SM(t,e,n=at){return r=>{Tw(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Tw(e,()=>{let c=ie(t[u],e),l=!1;c.subscribe(Q(r,d=>{o[u]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Tw(t,e,n){t?mt(n,t,e):e()}function bw(t,e,n,r,i,o,s,a){let u=[],c=0,l=0,d=!1,h=()=>{d&&!u.length&&!c&&e.complete()},f=v=>c<r?_(v):u.push(v),_=v=>{o&&e.next(v),c++;let m=!1;Ee(n(v,l++)).subscribe(Q(e,I=>{i?.(I),o?f(I):e.next(I)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;u.length&&c<r;){let I=u.shift();s?mt(e,s,()=>_(I)):_(I)}h()}catch(I){e.error(I)}}))};return t.subscribe(Q(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Oe(t,e,n=1/0){return $(e)?Oe((r,i)=>L((o,s)=>e(r,o,i,s))(Ee(t(r,i))),n):(typeof e=="number"&&(n=e),K((r,i)=>bw(r,i,t,n)))}function Xn(t=1/0){return Oe(at,t)}function Aw(){return Xn(1)}function Qi(...t){return Aw()(ie(t,nn(t)))}function oc(t){return new Z(e=>{Ee(t()).subscribe(e)})}function tf(...t){let e=nn(t),n=pw(t,1/0),r=t;return r.length?r.length===1?Ee(r[0]):Xn(n)(ie(r,e)):gt}function Be(t,e){return K((n,r)=>{let i=0;n.subscribe(Q(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Jn(t){return K((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Q(n,void 0,void 0,s=>{o=Ee(t(s,Jn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Sw(t,e,n,r,i){return(o,s)=>{let a=n,u=e,c=0;o.subscribe(Q(s,l=>{let d=c++;u=a?t(u,l,d):(a=!0,l),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function xn(t,e){return $(e)?Oe(t,e,1):Oe(t,1)}function er(t){return K((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Pn(t){return t<=0?()=>gt:K((e,n)=>{let r=0;e.subscribe(Q(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function nf(t){return L(()=>t)}function rf(t,e=at){return t=t??MM,K((n,r)=>{let i,o=!0;n.subscribe(Q(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function MM(t,e){return t===e}function sc(t=xM){return K((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function xM(){return new Mn}function tr(t){return K((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function xt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Be((i,o)=>t(i,o,r)):at,Pn(1),n?er(e):sc(()=>new Mn))}function Yi(t){return t<=0?()=>gt:K((e,n)=>{let r=[];e.subscribe(Q(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function of(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Be((i,o)=>t(i,o,r)):at,Yi(1),n?er(e):sc(()=>new Mn))}function Cs(){return K((t,e)=>{let n,r=!1;t.subscribe(Q(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function Br(t,e){return K(Sw(t,e,arguments.length>=2,!0))}function Mw(t={}){let{connector:e=()=>new Ue,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,u,c=0,l=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=u=void 0,l=d=!1},_=()=>{let v=s;f(),v?.unsubscribe()};return K((v,m)=>{c++,!d&&!l&&h();let I=u=u??e();m.add(()=>{c--,c===0&&!d&&!l&&(a=sf(_,i))}),I.subscribe(m),!s&&c>0&&(s=new Sn({next:P=>I.next(P),error:P=>{d=!0,h(),a=sf(f,n,P),I.error(P)},complete:()=>{l=!0,h(),a=sf(f,r),I.complete()}}),Ee(v).subscribe(s))})(o)}}function sf(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Sn({next:()=>{r.unsubscribe(),t()}});return Ee(e(...n)).subscribe(r)}function ac(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,Mw({connector:()=>new Hu(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function $r(...t){let e=nn(t);return K((n,r)=>{(e?Qi(t,n,e):Qi(t,n)).subscribe(r)})}function ve(t,e){return K((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Q(r,u=>{i?.unsubscribe();let c=0,l=o++;Ee(t(u,l)).subscribe(i=Q(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function uc(t,e){return $(e)?ve(()=>t,e):ve(()=>t)}function af(t){return K((e,n)=>{Ee(t).subscribe(Q(n,()=>n.complete(),_s)),!n.closed&&e.subscribe(n)})}function Me(t,e,n){let r=$(t)||e||n?{next:t,error:e,complete:n}:t;return r?K((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Q(o,u=>{var c;(c=r.next)===null||c===void 0||c.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,u),o.error(u)},()=>{var u,c;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):at}var U=class extends Error{constructor(e,n){super(Oc(e,n)),this.code=e}};function Oc(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function le(t){for(let e in t)if(t[e]===le)return e;throw Error("Could not find renamed property on target object.")}function yt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(yt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function xw(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var PM=le({__forward_ref__:le});function Yf(t){return t.__forward_ref__=Yf,t.toString=function(){return yt(this())},t}function Rt(t){return dE(t)?t():t}function dE(t){return typeof t=="function"&&t.hasOwnProperty(PM)&&t.__forward_ref__===Yf}function hE(t){return t&&!!t.\u0275providers}var RM=le({\u0275cmp:le}),NM=le({\u0275dir:le}),OM=le({\u0275pipe:le}),kM=le({\u0275mod:le}),mc=le({\u0275fac:le}),Ts=le({__NG_ELEMENT_ID__:le}),Pw=le({__NG_ENV_ID__:le});function FM(t){return typeof t=="string"?t:t==null?"":String(t)}function VM(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():FM(t)}function LM(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new U(-200,t)}function Zf(t,e){throw new U(-201,!1)}function O(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function De(t){return{providers:t.providers||[],imports:t.imports||[]}}function kc(t){return Rw(t,pE)||Rw(t,gE)}function fE(t){return kc(t)!==null}function Rw(t,e){return t.hasOwnProperty(e)?t[e]:null}function jM(t){let e=t&&(t[pE]||t[gE]);return e||null}function Nw(t){return t&&(t.hasOwnProperty(Ow)||t.hasOwnProperty(UM))?t[Ow]:null}var pE=le({\u0275prov:le}),Ow=le({\u0275inj:le}),gE=le({ngInjectableDef:le}),UM=le({ngInjectorDef:le}),Y=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Y||{}),yf;function mE(){return yf}function Pt(t){let e=yf;return yf=t,e}function yE(t,e,n){let r=kc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Y.Optional)return null;if(e!==void 0)return e;Zf(t,"Injector")}var It=globalThis;var M=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=O({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var BM={},As=BM,vf="__NG_DI_FLAG__",yc="ngTempTokenPath",$M="ngTokenPath",zM=/\n/gm,qM="\u0275",kw="__source",to;function HM(){return to}function nr(t){let e=to;return to=t,e}function GM(t,e=Y.Default){if(to===void 0)throw new U(-203,!1);return to===null?yE(t,void 0,e):to.get(t,e&Y.Optional?null:void 0,e)}function D(t,e=Y.Default){return(mE()||GM)(Rt(t),e)}function C(t,e=Y.Default){return D(t,Fc(e))}function Fc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function _f(t){let e=[];for(let n=0;n<t.length;n++){let r=Rt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,o=Y.Default;for(let s=0;s<r.length;s++){let a=r[s],u=WM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(D(i,o))}else e.push(D(r))}return e}function vE(t,e){return t[vf]=e,t.prototype[vf]=e,t}function WM(t){return t[vf]}function KM(t,e,n,r){let i=t[yc];throw e[kw]&&i.unshift(e[kw]),t.message=QM(`
`+t.message,i,n,r),t[$M]=i,t[yc]=null,t}function QM(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==qM?t.slice(2):t;let i=yt(e);if(Array.isArray(e))i=e.map(yt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):yt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(zM,`
  `)}`}function js(t){return{toString:t}.toString()}var _E=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(_E||{}),an=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(an||{}),Ss={},rn=[],Rn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Rn||{});function wE(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function wf(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];ZM(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function YM(t){return t===3||t===4||t===6}function ZM(t){return t.charCodeAt(0)===64}function Xf(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Fw(t,n,i,null,e[++r]):Fw(t,n,i,null,null))}}return t}function Fw(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var EE="ng-template";function XM(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&wE(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function IE(t){return t.type===4&&t.value!==EE}function JM(t,e,n){let r=t.type===4&&!n?EE:t.value;return e===r}function ex(t,e,n){let r=4,i=t.attrs||[],o=rx(i),s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!zt(r)&&!zt(u))return!1;if(s&&zt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!JM(t,u,n)||u===""&&e.length===1){if(zt(r))return!1;s=!0}}else{let c=r&8?u:e[++a];if(r&8&&t.attrs!==null){if(!XM(t.attrs,c,n)){if(zt(r))return!1;s=!0}continue}let l=r&8?"class":u,d=tx(l,i,IE(t),n);if(d===-1){if(zt(r))return!1;s=!0;continue}if(c!==""){let h;d>o?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&wE(f,c,0)!==-1||r&2&&c!==h){if(zt(r))return!1;s=!0}}}}return zt(r)||s}function zt(t){return(t&1)===0}function tx(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return ix(e,t)}function nx(t,e,n=!1){for(let r=0;r<e.length;r++)if(ex(t,e[r],n))return!0;return!1}function rx(t){for(let e=0;e<t.length;e++){let n=t[e];if(YM(n))return e}return t.length}function ix(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Vw(t,e){return t?":not("+e.trim()+")":e}function ox(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!zt(s)&&(e+=Vw(o,i),i=""),r=s,o=o||!zt(r);n++}return i!==""&&(e+=Vw(o,i)),e}function sx(t){return t.map(ox).join(",")}function ax(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!zt(i))break;i=o}r++}return{attrs:e,classes:n}}function ur(t){return js(()=>{let e=AE(t),n=ge(N({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===_E.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||an.Emulated,styles:t.styles||rn,_:null,schemas:t.schemas||null,tView:null,id:""});SE(n);let r=t.dependencies;return n.directiveDefs=jw(r,!1),n.pipeDefs=jw(r,!0),n.id=lx(n),n})}function ux(t){return ir(t)||DE(t)}function cx(t){return t!==null}function Ce(t){return js(()=>({type:t.type,bootstrap:t.bootstrap||rn,declarations:t.declarations||rn,imports:t.imports||rn,exports:t.exports||rn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Lw(t,e){if(t==null)return Ss;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Rn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Rn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function Us(t){return js(()=>{let e=AE(t);return SE(e),e})}function ir(t){return t[RM]||null}function DE(t){return t[NM]||null}function CE(t){return t[OM]||null}function TE(t){let e=ir(t)||DE(t)||CE(t);return e!==null?e.standalone:!1}function bE(t,e){let n=t[kM]||null;if(!n&&e===!0)throw new Error(`Type ${yt(t)} does not have '\u0275mod' property.`);return n}function AE(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ss,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||rn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Lw(t.inputs,e),outputs:Lw(t.outputs),debugInfo:null}}function SE(t){t.features?.forEach(e=>e(t))}function jw(t,e){if(!t)return null;let n=e?CE:ux;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(cx)}function lx(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Fn=0,ee=1,B=2,Je=3,qt=4,Ht=5,vc=6,Ms=7,Nn=8,io=9,or=10,Dt=11,xs=12,Uw=13,Bs=14,un=15,Vc=16,Zi=17,Ps=18,Lc=19,ME=20,rr=21,uf=22,qr=23,sr=25,xE=1;var Hr=7,_c=8,wc=9,Nt=10,Jf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Jf||{});function no(t){return Array.isArray(t)&&typeof t[xE]=="object"}function Vn(t){return Array.isArray(t)&&t[xE]===!0}function PE(t){return(t.flags&4)!==0}function jc(t){return t.componentOffset>-1}function ep(t){return(t.flags&1)===1}function $s(t){return!!t.template}function dx(t){return(t[B]&512)!==0}function oo(t,e){let n=t.hasOwnProperty(mc);return n?t[mc]:null}var Ef=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function RE(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function zs(){return NE}function NE(t){return t.type.prototype.ngOnChanges&&(t.setInput=fx),hx}zs.ngInherit=!0;function hx(){let t=kE(this),e=t?.current;if(e){let n=t.previous;if(n===Ss)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function fx(t,e,n,r,i){let o=this.declaredInputs[r],s=kE(t)||px(t,{previous:Ss,current:null}),a=s.current||(s.current={}),u=s.previous,c=u[o];a[o]=new Ef(c&&c.currentValue,n,u===Ss),RE(t,e,i,n)}var OE="__ngSimpleChanges__";function kE(t){return t[OE]||null}function px(t,e){return t[OE]=e}var Bw=null;var on=function(t,e,n){Bw?.(t,e,n)},gx="svg",mx="math",yx=!1;function vx(){return yx}function On(t){for(;Array.isArray(t);)t=t[Fn];return t}function Gt(t,e){return On(e[t.index])}function FE(t,e){return t.data[e]}function Qr(t,e){let n=e[t];return no(n)?n:n[Fn]}function tp(t){return(t[B]&128)===128}function _x(t){return Vn(t[Je])}function Ec(t,e){return e==null?null:t[e]}function VE(t){t[Zi]=0}function wx(t){t[B]&1024||(t[B]|=1024,tp(t)&&Rs(t))}function np(t){return!!(t[B]&9216||t[qr]?.dirty)}function If(t){np(t)?Rs(t):t[B]&64&&(vx()?(t[B]|=1024,Rs(t)):t[or].changeDetectionScheduler?.notify())}function Rs(t){t[or].changeDetectionScheduler?.notify();let e=Ns(t);for(;e!==null&&!(e[B]&8192||(e[B]|=8192,!tp(e)));)e=Ns(e)}function LE(t,e){if((t[B]&256)===256)throw new U(911,!1);t[rr]===null&&(t[rr]=[]),t[rr].push(e)}function Ex(t,e){if(t[rr]===null)return;let n=t[rr].indexOf(e);n!==-1&&t[rr].splice(n,1)}function Ns(t){let e=t[Je];return Vn(e)?e[Je]:e}var oe={lFrame:HE(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ix(){return oe.lFrame.elementDepthCount}function Dx(){oe.lFrame.elementDepthCount++}function Cx(){oe.lFrame.elementDepthCount--}function jE(){return oe.bindingsEnabled}function Tx(){return oe.skipHydrationRootTNode!==null}function bx(t){return oe.skipHydrationRootTNode===t}function Ax(){oe.skipHydrationRootTNode=null}function ut(){return oe.lFrame.lView}function uo(){return oe.lFrame.tView}function ln(){let t=UE();for(;t!==null&&t.type===64;)t=t.parent;return t}function UE(){return oe.lFrame.currentTNode}function Sx(){let t=oe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function qs(t,e){let n=oe.lFrame;n.currentTNode=t,n.isParent=e}function BE(){return oe.lFrame.isParent}function Mx(){oe.lFrame.isParent=!1}function xx(t){return oe.lFrame.bindingIndex=t}function Px(){return oe.lFrame.bindingIndex++}function Rx(){return oe.lFrame.inI18n}function Nx(t,e){let n=oe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Df(e)}function Ox(){return oe.lFrame.currentDirectiveIndex}function Df(t){oe.lFrame.currentDirectiveIndex=t}function $E(t){oe.lFrame.currentQueryIndex=t}function kx(t){let e=t[ee];return e.type===2?e.declTNode:e.type===1?t[Ht]:null}function zE(t,e,n){if(n&Y.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&Y.Host);)if(i=kx(o),i===null||(o=o[Bs],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=oe.lFrame=qE();return r.currentTNode=e,r.lView=t,!0}function rp(t){let e=qE(),n=t[ee];oe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function qE(){let t=oe.lFrame,e=t===null?null:t.child;return e===null?HE(t):e}function HE(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function GE(){let t=oe.lFrame;return oe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var WE=GE;function ip(){let t=GE();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Fx(){return oe.lFrame.selectedIndex}function Gr(t){oe.lFrame.selectedIndex=t}function Vx(){let t=oe.lFrame;return FE(t.tView,t.selectedIndex)}function Lx(){return oe.lFrame.currentNamespace}var KE=!0;function op(){return KE}function sp(t){KE=t}function jx(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=NE(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function ap(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function dc(t,e,n){QE(t,e,3,n)}function hc(t,e,n,r){(t[B]&3)===n&&QE(t,e,n,r)}function cf(t,e){let n=t[B];(n&3)===e&&(n&=16383,n+=1,t[B]=n)}function QE(t,e,n,r){let i=r!==void 0?t[Zi]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Zi]+=65536),(a<o||o==-1)&&(Ux(t,n,e,u),t[Zi]=(t[Zi]&4294901760)+u+2),u++}function $w(t,e){on(4,t,e);let n=Et(null);try{e.call(t)}finally{Et(n),on(5,t,e)}}function Ux(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[B]>>14<t[Zi]>>16&&(t[B]&3)===e&&(t[B]+=16384,$w(a,o)):$w(a,o)}var ro=-1,Os=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function Bx(t){return t instanceof Os}function $x(t){return(t.flags&8)!==0}function zx(t){return(t.flags&16)!==0}function YE(t){return t!==ro}function Ic(t){return t&32767}function qx(t){return t>>16}function Dc(t,e){let n=qx(t),r=e;for(;n>0;)r=r[Bs],n--;return r}var Cf=!0;function zw(t){let e=Cf;return Cf=t,e}var Hx=256,ZE=Hx-1,XE=5,Gx=0,sn={};function Wx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ts)&&(r=n[Ts]),r==null&&(r=n[Ts]=Gx++);let i=r&ZE,o=1<<i;e.data[t+(i>>XE)]|=o}function JE(t,e){let n=eI(t,e);if(n!==-1)return n;let r=e[ee];r.firstCreatePass&&(t.injectorIndex=e.length,lf(r.data,t),lf(e,null),lf(r.blueprint,null));let i=up(t,e),o=t.injectorIndex;if(YE(i)){let s=Ic(i),a=Dc(i,e),u=a[ee].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c]}return e[o+8]=i,o}function lf(t,e){t.push(0,0,0,0,0,0,0,0,e)}function eI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function up(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=oI(i),r===null)return ro;if(n++,i=i[Bs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ro}function Kx(t,e,n){Wx(t,e,n)}function tI(t,e,n){if(n&Y.Optional||t!==void 0)return t;Zf(e,"NodeInjector")}function nI(t,e,n,r){if(n&Y.Optional&&r===void 0&&(r=null),!(n&(Y.Self|Y.Host))){let i=t[io],o=Pt(void 0);try{return i?i.get(e,r,n&Y.Optional):yE(e,r,n&Y.Optional)}finally{Pt(o)}}return tI(r,e,n)}function rI(t,e,n,r=Y.Default,i){if(t!==null){if(e[B]&2048&&!(r&Y.Self)){let s=Jx(t,e,n,r,sn);if(s!==sn)return s}let o=iI(t,e,n,r,sn);if(o!==sn)return o}return nI(e,n,r,i)}function iI(t,e,n,r,i){let o=Zx(n);if(typeof o=="function"){if(!zE(e,t,r))return r&Y.Host?tI(i,n,r):nI(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&Y.Optional))Zf(n);else return s}finally{WE()}}else if(typeof o=="number"){let s=null,a=eI(t,e),u=ro,c=r&Y.Host?e[un][Ht]:null;for((a===-1||r&Y.SkipSelf)&&(u=a===-1?up(t,e):e[a+8],u===ro||!Hw(r,!1)?a=-1:(s=e[ee],a=Ic(u),e=Dc(u,e)));a!==-1;){let l=e[ee];if(qw(o,a,l.data)){let d=Qx(a,e,n,s,r,c);if(d!==sn)return d}u=e[a+8],u!==ro&&Hw(r,e[ee].data[a+8]===c)&&qw(o,a,e)?(s=l,a=Ic(u),e=Dc(u,e)):a=-1}}return i}function Qx(t,e,n,r,i,o){let s=e[ee],a=s.data[t+8],u=r==null?jc(a)&&Cf:r!=s&&(a.type&3)!==0,c=i&Y.Host&&o===a,l=Yx(a,s,n,u,c);return l!==null?ks(e,s,l,a):sn}function Yx(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,c=t.directiveEnd,l=o>>20,d=r?a:a+l,h=i?a+l:c;for(let f=d;f<h;f++){let _=s[f];if(f<u&&n===_||f>=u&&_.type===n)return f}if(i){let f=s[u];if(f&&$s(f)&&f.type===n)return u}return null}function ks(t,e,n,r){let i=t[n],o=e.data;if(Bx(i)){let s=i;s.resolving&&LM(VM(o[n]));let a=zw(s.canSeeViewProviders);s.resolving=!0;let u,c=s.injectImpl?Pt(s.injectImpl):null,l=zE(t,r,Y.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&jx(n,o[n],e)}finally{c!==null&&Pt(c),zw(a),s.resolving=!1,WE()}}return i}function Zx(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ts)?t[Ts]:void 0;return typeof e=="number"?e>=0?e&ZE:Xx:e}function qw(t,e,n){let r=1<<t;return!!(n[e+(t>>XE)]&r)}function Hw(t,e){return!(t&Y.Self)&&!(t&Y.Host&&e)}var zr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return rI(this._tNode,this._lView,e,Fc(r),n)}};function Xx(){return new zr(ln(),ut())}function Uc(t){return js(()=>{let e=t.prototype.constructor,n=e[mc]||Tf(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[mc]||Tf(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Tf(t){return dE(t)?()=>{let e=Tf(Rt(t));return e&&e()}:oo(t)}function Jx(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[B]&2048&&!(s[B]&512);){let a=iI(o,s,n,r|Y.Self,sn);if(a!==sn)return a;let u=o.parent;if(!u){let c=s[ME];if(c){let l=c.get(n,sn,r);if(l!==sn)return l}u=oI(s),s=s[Bs]}o=u}return i}function oI(t){let e=t[ee],n=e.type;return n===2?e.declTNode:n===1?t[Ht]:null}var cc="__parameters__";function eP(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function sI(t,e,n){return js(()=>{let r=eP(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,c,l){let d=u.hasOwnProperty(cc)?u[cc]:Object.defineProperty(u,cc,{value:[]})[cc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function tP(t){let e=It.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function nP(t){return typeof t=="function"}function cp(t,e){t.forEach(n=>Array.isArray(n)?cp(n,e):e(n))}function aI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Cc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Hs=vE(sI("Optional"),8);var uI=vE(sI("SkipSelf"),4);function rP(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(aP))}return o}return Tc.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(c=>{i.template=c}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let c=i.styles.length,l=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),s.push(r(d).then(f=>{a[c+h]=f,l.splice(l.indexOf(d),1),l.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(c=>{a.push(c),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>uP(o));e.push(u)}),oP(),Promise.all(e).then(()=>{})}var Tc=new Map,iP=new Set;function oP(){let t=Tc;return Tc=new Map,t}function sP(){return Tc.size===0}function aP(t){return typeof t=="string"?t:t.text()}function uP(t){iP.delete(t)}var so=new M(""),cI=new M("",-1),lI=new M(""),bc=class{get(e,n=As){if(n===As){let r=new Error(`NullInjectorError: No provider for ${yt(e)}!`);throw r.name="NullInjectorError",r}return n}};function Bc(t){return{\u0275providers:t}}function cP(...t){return{\u0275providers:dI(!0,t),\u0275fromNgModule:!0}}function dI(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return cp(e,s=>{let a=s;bf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&hI(i,o),n}function hI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];lp(i,o=>{e(o,r)})}}function bf(t,e,n,r){if(t=Rt(t),!t)return!1;let i=null,o=Nw(t),s=!o&&ir(t);if(!o&&!s){let u=t.ngModule;if(o=Nw(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of u)bf(c,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{cp(o.imports,l=>{bf(l,e,n,r)&&(c||=[],c.push(l))})}finally{}c!==void 0&&hI(c,e)}if(!a){let c=oo(i)||(()=>new i);e({provide:i,useFactory:c,deps:rn},i),e({provide:lI,useValue:i,multi:!0},i),e({provide:so,useValue:()=>D(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let c=t;lp(u,l=>{e(l,c)})}}else return!1;return i!==t&&t.providers!==void 0}function lp(t,e){for(let n of t)hE(n)&&(n=n.\u0275providers),Array.isArray(n)?lp(n,e):e(n)}var lP=le({provide:String,useValue:le});function fI(t){return t!==null&&typeof t=="object"&&lP in t}function dP(t){return!!(t&&t.useExisting)}function hP(t){return!!(t&&t.useFactory)}function Af(t){return typeof t=="function"}var $c=new M(""),fc={},fP={},df;function dp(){return df===void 0&&(df=new bc),df}var ct=class{},Fs=class extends ct{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mf(e,s=>this.processProvider(s)),this.records.set(cI,Xi(void 0,this)),i.has("environment")&&this.records.set(ct,Xi(void 0,this));let o=this.records.get($c);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(lI,rn,Y.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=nr(this),r=Pt(void 0),i;try{return e()}finally{nr(n),Pt(r)}}get(e,n=As,r=Y.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Pw))return e[Pw](this);r=Fc(r);let i,o=nr(this),s=Pt(void 0);try{if(!(r&Y.SkipSelf)){let u=this.records.get(e);if(u===void 0){let c=_P(e)&&kc(e);c&&this.injectableDefInScope(c)?u=Xi(Sf(e),fc):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&Y.Self?dp():this.parent;return n=r&Y.Optional&&n===As?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[yc]=a[yc]||[]).unshift(yt(e)),o)throw a;return KM(a,e,"R3InjectorError",this.source)}else throw a}finally{Pt(s),nr(o)}}resolveInjectorInitializers(){let e=nr(this),n=Pt(void 0),r;try{let i=this.get(so,rn,Y.Self);for(let o of i)o()}finally{nr(e),Pt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(yt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new U(205,!1)}processProvider(e){e=Rt(e);let n=Af(e)?e:Rt(e&&e.provide),r=gP(e);if(!Af(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Xi(void 0,fc,!0),i.factory=()=>_f(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===fc&&(n.value=fP,n.value=n.factory()),typeof n.value=="object"&&n.value&&vP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Rt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Sf(t){let e=kc(t),n=e!==null?e.factory:oo(t);if(n!==null)return n;if(t instanceof M)throw new U(204,!1);if(t instanceof Function)return pP(t);throw new U(204,!1)}function pP(t){if(t.length>0)throw new U(204,!1);let n=jM(t);return n!==null?()=>n.factory(t):()=>new t}function gP(t){if(fI(t))return Xi(void 0,t.useValue);{let e=mP(t);return Xi(e,fc)}}function mP(t,e,n){let r;if(Af(t)){let i=Rt(t);return oo(i)||Sf(i)}else if(fI(t))r=()=>Rt(t.useValue);else if(hP(t))r=()=>t.useFactory(..._f(t.deps||[]));else if(dP(t))r=()=>D(Rt(t.useExisting));else{let i=Rt(t&&(t.useClass||t.provide));if(yP(t))r=()=>new i(..._f(t.deps));else return oo(i)||Sf(i)}return r}function Xi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function yP(t){return!!t.deps}function vP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function _P(t){return typeof t=="function"||typeof t=="object"&&t instanceof M}function Mf(t,e){for(let n of t)Array.isArray(n)?Mf(n,e):n&&hE(n)?Mf(n.\u0275providers,e):e(n)}function dn(t,e){t instanceof Fs&&t.assertNotDestroyed();let n,r=nr(t),i=Pt(void 0);try{return e()}finally{nr(r),Pt(i)}}function wP(t){if(!mE()&&!HM())throw new U(-203,!1)}function Gw(t,e=null,n=null,r){let i=pI(t,e,n,r);return i.resolveInjectorInitializers(),i}function pI(t,e=null,n=null,r,i=new Set){let o=[n||rn,cP(t)];return r=r||(typeof t=="object"?void 0:yt(t)),new Fs(o,e||dp(),r||null,i)}var Wt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return Gw({name:""},i,r,"");{let o=r.name??"";return Gw({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=As,e.NULL=new bc,e.\u0275prov=O({token:e,providedIn:"any",factory:()=>D(cI)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var xf;function gI(t){xf=t}function EP(){if(xf!==void 0)return xf;if(typeof document<"u")return document;throw new U(210,!1)}var zc=new M("",{providedIn:"root",factory:()=>IP}),IP="ng",hp=new M(""),et=new M("",{providedIn:"platform",factory:()=>"unknown"});var fp=new M("",{providedIn:"root",factory:()=>EP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function mI(t){return t instanceof Function?t():t}function DP(t){return(t??C(Wt)).get(et)==="browser"}function yI(t){return(t.flags&128)===128}var Yr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Yr||{});var vI=new Map,CP=0;function TP(){return CP++}function bP(t){vI.set(t[Lc],t)}function AP(t){vI.delete(t[Lc])}var Ww="__ngContext__";function Wr(t,e){no(e)?(t[Ww]=e[Lc],bP(e)):t[Ww]=e}var SP;function pp(t,e){return SP(t,e)}function Ji(t,e,n,r,i){if(r!=null){let o,s=!1;Vn(r)?o=r:no(r)&&(s=!0,r=r[Fn]);let a=On(r);t===0&&n!==null?i==null?DI(e,n,a):Ac(e,n,a,i||null,!0):t===1&&n!==null?Ac(e,n,a,i||null,!0):t===2?qP(e,a,s):t===3&&e.destroyNode(a),o!=null&&GP(e,t,o,n,i)}}function MP(t,e){return t.createText(e)}function _I(t,e,n){return t.createElement(e,n)}function xP(t,e){wI(t,e),e[Fn]=null,e[Ht]=null}function PP(t,e,n,r,i,o){r[Fn]=i,r[Ht]=e,qc(t,r,n,1,i,o)}function wI(t,e){qc(t,e,e[Dt],2,null,null)}function RP(t){let e=t[xs];if(!e)return hf(t[ee],t);for(;e;){let n=null;if(no(e))n=e[xs];else{let r=e[Nt];r&&(n=r)}if(!n){for(;e&&!e[qt]&&e!==t;)no(e)&&hf(e[ee],e),e=e[Je];e===null&&(e=t),no(e)&&hf(e[ee],e),n=e&&e[qt]}e=n}}function NP(t,e,n,r){let i=Nt+r,o=n.length;r>0&&(n[i-1][qt]=e),r<o-Nt?(e[qt]=n[i],aI(n,Nt+r,e)):(n.push(e),e[qt]=null),e[Je]=n;let s=e[Vc];s!==null&&n!==s&&OP(s,e);let a=e[Ps];a!==null&&a.insertView(t),If(e),e[B]|=128}function OP(t,e){let n=t[wc],i=e[Je][Je][un];e[un]!==i&&(t[B]|=Jf.HasTransplantedViews),n===null?t[wc]=[e]:n.push(e)}function EI(t,e){let n=t[wc],r=n.indexOf(e);n.splice(r,1)}function Pf(t,e){if(t.length<=Nt)return;let n=Nt+e,r=t[n];if(r){let i=r[Vc];i!==null&&i!==t&&EI(i,r),e>0&&(t[n-1][qt]=r[qt]);let o=Cc(t,Nt+e);xP(r[ee],r);let s=o[Ps];s!==null&&s.detachView(o[ee]),r[Je]=null,r[qt]=null,r[B]&=-129}return r}function II(t,e){if(!(e[B]&256)){let n=e[Dt];n.destroyNode&&qc(t,e,n,3,null,null),RP(e)}}function hf(t,e){if(!(e[B]&256)){e[B]&=-129,e[B]|=256,e[qr]&&rw(e[qr]),FP(t,e),kP(t,e),e[ee].type===1&&e[Dt].destroy();let n=e[Vc];if(n!==null&&Vn(e[Je])){n!==e[Je]&&EI(n,e);let r=e[Ps];r!==null&&r.detachView(t)}AP(e)}}function kP(t,e){let n=t.cleanup,r=e[Ms];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Ms]=null);let i=e[rr];if(i!==null){e[rr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function FP(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Os)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];on(4,a,u);try{u.call(a)}finally{on(5,a,u)}}else{on(4,i,o);try{o.call(i)}finally{on(5,i,o)}}}}}function VP(t,e,n){return LP(t,e.parent,n)}function LP(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Fn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===an.None||o===an.Emulated)return null}return Gt(r,n)}}function Ac(t,e,n,r,i){t.insertBefore(e,n,r,i)}function DI(t,e,n){t.appendChild(e,n)}function Kw(t,e,n,r,i){r!==null?Ac(t,e,n,r,i):DI(t,e,n)}function jP(t,e,n,r){t.removeChild(e,n,r)}function gp(t,e){return t.parentNode(e)}function UP(t,e){return t.nextSibling(e)}function BP(t,e,n){return zP(t,e,n)}function $P(t,e,n){return t.type&40?Gt(t,n):null}var zP=$P,Qw;function mp(t,e,n,r){let i=VP(t,r,e),o=e[Dt],s=r.parent||e[Ht],a=BP(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Kw(o,i,n[u],a,!1);else Kw(o,i,n,a,!1);Qw!==void 0&&Qw(o,r,e,n,i)}function pc(t,e){if(e!==null){let n=e.type;if(n&3)return Gt(e,t);if(n&4)return Rf(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return pc(t,r);{let i=t[e.index];return Vn(i)?Rf(-1,i):On(i)}}else{if(n&32)return pp(e,t)()||On(t[e.index]);{let r=CI(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ns(t[un]);return pc(i,r)}else return pc(t,e.next)}}}return null}function CI(t,e){if(e!==null){let r=t[un][Ht],i=e.projection;return r.projection[i]}return null}function Rf(t,e){let n=Nt+t+1;if(n<e.length){let r=e[n],i=r[ee].firstChild;if(i!==null)return pc(r,i)}return e[Hr]}function qP(t,e,n){let r=gp(t,e);r&&jP(t,r,e,n)}function yp(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],u=n.type;if(s&&e===0&&(a&&Wr(On(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)yp(t,e,n.child,r,i,o,!1),Ji(e,t,i,a,o);else if(u&32){let c=pp(n,r),l;for(;l=c();)Ji(e,t,i,l,o);Ji(e,t,i,a,o)}else u&16?HP(t,e,r,n,i,o):Ji(e,t,i,a,o);n=s?n.projectionNext:n.next}}function qc(t,e,n,r,i,o){yp(n,r,t.firstChild,e,i,o,!1)}function HP(t,e,n,r,i,o){let s=n[un],u=s[Ht].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++){let l=u[c];Ji(e,t,i,l,o)}else{let c=u,l=s[Je];yI(r)&&(c.flags|=128),yp(t,e,c,l,i,o,!0)}}function GP(t,e,n,r,i){let o=n[Hr],s=On(n);o!==s&&Ji(e,t,r,o,i);for(let a=Nt;a<n.length;a++){let u=n[a];qc(u[ee],u,t,e,r,o)}}function WP(t,e,n){t.setAttribute(e,"style",n)}function TI(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function bI(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&wf(t,e,r),i!==null&&TI(t,e,i),o!==null&&WP(t,e,o)}var Nf=class{};var KP="h",QP="b";var YP=()=>null;function vp(t,e,n=!1){return YP(t,e,n)}var Of=class{},Sc=class{};function ZP(t){let e=Error(`No component factory found for ${yt(t)}.`);return e[XP]=t,e}var XP="ngComponent";var kf=class{resolveComponentFactory(e){throw ZP(e)}},Hc=(()=>{let e=class e{};e.NULL=new kf;let t=e;return t})();function JP(){return Gc(ln(),ut())}function Gc(t,e){return new Gs(Gt(t,e))}var Gs=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=JP;let t=e;return t})();var Vs=class{};var eR=(()=>{let e=class e{};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),ff={};function Mc(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(On(o)),Vn(o)&&tR(o,r);let s=n.type;if(s&8)Mc(t,e,n.child,r);else if(s&32){let a=pp(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=CI(e,n);if(Array.isArray(a))r.push(...a);else{let u=Ns(e[un]);Mc(u[ee],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function tR(t,e){for(let n=Nt;n<t.length;n++){let r=t[n],i=r[ee].firstChild;i!==null&&Mc(r[ee],r,i,e)}t[Hr]!==t[Fn]&&e.push(t[Hr])}var AI=[];function nR(t){return t[qr]??rR(t)}function rR(t){let e=AI.pop()??Object.create(oR);return e.lView=t,e}function iR(t){t.lView[qr]!==t&&(t.lView=null,AI.push(t))}var oR=ge(N({},ew),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Rs(t.lView)},consumerOnSignalRead(){this.lView[qr]=this}});function SI(t){return xI(t[xs])}function MI(t){return xI(t[qt])}function xI(t){for(;t!==null&&!Vn(t);)t=t[qt];return t}var sR="ngOriginalError";function pf(t){return t[sR]}var cn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&pf(e);for(;n&&pf(n);)n=pf(n);return n||null}},PI=new M("",{providedIn:"root",factory:()=>C(cn).handleError.bind(void 0)});var RI=!1,aR=new M("",{providedIn:"root",factory:()=>RI});var NI={};function uR(t,e,n,r){if(!r)if((e[B]&3)===3){let o=t.preOrderCheckHooks;o!==null&&dc(e,o,n)}else{let o=t.preOrderHooks;o!==null&&hc(e,o,0,n)}Gr(n)}function hn(t,e=Y.Default){let n=ut();if(n===null)return D(t,e);let r=ln();return rI(r,n,Rt(t),e)}function OI(){let t="invalid";throw new Error(t)}function kI(t,e,n,r,i,o){let s=Et(null);try{let a=null;i&Rn.SignalBased&&(a=e[r][J_]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Rn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):RE(e,a,r,o)}finally{Et(s)}}function cR(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Gr(~i);else{let o=i,s=n[++r],a=n[++r];Nx(s,o);let u=e[o];a(2,u)}}}finally{Gr(-1)}}function Wc(t,e,n,r,i,o,s,a,u,c,l){let d=e.blueprint.slice();return d[Fn]=i,d[B]=r|4|128|8|64,(c!==null||t&&t[B]&2048)&&(d[B]|=2048),VE(d),d[Je]=d[Bs]=t,d[Nn]=n,d[or]=s||t&&t[or],d[Dt]=a||t&&t[Dt],d[io]=u||t&&t[io]||null,d[Ht]=o,d[Lc]=TP(),d[vc]=l,d[ME]=c,d[un]=e.type==2?t[un]:d,d}function Kc(t,e,n,r,i){let o=t.data[e];if(o===null)o=lR(t,e,n,r,i),Rx()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Sx();o.injectorIndex=s===null?-1:s.injectorIndex}return qs(o,!0),o}function lR(t,e,n,r,i){let o=UE(),s=BE(),a=s?o:o&&o.parent,u=t.data[e]=gR(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function FI(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function VI(t,e,n,r,i){let o=Fx(),s=r&2;try{Gr(-1),s&&e.length>sr&&uR(t,e,sr,!1),on(s?2:0,i),n(r,i)}finally{Gr(o),on(s?3:1,i)}}function LI(t,e,n){if(PE(e)){let r=Et(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Et(r)}}}function jI(t,e,n){jE()&&(IR(t,e,n,Gt(n,e)),(n.flags&64)===64&&qI(t,e,n))}function UI(t,e,n=Gt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function BI(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=_p(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function _p(t,e,n,r,i,o,s,a,u,c,l){let d=sr+r,h=d+i,f=dR(d,h),_=typeof c=="function"?c():c;return f[ee]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:_,incompleteFirstPass:!1,ssrId:l}}function dR(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:NI);return n}function hR(t,e,n,r){let o=r.get(aR,RI)||n===an.ShadowDom,s=t.selectRootElement(e,o);return fR(s),s}function fR(t){pR(t)}var pR=()=>null;function gR(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Tx()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Yw(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Rn.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}t===0?Zw(r,n,c,a,u):Zw(r,n,c,a)}return r}function Zw(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function mR(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],u=null,c=null;for(let l=r;l<i;l++){let d=o[l],h=n?n.get(d):null,f=h?h.inputs:null,_=h?h.outputs:null;u=Yw(0,d.inputs,l,u,f),c=Yw(1,d.outputs,l,c,_);let v=u!==null&&s!==null&&!IE(e)?PR(u,l,s):null;a.push(v)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}function yR(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function vR(t,e,n,r,i,o,s,a){let u=Gt(e,n),c=e.inputs,l;!a&&c!=null&&(l=c[r])?(wp(t,n,l,r,i),jc(e)&&_R(n,e.index)):e.type&3?(r=yR(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function _R(t,e){let n=Qr(e,t);n[B]&16||(n[B]|=64)}function $I(t,e,n,r){if(jE()){let i=r===null?null:{"":-1},o=CR(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&zI(t,e,n,s,i,a),i&&TR(n,r,i)}n.mergedAttrs=Xf(n.mergedAttrs,n.attrs)}function zI(t,e,n,r,i,o){for(let c=0;c<r.length;c++)Kx(JE(n,e),t,r[c].type);AR(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let l=r[c];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,u=FI(t,e,r.length,null);for(let c=0;c<r.length;c++){let l=r[c];n.mergedAttrs=Xf(n.mergedAttrs,l.hostAttrs),SR(t,n,e,u,l),bR(u,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}mR(t,n,o)}function wR(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;ER(s)!=a&&s.push(a),s.push(n,r,o)}}function ER(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function IR(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;jc(n)&&MR(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||JE(n,e),Wr(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let u=t.data[a],c=ks(e,t,a,n);if(Wr(c,e),s!==null&&xR(e,a-i,c,u,n,s),$s(u)){let l=Qr(n.index,e);l[Nn]=ks(e,t,a,n)}}}function qI(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ox();try{Gr(o);for(let a=r;a<i;a++){let u=t.data[a],c=e[a];Df(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&DR(u,c)}}finally{Gr(-1),Df(s)}}function DR(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function CR(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(nx(e,s.selectors,!1))if(r||(r=[]),$s(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Ff(t,e,u)}else r.unshift(s),Ff(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Ff(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function TR(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new U(-301,!1);r.push(e[i],o)}}}function bR(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;$s(e)&&(n[""]=t)}}function AR(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function SR(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=oo(i.type,!0)),s=new Os(o,$s(i),hn);t.blueprint[r]=s,n[r]=s,wR(t,e,r,FI(t,n,i.hostVars,NI),i)}function MR(t,e,n){let r=Gt(e,t),i=BI(n),o=t[or].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Qc(t,Wc(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function xR(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],c=s[a++],l=s[a++],d=s[a++];kI(r,n,u,c,l,d)}}function PR(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function HI(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function GI(t,e){let n=t.contentQueries;if(n!==null){let r=Et(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];$E(o),a.contentQueries(2,e[s],s)}}}finally{Et(r)}}}function Qc(t,e){return t[xs]?t[Uw][qt]=e:t[xs]=e,t[Uw]=e,e}function Vf(t,e,n){$E(0);let r=Et(null);try{e(t,n)}finally{Et(r)}}function RR(t){return t[Ms]||(t[Ms]=[])}function NR(t){return t.cleanup||(t.cleanup=[])}function WI(t,e){let n=t[io],r=n?n.get(cn,null):null;r&&r.handleError(e)}function wp(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],u=n[o++],c=e[s],l=t.data[s];kI(l,c,r,a,u,i)}}var KI=100;function QI(t,e=!0,n=0){let r=t[or],i=r.rendererFactory,o=!1;o||i.begin?.();try{OR(t,n)}catch(s){throw e&&WI(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function OR(t,e){Lf(t,e);let n=0;for(;np(t);){if(n===KI)throw new U(103,!1);n++,Lf(t,1)}}function kR(t,e,n,r){let i=e[B];if((i&256)===256)return;let o=!1;!o&&e[or].inlineEffectRunner?.flush(),rp(e);let s=null,a=null;!o&&FR(t)&&(a=nR(e),s=tw(a));try{VE(e),xx(t.bindingStartIndex),n!==null&&VI(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let d=t.preOrderCheckHooks;d!==null&&dc(e,d,null)}else{let d=t.preOrderHooks;d!==null&&hc(e,d,0,null),cf(e,0)}if(VR(e),YI(e,0),t.contentQueries!==null&&GI(t,e),!o)if(u){let d=t.contentCheckHooks;d!==null&&dc(e,d)}else{let d=t.contentHooks;d!==null&&hc(e,d,1),cf(e,1)}cR(t,e);let c=t.components;c!==null&&XI(e,c,0);let l=t.viewQuery;if(l!==null&&Vf(2,l,r),!o)if(u){let d=t.viewCheckHooks;d!==null&&dc(e,d)}else{let d=t.viewHooks;d!==null&&hc(e,d,2),cf(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[uf]){for(let d of e[uf])d();e[uf]=null}o||(e[B]&=-73)}catch(u){throw Rs(e),u}finally{a!==null&&(nw(a,s),iR(a)),ip()}}function FR(t){return t.type!==2}function YI(t,e){for(let n=SI(t);n!==null;n=MI(n))for(let r=Nt;r<n.length;r++){let i=n[r];ZI(i,e)}}function VR(t){for(let e=SI(t);e!==null;e=MI(e)){if(!(e[B]&Jf.HasTransplantedViews))continue;let n=e[wc];for(let r=0;r<n.length;r++){let i=n[r],o=i[Je];wx(i)}}}function LR(t,e,n){let r=Qr(e,t);ZI(r,n)}function ZI(t,e){tp(t)&&Lf(t,e)}function Lf(t,e){let r=t[ee],i=t[B],o=t[qr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Uh(o)),o&&(o.dirty=!1),t[B]&=-9217,s)kR(r,t,r.template,t[Nn]);else if(i&8192){YI(t,1);let a=r.components;a!==null&&XI(t,a,1)}}function XI(t,e,n){for(let r=0;r<e.length;r++)LR(t,e[r],n)}function Ep(t){for(t[or].changeDetectionScheduler?.notify();t;){t[B]|=64;let e=Ns(t);if(dx(t)&&!e)return t;t=e}return null}var Kr=class{get rootNodes(){let e=this._lView,n=e[ee];return Mc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nn]}set context(e){this._lView[Nn]=e}get destroyed(){return(this._lView[B]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Je];if(Vn(e)){let n=e[_c],r=n?n.indexOf(this):-1;r>-1&&(Pf(e,r),Cc(n,r))}this._attachedToViewContainer=!1}II(this._lView[ee],this._lView)}onDestroy(e){LE(this._lView,e)}markForCheck(){Ep(this._cdRefInjectingView||this._lView)}detach(){this._lView[B]&=-129}reattach(){If(this._lView),this._lView[B]|=128}detectChanges(){this._lView[B]|=1024,QI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,wI(this._lView[ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e,If(this._lView)}},Ws=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=jR;let t=e;return t})();function jR(t){return UR(ln(),ut(),(t&16)===16)}function UR(t,e,n){if(jc(t)&&!n){let r=Qr(t.index,e);return new Kr(r,r)}else if(t.type&47){let r=e[un];return new Kr(r,e)}return null}var JI=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=BR,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),jf=class extends JI{constructor(e){super(),this._lView=e}onDestroy(e){return LE(this._lView,e),()=>Ex(this._lView,e)}};function BR(){return new jf(ut())}var Xw=new Set;function Yc(t){Xw.has(t)||(Xw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Uf=class extends Ue{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=gf(o),i&&(i=gf(i)),s&&(s=gf(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Se&&e.add(a),a}};function gf(t){return e=>{setTimeout(t,void 0,e)}}var Xe=Uf;function Jw(...t){}function $R(){let t=typeof It.requestAnimationFrame=="function",e=It[t?"requestAnimationFrame":"setTimeout"],n=It[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var J=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1),typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=$R().nativeRequestAnimationFrame,HR(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new U(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,zR,Jw,Jw);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},zR={};function Ip(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function qR(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(It,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Bf(t),t.isCheckStableRunning=!0,Ip(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Bf(t))}function HR(t){let e=()=>{qR(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(GR(a))return n.invokeTask(i,o,s,a);try{return eE(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),tE(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return eE(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),tE(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Bf(t),Ip(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Bf(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function eE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function tE(t){t._nesting--,Ip(t)}var $f=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function GR(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function WR(t="zone.js",e){return t==="noop"?new $f:t==="zone.js"?new J(e):t}var eo=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(eo||{}),KR={destroy(){}};function Dp(t,e){!e&&wP(Dp);let n=e?.injector??C(Wt);if(!DP(n))return KR;Yc("NgAfterNextRender");let r=n.get(Cp),i=r.handler??=new qf,o=e?.phase??eo.MixedReadWrite,s=()=>{i.unregister(u),a()},a=n.get(JI).onDestroy(s),u=new zf(n,o,()=>{s(),t()});return i.register(u),{destroy:s}}var zf=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(J),this.errorHandler=e.get(cn,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},qf=class{constructor(){this.executingCallbacks=!1,this.buckets={[eo.EarlyRead]:new Set,[eo.Write]:new Set,[eo.MixedReadWrite]:new Set,[eo.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Cp=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i();this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function QR(t,e){let n=Qr(e,t),r=n[ee];YR(r,n);let i=n[Fn];i!==null&&n[vc]===null&&(n[vc]=vp(i,n[io])),Tp(r,n,n[Nn])}function YR(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Tp(t,e,n){rp(e);try{let r=t.viewQuery;r!==null&&Vf(1,r,n);let i=t.template;i!==null&&VI(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&GI(t,e),t.staticViewQueries&&Vf(2,t.viewQuery,n);let o=t.components;o!==null&&ZR(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[B]&=-5,ip()}}function ZR(t,e){for(let n=0;n<e.length;n++)QR(t,e[n])}function Hf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=xw(i,a);else if(o==2){let u=a,c=e[++s];r=xw(r,u+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var xc=class extends Hc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ir(e);return new ao(n,this.ngModule)}};function nE(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function XR(t){let e=t.toLowerCase();return e==="svg"?gx:e==="math"?mx:null}var Gf=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Fc(r);let i=this.injector.get(e,ff,r);return i!==ff||n===ff?i:this.parentInjector.get(e,n,r)}},ao=class extends Sc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=nE(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return nE(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=sx(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let o=i instanceof ct?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let s=o?new Gf(e,o):e,a=s.get(Vs,null);if(a===null)throw new U(407,!1);let u=s.get(eR,null),c=s.get(Cp,null),l=s.get(Nf,null),d={rendererFactory:a,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",_=r?hR(h,r,this.componentDef.encapsulation,s):_I(h,f,XR(f)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let m=null;_!==null&&(m=vp(_,s,!0));let I=_p(0,null,null,1,0,null,null,null,null,null,null),P=Wc(null,I,null,v,null,null,d,h,s,null,m);rp(P);let T,R;try{let j=this.componentDef,q,he=null;j.findHostDirectiveDefs?(q=[],he=new Map,j.findHostDirectiveDefs(j,q,he),q.push(j)):q=[j];let St=JR(P,_),Oh=eN(St,_,j,q,P,d,h);R=FE(I,sr),_&&rN(h,j,_,r),n!==void 0&&iN(R,this.ngContentSelectors,n),T=nN(Oh,j,q,he,P,[oN]),Tp(I,P,null)}finally{ip()}return new Wf(this.componentType,T,Gc(R,P),P,R)}},Wf=class extends Of{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Kr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;wp(o[ee],o,i,e,n),this.previousInputValues.set(e,n);let s=Qr(this._tNode.index,o);Ep(s)}}get injector(){return new zr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function JR(t,e){let n=t[ee],r=sr;return t[r]=e,Kc(n,r,2,"#host",null)}function eN(t,e,n,r,i,o,s){let a=i[ee];tN(r,t,e,s);let u=null;e!==null&&(u=vp(e,i[io]));let c=o.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Wc(i,BI(n),null,l,i[t.index],t,o,c,null,null,u);return a.firstCreatePass&&Ff(a,t,r.length-1),Qc(i,d),i[t.index]=d}function tN(t,e,n,r){for(let i of t)e.mergedAttrs=Xf(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Hf(e,e.mergedAttrs,!0),n!==null&&bI(r,n,e))}function nN(t,e,n,r,i,o){let s=ln(),a=i[ee],u=Gt(s,i);zI(a,i,s,n,null,r);for(let l=0;l<n.length;l++){let d=s.directiveStart+l,h=ks(i,a,d,s);Wr(h,i)}qI(a,i,s),u&&Wr(u,i);let c=ks(i,a,s.directiveStart+s.componentOffset,s);if(t[Nn]=i[Nn]=c,o!==null)for(let l of o)l(c,e);return LI(a,s,t),c}function rN(t,e,n,r){if(r)wf(t,n,["ng-version","17.1.3"]);else{let{attrs:i,classes:o}=ax(e.selectors[0]);i&&wf(t,n,i),o&&o.length>0&&TI(t,n,o.join(" "))}}function iN(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function oN(){let t=ln();ap(ut()[ee],t)}var Bz=new RegExp(`^(\\d+)*(${QP}|${KP})*(.*)`);var sN=()=>null;function rE(t,e){return sN(t,e)}function aN(t,e,n,r){let i=e.tView,s=t[B]&4096?4096:16,a=Wc(t,i,n,s,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),u=t[e.index];a[Vc]=u;let c=t[Ps];return c!==null&&(a[Ps]=c.createEmbeddedView(i)),Tp(i,a,n),a}function iE(t,e){return!e||e.firstChild===null||yI(t)}function uN(t,e,n,r=!0){let i=e[ee];if(NP(i,e,t,n),r){let s=Rf(n,t),a=e[Dt],u=gp(a,t[Hr]);u!==null&&PP(i,t[Ht],a,e,u,s)}let o=e[vc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}var Ks=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=cN;let t=e;return t})();function cN(){let t=ln();return dN(t,ut())}var lN=Ks,e0=class extends lN{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Gc(this._hostTNode,this._hostLView)}get injector(){return new zr(this._hostTNode,this._hostLView)}get parentInjector(){let e=up(this._hostTNode,this._hostLView);if(YE(e)){let n=Dc(e,this._hostLView),r=Ic(e),i=n[ee].data[r+8];return new zr(i,n)}else return new zr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=oE(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Nt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=rE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,iE(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!nP(e),a;if(s)a=n;else{let _=n||{};a=_.index,r=_.injector,i=_.projectableNodes,o=_.environmentInjector||_.ngModuleRef}let u=s?e:new ao(ir(e)),c=r||this.parentInjector;if(!o&&u.ngModule==null){let v=(s?c:this.parentInjector).get(ct,null);v&&(o=v)}let l=ir(u.componentType??{}),d=rE(this._lContainer,l?.id??null),h=d?.firstChild??null,f=u.create(c,i,h,o);return this.insertImpl(f.hostView,a,iE(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(_x(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Je],c=new e0(u,u[Ht],u[Je]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return uN(s,i,o,r),e.attachToViewContainerRef(),aI(mf(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=oE(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Pf(this._lContainer,n);r&&(Cc(mf(this._lContainer),n),II(r[ee],r))}detach(e){let n=this._adjustIndex(e,-1),r=Pf(this._lContainer,n);return r&&Cc(mf(this._lContainer),n)!=null?new Kr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function oE(t){return t[_c]}function mf(t){return t[_c]||(t[_c]=[])}function dN(t,e){let n,r=e[t.index];return Vn(r)?n=r:(n=HI(r,e,null,t),e[t.index]=n,Qc(e,n)),fN(n,e,t,r),new e0(n,t,e)}function hN(t,e){let n=t[Dt],r=n.createComment(""),i=Gt(e,t),o=gp(n,i);return Ac(n,o,r,UP(n,i),!1),r}var fN=mN,pN=()=>!1;function gN(t,e,n){return pN(t,e,n)}function mN(t,e,n,r){if(t[Hr])return;let i;n.type&8?i=On(r):i=hN(e,n),t[Hr]=i}var ar=class{},Ls=class{};var Pc=class extends ar{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new xc(this);let i=bE(e);this._bootstrapComponents=mI(i.bootstrap),this._r3Injector=pI(e,n,[{provide:ar,useValue:this},{provide:Hc,useValue:this.componentFactoryResolver},...r],yt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Rc=class extends Ls{constructor(e){super(),this.moduleType=e}create(e){return new Pc(this.moduleType,e,[])}};function yN(t,e,n){return new Pc(t,e,n)}var Kf=class extends ar{constructor(e){super(),this.componentFactoryResolver=new xc(this),this.instance=null;let n=new Fs([...e.providers,{provide:ar,useValue:this},{provide:Hc,useValue:this.componentFactoryResolver}],e.parent||dp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Zc(t,e,n=null){return new Kf({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Zr=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ke(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vN(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function _N(t,e,n,r,i,o,s,a,u){let c=e.consts,l=Kc(e,t,4,s||null,Ec(c,a));$I(e,n,l,Ec(c,u)),ap(e,l);let d=l.tView=_p(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function bp(t,e,n,r,i,o,s,a){let u=ut(),c=uo(),l=t+sr,d=c.firstCreatePass?_N(l,c,u,e,n,r,i,o,s):c.data[l];qs(d,!1);let h=wN(c,u,d,t);op()&&mp(c,u,h,d),Wr(h,u);let f=HI(h,u,h,d);return u[l]=f,Qc(u,f),gN(f,d,u),ep(d)&&jI(c,u,d),s!=null&&UI(u,d,a),bp}var wN=EN;function EN(t,e,n,r){return sp(!0),e[Dt].createComment("")}function Ap(t,e,n){let r=ut(),i=Px();if(vN(r,i,e)){let o=uo(),s=Vx();vR(o,s,r,t,e,r[Dt],n,!1)}return Ap}function sE(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";wp(t,n,o[s],s,r)}function IN(t,e,n,r,i,o){let s=e.consts,a=Ec(s,i),u=Kc(e,t,2,r,a);return $I(e,n,u,Ec(s,o)),u.attrs!==null&&Hf(u,u.attrs,!1),u.mergedAttrs!==null&&Hf(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function fe(t,e,n,r){let i=ut(),o=uo(),s=sr+t,a=i[Dt],u=o.firstCreatePass?IN(s,o,i,e,n,r):o.data[s],c=DN(o,i,u,a,e,t);i[s]=c;let l=ep(u);return qs(u,!0),bI(a,c,u),(u.flags&32)!==32&&op()&&mp(o,i,c,u),Ix()===0&&Wr(c,i),Dx(),l&&(jI(o,i,u),LI(o,u,i)),r!==null&&UI(i,u),fe}function ae(){let t=ln();BE()?Mx():(t=t.parent,qs(t,!1));let e=t;bx(e)&&Ax(),Cx();let n=uo();return n.firstCreatePass&&(ap(n,t),PE(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&$x(e)&&sE(n,e,ut(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&zx(e)&&sE(n,e,ut(),e.stylesWithoutHost,!1),ae}function xe(t,e,n,r){return fe(t,e,n,r),ae(),xe}var DN=(t,e,n,r,i,o)=>(sp(!0),_I(r,i,Lx()));var Nc="en-US";var CN=Nc;function TN(t){typeof t=="string"&&(CN=t.toLowerCase().replace(/_/g,"-"))}function co(t){return!!t&&typeof t.then=="function"}function t0(t){return!!t&&typeof t.subscribe=="function"}function cr(t,e,n,r){let i=ut(),o=uo(),s=ln();return AN(o,i,i[Dt],s,t,e,r),cr}function bN(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Ms],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function AN(t,e,n,r,i,o,s){let a=ep(r),c=t.firstCreatePass&&NR(t),l=e[Nn],d=RR(e),h=!0;if(r.type&3||s){let v=Gt(r,e),m=s?s(v):v,I=d.length,P=s?R=>s(On(R[r.index])):r.index,T=null;if(!s&&a&&(T=bN(t,e,i,r.index)),T!==null){let R=T.__ngLastListenerFn__||T;R.__ngNextListenerFn__=o,T.__ngLastListenerFn__=o,h=!1}else{o=uE(r,e,l,o,!1);let R=n.listen(m,i,o);d.push(o,R),c&&c.push(i,P,I,I+1)}}else o=uE(r,e,l,o,!1);let f=r.outputs,_;if(h&&f!==null&&(_=f[i])){let v=_.length;if(v)for(let m=0;m<v;m+=2){let I=_[m],P=_[m+1],j=e[I][P].subscribe(o),q=d.length;d.push(o,j),c&&c.push(i,r.index,q,-(q+1))}}}function aE(t,e,n,r){try{return on(6,e,n),n(r)!==!1}catch(i){return WI(t,i),!1}finally{on(7,e,n)}}function uE(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?Qr(t.index,e):e;Ep(a);let u=aE(e,n,r,s),c=o.__ngNextListenerFn__;for(;c;)u=aE(e,n,c,s)&&u,c=c.__ngNextListenerFn__;return i&&u===!1&&s.preventDefault(),u}}var Sp=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=xN;let t=e;return t})(),SN=Sp,MN=class extends SN{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=aN(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new Kr(i)}};function xN(){return PN(ln(),ut())}function PN(t,e){return t.type&4?new MN(e,t,Gc(t,e)):null}function vt(t,e=""){let n=ut(),r=uo(),i=t+sr,o=r.firstCreatePass?Kc(r,i,1,e,null):r.data[i],s=RN(r,n,o,e,t);n[i]=s,op()&&mp(r,n,s,o),qs(o,!1)}var RN=(t,e,n,r,i)=>(sp(!0),MP(e[Dt],r));var NN=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=dI(!1,r.type),o=i.length>0?Zc([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=O({token:e,providedIn:"environment",factory:()=>new e(D(ct))});let t=e;return t})();function n0(t){Yc("NgStandalone"),t.getStandaloneInjector=e=>e.get(NN).getOrCreateStandaloneInjector(t)}var lc=null;function ON(t){lc!==null&&(t.defaultEncapsulation!==lc.defaultEncapsulation||t.preserveWhitespaces!==lc.preserveWhitespaces)||(lc=t)}var kn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},r0=new kn("17.1.3"),Xc=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Qf=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Jc=(()=>{let e=class e{compileModuleSync(r){return new Rc(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=bE(r),s=mI(o.declarations).reduce((a,u)=>{let c=ir(u);return c&&a.push(new ao(c)),a},[]);return new Qf(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),kN=new M("");var Mp=new M(""),Qs=new M(""),el=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,xp||(FN(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{J.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(D(J),D(tl),D(Qs))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),tl=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return xp?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function FN(t){xp=t}var xp,nl=new M(""),i0=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=C(nl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(co(s))r.push(s);else if(t0(s)){let a=new Promise((u,c)=>{s.subscribe({complete:u,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rl=new M("");function VN(t,e,n){let r=new Rc(n);return Promise.resolve(r)}function LN(){iw(()=>{throw new U(600,!1)})}function jN(t){return t.isBoundToModule}function UN(t,e,n){try{let r=n();return co(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function o0(t,e){return Array.isArray(e)?e.reduce(o0,t):N(N({},t),e)}var Xr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=C(PI),this.afterRenderEffectManager=C(Cp),this.componentTypes=[],this.components=[],this.isStable=C(Zr).hasPendingTasks.pipe(L(r=>!r)),this._injector=C(ct)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof Sc;if(!this._injector.get(i0).done){let f=!o&&TE(r),_=!1;throw new U(405,_)}let a;o?a=r:a=this._injector.get(Hc).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=jN(a)?void 0:this._injector.get(ar),c=i||a.selector,l=a.create(Wt.NULL,[],c,u),d=l.location.nativeElement,h=l.injector.get(Mp,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),gc(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new U(101,!1);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1}}detectChangesInAttachedViews(){let r=0;do{if(r===KI)throw new U(103,!1);let i=r===0;for(let{_lView:o,notifyErrorHandler:s}of this._views)!i&&!lE(o)||this.detectChangesInView(o,s,i);this.afterRenderEffectManager.execute(),r++}while(this._views.some(({_lView:i})=>lE(i)))}detectChangesInView(r,i,o){let s;o?(s=0,r[B]|=1024):r[B]&64?s=0:s=1,QI(r,i,s)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;gc(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(rl,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>gc(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new U(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function gc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function cE(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}function lE(t){return np(t)}var BN=(()=>{let e=class e{constructor(){this.zone=C(J),this.applicationRef=C(Xr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $N(t){return[{provide:J,useFactory:t},{provide:so,multi:!0,useFactory:()=>{let e=C(BN,{optional:!0});return()=>e.initialize()}},{provide:so,multi:!0,useFactory:()=>{let e=C(HN);return()=>{e.initialize()}}},{provide:PI,useFactory:zN}]}function zN(){let t=C(J),e=C(cn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function qN(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var HN=(()=>{let e=class e{constructor(){this.subscription=new Se,this.initialized=!1,this.zone=C(J),this.pendingTasks=C(Zr)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{J.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{J.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function GN(){return typeof $localize<"u"&&$localize.locale||Nc}var Pp=new M("",{providedIn:"root",factory:()=>C(Pp,Y.Optional|Y.SkipSelf)||GN()});var s0=new M(""),a0=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=WR(i?.ngZone,qN({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=yN(r.moduleType,this.injector,$N(()=>o)),a=s.injector.get(cn,null);return o.runOutsideAngular(()=>{let u=o.onError.subscribe({next:c=>{a.handleError(c)}});s.onDestroy(()=>{gc(this._modules,s),u.unsubscribe()})}),UN(a,o,()=>{let u=s.injector.get(i0);return u.runInitializers(),u.donePromise.then(()=>{let c=s.injector.get(Pp,Nc);return TN(c||Nc),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=o0({},i);return VN(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(Xr);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new U(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new U(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(s0,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(D(Wt))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),bs=null,u0=new M("");function WN(t){if(bs&&!bs.get(u0,!1))throw new U(400,!1);LN(),bs=t;let e=t.get(a0);return YN(t),e}function Rp(t,e,n=[]){let r=`Platform: ${e}`,i=new M(r);return(o=[])=>{let s=c0();if(!s||s.injector.get(u0,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):WN(KN(a,r))}return QN(i)}}function KN(t=[],e){return Wt.create({name:e,providers:[{provide:$c,useValue:"platform"},{provide:s0,useValue:new Set([()=>bs=null])},...t]})}function QN(t){let e=c0();if(!e)throw new U(401,!1);return e}function c0(){return bs?.get(a0)??null}function YN(t){t.get(hp,null)?.forEach(n=>n())}function Np(){return!1}var l0=Rp(null,"core",[]),d0=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(D(Xr))},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({});let t=e;return t})();function h0(t){let e=ir(t);if(!e)return null;let n=new ao(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var y0=null;function Jr(){return y0}function v0(t){y0??=t}var il=class{},tt=new M(""),Lp=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(eO),providedIn:"platform"});let t=e;return t})(),_0=new M(""),eO=(()=>{let e=class e extends Lp{constructor(){super(),this._doc=C(tt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Jr().getBaseHref(this._doc)}onPopState(r){let i=Jr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Jr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function jp(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function f0(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Ln(t){return t&&t[0]!=="?"?"?"+t:t}var ei=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(Up),providedIn:"root"});let t=e;return t})(),w0=new M(""),Up=(()=>{let e=class e extends ei{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??C(tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return jp(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Ln(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Ln(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Ln(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(Lp),D(w0,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),E0=(()=>{let e=class e extends ei{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=jp(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Ln(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Ln(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(D(Lp),D(w0,8))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),ho=(()=>{let e=class e{constructor(r){this._subject=new Xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=rO(f0(p0(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Ln(i))}normalize(r){return e.stripTrailingSlash(nO(this._basePath,p0(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ln(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ln(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Ln,e.joinWithSlash=jp,e.stripTrailingSlash=f0,e.\u0275fac=function(i){return new(i||e)(D(ei))},e.\u0275prov=O({token:e,factory:()=>tO(),providedIn:"root"});let t=e;return t})();function tO(){return new ho(D(ei))}function nO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function p0(t){return t.replace(/\/index.html$/,"")}function rO(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function ol(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var I0=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Op,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){g0("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){g0("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(hn(Ks),hn(Sp))},e.\u0275dir=Us({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Op=class{constructor(){this.$implicit=null,this.ngIf=null}};function g0(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${yt(e)}'.`)}var D0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({});let t=e;return t})(),Bp="browser",iO="server";function oO(t){return t===Bp}function ti(t){return t===iO}var C0=(()=>{let e=class e{};e.\u0275prov=O({token:e,providedIn:"root",factory:()=>oO(C(et))?new kp(C(tt),window):new Fp});let t=e;return t})(),kp=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=sO(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function sO(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Fp=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},lo=class{};var Zs=class{},al=class{},ni=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var zp=class{encodeKey(e){return b0(e)}encodeValue(e){return b0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function cO(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}var lO=/%(\d[a-f0-9])/gi,dO={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function b0(t){return encodeURIComponent(t).replace(lO,(e,n)=>dO[n]??e)}function sl(t){return`${t}`}var lr=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new zp,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=cO(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(sl):[sl(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(sl(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(sl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var qp=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function hO(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function A0(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function S0(t){return typeof Blob<"u"&&t instanceof Blob}function M0(t){return typeof FormData<"u"&&t instanceof FormData}function fO(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Ys=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(hO(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new ni,this.context??=new qp,!this.params)this.params=new lr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+s}}}serializeBody(){return this.body===null?null:A0(this.body)||S0(this.body)||M0(this.body)||fO(this.body)||typeof this.body=="string"?this.body:this.body instanceof lr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||M0(this.body)?null:S0(this.body)?this.body.type||null:A0(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof lr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.body!==void 0?e.body:this.body,s=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,u=e.headers||this.headers,c=e.params||this.params,l=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),u)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new t(n,r,o,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:s})}},fo=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(fo||{}),Xs=class{constructor(e,n=ll.Ok,r="OK"){this.headers=e.headers||new ni,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Hp=class t extends Xs{constructor(e={}){super(e),this.type=fo.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ul=class t extends Xs{constructor(e={}){super(e),this.type=fo.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},cl=class extends Xs{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},ll=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(ll||{});function $p(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var pO=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof Ys)s=r;else{let c;o.headers instanceof ni?c=o.headers:c=new ni(o.headers);let l;o.params&&(o.params instanceof lr?l=o.params:l=new lr({fromObject:o.params})),s=new Ys(r,i,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:l,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=F(s).pipe(xn(c=>this.handler.handle(c)));if(r instanceof Ys||o.observe==="events")return a;let u=a.pipe(Be(c=>c instanceof ul));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return u.pipe(L(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return u.pipe(L(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return u.pipe(L(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return u.pipe(L(c=>c.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new lr().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,$p(o,i))}post(r,i,o={}){return this.request("POST",r,$p(o,i))}put(r,i,o={}){return this.request("PUT",r,$p(o,i))}};e.\u0275fac=function(i){return new(i||e)(D(Zs))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function N0(t,e){return e(t)}function gO(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function mO(t,e,n){return(r,i)=>dn(n,()=>e(r,o=>t(o,i)))}var yO=new M(""),Gp=new M(""),vO=new M(""),_O=new M("");function wO(){let t=null;return(e,n)=>{t===null&&(t=(C(yO,{optional:!0})??[]).reduceRight(gO,N0));let r=C(Zr),i=r.add();return t(e,n).pipe(tr(()=>r.remove(i)))}}var x0=(()=>{let e=class e extends Zs{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=C(Zr);let o=C(_O,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(Gp),...this.injector.get(vO,[])]));this.chain=o.reduceRight((s,a)=>mO(s,a,this.injector),N0)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(tr(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(D(al),D(ct))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();var EO=/^\)\]\}',?\n/;function IO(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var P0=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new U(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?ie(i.\u0275loadImpl()):F(null)).pipe(ve(()=>new Z(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((m,I)=>a.setRequestHeader(m,I.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let m=r.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(r.responseType){let m=r.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let u=r.serializeBody(),c=null,l=()=>{if(c!==null)return c;let m=a.statusText||"OK",I=new ni(a.getAllResponseHeaders()),P=IO(a)||r.url;return c=new Hp({headers:I,status:a.status,statusText:m,url:P}),c},d=()=>{let{headers:m,status:I,statusText:P,url:T}=l(),R=null;I!==ll.NoContent&&(R=typeof a.response>"u"?a.responseText:a.response),I===0&&(I=R?ll.Ok:0);let j=I>=200&&I<300;if(r.responseType==="json"&&typeof R=="string"){let q=R;R=R.replace(EO,"");try{R=R!==""?JSON.parse(R):null}catch(he){R=q,j&&(j=!1,R={error:he,text:R})}}j?(s.next(new ul({body:R,headers:m,status:I,statusText:P,url:T||void 0})),s.complete()):s.error(new cl({error:R,headers:m,status:I,statusText:P,url:T||void 0}))},h=m=>{let{url:I}=l(),P=new cl({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:I||void 0});s.error(P)},f=!1,_=m=>{f||(s.next(l()),f=!0);let I={type:fo.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(I.total=m.total),r.responseType==="text"&&a.responseText&&(I.partialText=a.responseText),s.next(I)},v=m=>{let I={type:fo.UploadProgress,loaded:m.loaded};m.lengthComputable&&(I.total=m.total),s.next(I)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",_),u!==null&&a.upload&&a.upload.addEventListener("progress",v)),a.send(u),s.next({type:fo.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",_),u!==null&&a.upload&&a.upload.removeEventListener("progress",v)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(D(lo))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),O0=new M(""),DO="XSRF-TOKEN",CO=new M("",{providedIn:"root",factory:()=>DO}),TO="X-XSRF-TOKEN",bO=new M("",{providedIn:"root",factory:()=>TO}),dl=class{},AO=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=ol(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(D(tt),D(et),D(CO))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function SO(t,e){let n=t.url.toLowerCase();if(!C(O0)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=C(dl).getToken(),i=C(bO);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var k0=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(k0||{});function MO(t,e){return{\u0275kind:t,\u0275providers:e}}function xO(...t){let e=[pO,P0,x0,{provide:Zs,useExisting:x0},{provide:al,useExisting:P0},{provide:Gp,useValue:SO,multi:!0},{provide:O0,useValue:!0},{provide:dl,useClass:AO}];for(let n of t)e.push(...n.\u0275providers);return Bc(e)}var R0=new M("");function PO(){return MO(k0.LegacyInterceptors,[{provide:R0,useFactory:wO},{provide:Gp,useExisting:R0,multi:!0}])}var F0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({providers:[xO(PO())]});let t=e;return t})();var Qp=class extends il{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Yp=class t extends Qp{static makeCurrent(){v0(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=RO();return n==null?null:NO(n)}resetBaseElement(){Js=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ol(document.cookie,e)}},Js=null;function RO(){return Js=Js||document.querySelector("base"),Js?Js.getAttribute("href"):null}function NO(t){return new URL(t,document.baseURI).pathname}var Zp=class{addToWindow(e){It.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new U(5103,!1);return o},It.getAllAngularTestabilities=()=>e.getAllTestabilities(),It.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=It.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};It.frameworkStabilizers||(It.frameworkStabilizers=[]),It.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?Jr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},OO=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Xp=new M(""),U0=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new U(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(D(Xp),D(J))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),hl=class{constructor(e){this._doc=e}},Wp="ng-app-id",B0=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ti(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Wp}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Wp),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Wp,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(D(tt),D(zc),D(fp,8),D(et))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),Kp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},eg=/%COMP%/g,$0="%COMP%",kO=`_nghost-${$0}`,FO=`_ngcontent-${$0}`,VO=!0,LO=new M("",{providedIn:"root",factory:()=>VO});function jO(t){return FO.replace(eg,t)}function UO(t){return kO.replace(eg,t)}function z0(t,e){return e.map(n=>n.replace(eg,t))}var V0=(()=>{let e=class e{constructor(r,i,o,s,a,u,c,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=u,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ti(u),this.defaultRenderer=new ea(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===an.ShadowDom&&(i=ge(N({},i),{encapsulation:an.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof fl?o.applyToHost(r):o instanceof ta&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,u=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case an.Emulated:s=new fl(c,l,i,this.appId,d,a,u,h);break;case an.ShadowDom:return new Jp(c,l,r,i,a,u,this.nonce,h);default:s=new ta(c,l,i,d,a,u,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(D(U0),D(B0),D(zc),D(LO),D(tt),D(et),D(J),D(fp))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),ea=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Kp[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(L0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(L0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Kp[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Kp[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Yr.DashCase|Yr.Important)?e.style.setProperty(n,r,i&Yr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Yr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Jr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function L0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Jp=class extends ea{constructor(e,n,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=z0(i.id,i.styles);for(let l of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ta=class extends ea{constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?z0(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},fl=class extends ta{constructor(e,n,r,i,o,s,a,u){let c=i+"-"+r.id;super(e,n,r,o,s,a,u,c),this.contentAttr=jO(c),this.hostAttr=UO(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},BO=(()=>{let e=class e extends hl{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(D(tt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})(),j0=["alt","control","meta","shift"],$O={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zO={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},qO=(()=>{let e=class e extends hl{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Jr().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),j0.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=$O[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),j0.forEach(a=>{if(a!==o){let u=zO[a];u(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(D(tt))},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function HO(){Yp.makeCurrent()}function GO(){return new cn}function WO(){return gI(document),document}var KO=[{provide:et,useValue:Bp},{provide:hp,useValue:HO,multi:!0},{provide:tt,useFactory:WO,deps:[]}],q0=Rp(l0,"browser",KO),QO=new M(""),YO=[{provide:Qs,useClass:Zp,deps:[]},{provide:Mp,useClass:el,deps:[J,tl,Qs]},{provide:el,useClass:el,deps:[J,tl,Qs]}],ZO=[{provide:$c,useValue:"root"},{provide:cn,useFactory:GO,deps:[]},{provide:Xp,useClass:BO,multi:!0,deps:[tt,J,et]},{provide:Xp,useClass:qO,multi:!0,deps:[tt]},V0,B0,U0,{provide:Vs,useExisting:V0},{provide:lo,useClass:OO,deps:[]},[]],H0=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:zc,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(D(QO,12))},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({providers:[...ZO,...YO],imports:[D0,d0]});let t=e;return t})();var G0=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(D(tt))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var W="primary",ma=Symbol("RouteTitle"),og=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function vo(t){return new og(t)}function JO(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function e1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!fn(t[n],e[n]))return!1;return!0}function fn(t,e){let n=t?sg(t):void 0,r=e?sg(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!nD(t[i],e[i]))return!1;return!0}function sg(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function nD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function rD(t){return t.length>0?t[t.length-1]:null}function pr(t){return ef(t)?t:co(t)?ie(Promise.resolve(t)):F(t)}var t1={exact:oD,subset:sD},iD={exact:n1,subset:r1,ignored:()=>!0};function K0(t,e,n){return t1[n.paths](t.root,e.root,n.matrixParams)&&iD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function n1(t,e){return fn(t,e)}function oD(t,e,n){if(!ii(t.segments,e.segments)||!ml(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!oD(t.children[r],e.children[r],n))return!1;return!0}function r1(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>nD(t[n],e[n]))}function sD(t,e,n){return aD(t,e,e.segments,n)}function aD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!ii(i,n)||e.hasChildren()||!ml(i,n,r))}else if(t.segments.length===n.length){if(!ii(t.segments,n)||!ml(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!sD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!ii(t.segments,i)||!ml(t.segments,i,r)||!t.children[W]?!1:aD(t.children[W],e,o,r)}}function ml(t,e,n){return e.every((r,i)=>iD[n](t[i].parameters,r.parameters))}var dr=class{constructor(e=new se([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=vo(this.queryParams),this._queryParamMap}toString(){return s1.serialize(this)}},se=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yl(this)}},ri=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=vo(this.parameters),this._parameterMap}toString(){return cD(this)}};function i1(t,e){return ii(t,e)&&t.every((n,r)=>fn(n.parameters,e[r].parameters))}function ii(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function o1(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===W&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==W&&(n=n.concat(e(i,r)))}),n}var ya=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>new ua,providedIn:"root"});let t=e;return t})(),ua=class{parse(e){let n=new ug(e);return new dr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${na(e.root,!0)}`,r=c1(e.queryParams),i=typeof e.fragment=="string"?`#${a1(e.fragment)}`:"";return`${n}${r}${i}`}},s1=new ua;function yl(t){return t.segments.map(e=>cD(e)).join("/")}function na(t,e){if(!t.hasChildren())return yl(t);if(e){let n=t.children[W]?na(t.children[W],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==W&&r.push(`${i}:${na(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=o1(t,(r,i)=>i===W?[na(t.children[W],!1)]:[`${i}:${na(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[W]!=null?`${yl(t)}/${n[0]}`:`${yl(t)}/(${n.join("//")})`}}function uD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pl(t){return uD(t).replace(/%3B/gi,";")}function a1(t){return encodeURI(t)}function ag(t){return uD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vl(t){return decodeURIComponent(t)}function Q0(t){return vl(t.replace(/\+/g,"%20"))}function cD(t){return`${ag(t.path)}${u1(t.parameters)}`}function u1(t){return Object.entries(t).map(([e,n])=>`;${ag(e)}=${ag(n)}`).join("")}function c1(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${pl(n)}=${pl(i)}`).join("&"):`${pl(n)}=${pl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var l1=/^[^\/()?;#]+/;function tg(t){let e=t.match(l1);return e?e[0]:""}var d1=/^[^\/()?;=#]+/;function h1(t){let e=t.match(d1);return e?e[0]:""}var f1=/^[^=?&#]+/;function p1(t){let e=t.match(f1);return e?e[0]:""}var g1=/^[^&#]+/;function m1(t){let e=t.match(g1);return e?e[0]:""}var ug=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new se([],{}):new se([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[W]=new se(e,n)),r}parseSegment(){let e=tg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new ri(vl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=h1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=tg(this.remaining);i&&(r=i,this.capture(r))}e[vl(n)]=vl(r)}parseQueryParam(e){let n=p1(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=m1(this.remaining);s&&(r=s,this.capture(r))}let i=Q0(n),o=Q0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=tg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=W);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[W]:new se([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function lD(t){return t.segments.length>0?new se([],{[W]:t}):t}function dD(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=dD(i);if(r===W&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new se(t.segments,e);return y1(n)}function y1(t){if(t.numberOfChildren===1&&t.children[W]){let e=t.children[W];return new se(t.segments.concat(e.segments),e.children)}return t}function _o(t){return t instanceof dr}function v1(t,e,n=null,r=null){let i=hD(t);return fD(i,e,n,r)}function hD(t){let e;function n(o){let s={};for(let u of o.children){let c=n(u);s[u.outlet]=c}let a=new se(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=lD(r);return e??i}function fD(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return ng(i,i,i,n,r);let o=_1(e);if(o.toRoot())return ng(i,i,new se([],{}),n,r);let s=w1(o,i,t),a=s.processChildren?oa(s.segmentGroup,s.index,o.commands):gD(s.segmentGroup,s.index,o.commands);return ng(i,s.segmentGroup,a,n,r)}function _l(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function ca(t){return typeof t=="object"&&t!=null&&t.outlets}function ng(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,c])=>{o[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`});let s;t===e?s=n:s=pD(t,e,n);let a=lD(dD(s));return new dr(a,o,i)}function pD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=pD(o,e,n)}),new se(t.segments,r)}var wl=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&_l(r[0]))throw new U(4003,!1);let i=r.find(ca);if(i&&i!==rD(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function _1(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new wl(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,c])=>{a[u]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new wl(n,e,r)}var mo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function w1(t,e,n){if(t.isAbsolute)return new mo(e,!0,0);if(!n)return new mo(e,!1,NaN);if(n.parent===null)return new mo(n,!0,0);let r=_l(t.commands[0])?0:1,i=n.segments.length-1+r;return E1(n,i,t.numberOfDoubleDots)}function E1(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new mo(r,!1,i-o)}function I1(t){return ca(t[0])?t[0].outlets:{[W]:t}}function gD(t,e,n){if(t??=new se([],{}),t.segments.length===0&&t.hasChildren())return oa(t,e,n);let r=D1(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new se(t.segments.slice(0,r.pathIndex),{});return o.children[W]=new se(t.segments.slice(r.pathIndex),t.children),oa(o,0,i)}else return r.match&&i.length===0?new se(t.segments,{}):r.match&&!t.hasChildren()?cg(t,e,n):r.match?oa(t,0,i):cg(t,e,n)}function oa(t,e,n){if(n.length===0)return new se(t.segments,{});{let r=I1(n),i={};if(Object.keys(r).some(o=>o!==W)&&t.children[W]&&t.numberOfChildren===1&&t.children[W].segments.length===0){let o=oa(t.children[W],e,n);return new se(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=gD(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new se(t.segments,i)}}function D1(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(ca(a))break;let u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&c&&typeof c=="object"&&c.outlets===void 0){if(!Z0(u,c,s))return o;r+=2}else{if(!Z0(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function cg(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(ca(o)){let u=C1(o.outlets);return new se(r,u)}if(i===0&&_l(n[0])){let u=t.segments[e];r.push(new ri(u.path,Y0(n[0]))),i++;continue}let s=ca(o)?o.outlets[W]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&_l(a)?(r.push(new ri(s,Y0(a))),i+=2):(r.push(new ri(s,{})),i++)}return new se(r,{})}function C1(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=cg(new se([],{}),0,r))}),e}function Y0(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function Z0(t,e,n){return t==n.path&&fn(e,n.parameters)}var sa="imperative",ze=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ze||{}),kt=class{constructor(e,n){this.id=e,this.url=n}},wo=class extends kt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ze.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},jn=class extends kt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ze.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ot=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Ot||{}),El=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(El||{}),hr=class extends kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ze.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},fr=class extends kt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ze.NavigationSkipped}},la=class extends kt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ze.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Il=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ze.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lg=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ze.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dg=class extends kt{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=ze.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},hg=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ze.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fg=class extends kt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ze.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pg=class{constructor(e){this.route=e,this.type=ze.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},gg=class{constructor(e){this.route=e,this.type=ze.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},mg=class{constructor(e){this.snapshot=e,this.type=ze.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yg=class{constructor(e){this.snapshot=e,this.type=ze.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vg=class{constructor(e){this.snapshot=e,this.type=ze.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_g=class{constructor(e){this.snapshot=e,this.type=ze.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dl=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=ze.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},da=class{},ha=class{constructor(e){this.url=e}};var wg=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new va,this.attachRef=null}},va=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new wg,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Cl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Eg(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Eg(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Ig(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ig(e,this._root).map(n=>n.value)}};function Eg(t,e){if(t===e.value)return e;for(let n of e.children){let r=Eg(t,n);if(r)return r}return null}function Ig(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Ig(t,n);if(r.length)return r.unshift(e),r}return[]}var Ct=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function go(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Tl=class extends Cl{constructor(e,n){super(e),this.snapshot=n,Rg(this,e)}toString(){return this.snapshot.toString()}};function mD(t){let e=T1(t),n=new Ke([new ri("",{})]),r=new Ke({}),i=new Ke({}),o=new Ke({}),s=new Ke(""),a=new Eo(n,r,o,s,i,W,t,e.root);return a.snapshot=e.root,new Tl(new Ct(a,[]),e)}function T1(t){let e={},n={},r={},i="",o=new fa([],e,r,i,n,W,t,null,{});return new bl("",new Ct(o,[]))}var Eo=class{constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(L(c=>c[ma]))??F(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(L(e=>vo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(L(e=>vo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Pg(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:N(N({},e.params),t.params),data:N(N({},e.data),t.data),resolve:N(N(N(N({},t.data),e.data),i?.data),t._resolvedData)}:r={params:N({},t.params),data:N({},t.data),resolve:N(N({},t.data),t._resolvedData??{})},i&&vD(i)&&(r.resolve[ma]=i.title),r}var fa=class{get title(){return this.data?.[ma]}constructor(e,n,r,i,o,s,a,u,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=vo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=vo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},bl=class extends Cl{constructor(e,n){super(n),this.url=e,Rg(this,n)}toString(){return yD(this._root)}};function Rg(t,e){e.value._routerState=t,e.children.forEach(n=>Rg(t,n))}function yD(t){let e=t.children.length>0?` { ${t.children.map(yD).join(", ")} } `:"";return`${t.value}${e}`}function rg(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,fn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),fn(e.params,n.params)||t.paramsSubject.next(n.params),e1(e.url,n.url)||t.urlSubject.next(n.url),fn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Dg(t,e){let n=fn(t.params,e.params)&&i1(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Dg(t.parent,e.parent))}function vD(t){return typeof t.title=="string"||t.title===null}var b1=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=W,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.attachEvents=new Xe,this.detachEvents=new Xe,this.parentContexts=C(va),this.location=C(Ks),this.changeDetector=C(Ws),this.environmentInjector=C(ct),this.inputBinder=C(Pl,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,c=new Cg(r,u,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Us({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[zs]});let t=e;return t})(),Cg=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Eo?this.route:e===va?this.childContexts:this.parent.get(e,n)}},Pl=new M(""),X0=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Ds([i.queryParams,i.params,i.data]).pipe(ve(([s,a,u],c)=>(u=N(N(N({},s),a),u),c===0?F(u):Promise.resolve(u)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=h0(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function A1(t,e,n){let r=pa(t,e._root,n?n._root:void 0);return new Tl(r,e)}function pa(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=S1(t,e,n);return new Ct(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>pa(t,a)),s}}let r=M1(e.value),i=e.children.map(o=>pa(t,o));return new Ct(r,i)}}function S1(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return pa(t,r,i);return pa(t,r)})}function M1(t){return new Eo(new Ke(t.url),new Ke(t.params),new Ke(t.queryParams),new Ke(t.fragment),new Ke(t.data),t.outlet,t.component,t)}var _D="ngNavigationCancelingError";function wD(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=_o(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ED(!1,Ot.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function ED(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[_D]=!0,n.cancellationCode=e,n}function x1(t){return ID(t)&&_o(t.url)}function ID(t){return!!t&&t[_D]}var P1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ur({type:e,selectors:[["ng-component"]],standalone:!0,features:[n0],decls:1,vars:0,template:function(i,o){i&1&&xe(0,"router-outlet")},dependencies:[b1],encapsulation:2});let t=e;return t})();function R1(t,e){return t.providers&&!t._injector&&(t._injector=Zc(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Ng(t){let e=t.children&&t.children.map(Ng),n=e?ge(N({},t),{children:e}):N({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==W&&(n.component=P1),n}function pn(t){return t.outlet||W}function N1(t,e){let n=t.filter(r=>pn(r)===e);return n.push(...t.filter(r=>pn(r)!==e)),n}function _a(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var O1=(t,e,n,r)=>L(i=>(new Tg(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Tg=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),rg(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=go(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=go(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=go(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=go(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new _g(o.value.snapshot))}),e.children.length&&this.forwardEvent(new yg(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(rg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),rg(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=_a(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},Al=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},yo=class{constructor(e,n){this.component=e,this.route=n}};function k1(t,e,n){let r=t._root,i=e?e._root:null;return ra(r,i,n,[r.value])}function F1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Do(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!fE(t)?t:e.get(t):r}function ra(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=go(e);return t.children.forEach(s=>{V1(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>aa(a,n.getContext(s),i)),i}function V1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=L1(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Al(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ra(t,e,a?a.children:null,r,i):ra(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new yo(a.outlet.component,s))}else s&&aa(e,a,i),i.canActivateChecks.push(new Al(r)),o.component?ra(t,null,a?a.children:null,r,i):ra(t,null,n,r,i);return i}function L1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!ii(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ii(t.url,e.url)||!fn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dg(t,e)||!fn(t.queryParams,e.queryParams);case"paramsChange":default:return!Dg(t,e)}}function aa(t,e,n){let r=go(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?aa(s,e.children.getContext(o),n):aa(s,null,n):aa(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new yo(e.outlet.component,i)):n.canDeactivateChecks.push(new yo(null,i)):n.canDeactivateChecks.push(new yo(null,i))}function wa(t){return typeof t=="function"}function j1(t){return typeof t=="boolean"}function U1(t){return t&&wa(t.canLoad)}function B1(t){return t&&wa(t.canActivate)}function $1(t){return t&&wa(t.canActivateChild)}function z1(t){return t&&wa(t.canDeactivate)}function q1(t){return t&&wa(t.canMatch)}function DD(t){return t instanceof Mn||t?.name==="EmptyError"}var gl=Symbol("INITIAL_VALUE");function Io(){return ve(t=>Ds(t.map(e=>e.pipe(Pn(1),$r(gl)))).pipe(L(e=>{for(let n of e)if(n!==!0){if(n===gl)return gl;if(n===!1||n instanceof dr)return n}return!0}),Be(e=>e!==gl),Pn(1)))}function H1(t,e){return Oe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?F(ge(N({},n),{guardsResult:!0})):G1(s,r,i,t).pipe(Oe(a=>a&&j1(a)?W1(r,o,t,e):F(a)),L(a=>ge(N({},n),{guardsResult:a})))})}function G1(t,e,n,r){return ie(t).pipe(Oe(i=>X1(i.component,i.route,n,e,r)),xt(i=>i!==!0,!0))}function W1(t,e,n,r){return ie(e).pipe(xn(i=>Qi(Q1(i.route.parent,r),K1(i.route,r),Z1(t,i.path,n),Y1(t,i.route,n))),xt(i=>i!==!0,!0))}function K1(t,e){return t!==null&&e&&e(new vg(t)),F(!0)}function Q1(t,e){return t!==null&&e&&e(new mg(t)),F(!0)}function Y1(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return F(!0);let i=r.map(o=>oc(()=>{let s=_a(e)??n,a=Do(o,s),u=B1(a)?a.canActivate(e,t):dn(s,()=>a(e,t));return pr(u).pipe(xt())}));return F(i).pipe(Io())}function Z1(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>F1(s)).filter(s=>s!==null).map(s=>oc(()=>{let a=s.guards.map(u=>{let c=_a(s.node)??n,l=Do(u,c),d=$1(l)?l.canActivateChild(r,t):dn(c,()=>l(r,t));return pr(d).pipe(xt())});return F(a).pipe(Io())}));return F(o).pipe(Io())}function X1(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return F(!0);let s=o.map(a=>{let u=_a(e)??i,c=Do(a,u),l=z1(c)?c.canDeactivate(t,e,n,r):dn(u,()=>c(t,e,n,r));return pr(l).pipe(xt())});return F(s).pipe(Io())}function J1(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return F(!0);let o=i.map(s=>{let a=Do(s,t),u=U1(a)?a.canLoad(e,n):dn(t,()=>a(e,n));return pr(u)});return F(o).pipe(Io(),CD(r))}function CD(t){return Kh(Me(e=>{if(_o(e))throw wD(t,e)}),L(e=>e===!0))}function ek(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return F(!0);let o=i.map(s=>{let a=Do(s,t),u=q1(a)?a.canMatch(e,n):dn(t,()=>a(e,n));return pr(u)});return F(o).pipe(Io(),CD(r))}var ga=class{constructor(e){this.segmentGroup=e||null}},Sl=class extends Error{constructor(e){super(),this.urlTree=e}};function po(t){return Ki(new ga(t))}function tk(t){return Ki(new U(4e3,!1))}function nk(t){return Ki(ED(!1,Ot.GuardRejected))}var bg=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return F(r);if(i.numberOfChildren>1||!i.children[W])return tk(e.redirectTo);i=i.children[W]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Sl(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new dr(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new se(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Ag={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rk(t,e,n,r,i){let o=Og(t,e,n);return o.matched?(r=R1(e,r),ek(r,e,n,i).pipe(L(s=>s===!0?o:N({},Ag)))):F(o)}function Og(t,e,n){if(e.path==="**")return ik(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?N({},Ag):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||JO)(n,t,e);if(!i)return N({},Ag);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?N(N({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function ik(t){return{matched:!0,parameters:t.length>0?rD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function J0(t,e,n,r){return n.length>0&&ak(t,n,r)?{segmentGroup:new se(e,sk(r,new se(n,t.children))),slicedSegments:[]}:n.length===0&&uk(t,n,r)?{segmentGroup:new se(t.segments,ok(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new se(t.segments,t.children),slicedSegments:n}}function ok(t,e,n,r){let i={};for(let o of n)if(Rl(t,e,o)&&!r[pn(o)]){let s=new se([],{});i[pn(o)]=s}return N(N({},r),i)}function sk(t,e){let n={};n[W]=e;for(let r of t)if(r.path===""&&pn(r)!==W){let i=new se([],{});n[pn(r)]=i}return n}function ak(t,e,n){return n.some(r=>Rl(t,e,r)&&pn(r)!==W)}function uk(t,e,n){return n.some(r=>Rl(t,e,r))}function Rl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function ck(t,e,n,r){return pn(t)!==r&&(r===W||!Rl(e,n,t))?!1:Og(e,t,n).matched}function lk(t,e,n){return e.length===0&&!t.children[n]}var Sg=class{};function dk(t,e,n,r,i,o,s="emptyOnly"){return new Mg(t,e,n,r,i,s,o).recognize()}var hk=31,Mg=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new bg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){let e=J0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(L(n=>{let r=new fa([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,{},W,this.rootComponentType,null,{}),i=new Ct(r,n),o=new bl("",i),s=v1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,W).pipe(Jn(r=>{if(r instanceof Sl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ga?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Pg(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(L(o=>o instanceof Ct?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return ie(i).pipe(xn(o=>{let s=r.children[o],a=N1(n,o);return this.processSegmentGroup(e,a,s,o)}),Br((o,s)=>(o.push(...s),o)),er(null),of(),Oe(o=>{if(o===null)return po(r);let s=TD(o);return fk(s),F(s)}))}processSegment(e,n,r,i,o,s){return ie(n).pipe(xn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(Jn(u=>{if(u instanceof ga)return F(null);throw u}))),xt(a=>!!a),Jn(a=>{if(DD(a))return lk(r,i,o)?F(new Sg):po(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return ck(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):po(i):po(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:u,positionalParamSegments:c,remainingSegments:l}=Og(n,i,o);if(!a)return po(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hk&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,d).pipe(Oe(h=>this.processSegment(e,r,n,h.concat(l),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=rk(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(ve(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ve(({routes:u})=>{let c=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new fa(l,h,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,gk(r),pn(r),r.component??r._loadedComponent??null,r,mk(r)),{segmentGroup:_,slicedSegments:v}=J0(n,l,d,u);if(v.length===0&&_.hasChildren())return this.processChildren(c,u,_).pipe(L(I=>I===null?null:new Ct(f,I)));if(u.length===0&&v.length===0)return F(new Ct(f,[]));let m=pn(r)===o;return this.processSegment(c,u,_,v,m?W:o,!0).pipe(L(I=>new Ct(f,I instanceof Ct?[I]:[])))}))):po(n)))}getChildConfig(e,n,r){return n.children?F({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?F({routes:n._loadedRoutes,injector:n._loadedInjector}):J1(e,n,r,this.urlSerializer).pipe(Oe(i=>i?this.configLoader.loadChildren(e,n).pipe(Me(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):nk(n))):F({routes:[],injector:e})}};function fk(t){t.sort((e,n)=>e.value.outlet===W?-1:n.value.outlet===W?1:e.value.outlet.localeCompare(n.value.outlet))}function pk(t){let e=t.value.routeConfig;return e&&e.path===""}function TD(t){let e=[],n=new Set;for(let r of t){if(!pk(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=TD(r.children);e.push(new Ct(r.value,i))}return e.filter(r=>!n.has(r))}function gk(t){return t.data||{}}function mk(t){return t.resolve||{}}function yk(t,e,n,r,i,o){return Oe(s=>dk(t,e,n,r,s.extractedUrl,i,o).pipe(L(({state:a,tree:u})=>ge(N({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function vk(t,e){return Oe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return F(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let c of bD(u))s.add(c);let a=0;return ie(s).pipe(xn(u=>o.has(u)?_k(u,r,t,e):(u.data=Pg(u,u.parent,t).resolve,F(void 0))),Me(()=>a++),Yi(1),Oe(u=>a===s.size?F(n):gt))})}function bD(t){let e=t.children.map(n=>bD(n)).flat();return[t,...e]}function _k(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!vD(i)&&(o[ma]=i.title),wk(o,t,e,r).pipe(L(s=>(t._resolvedData=s,t.data=Pg(t,t.parent,n).resolve,null)))}function wk(t,e,n,r){let i=sg(t);if(i.length===0)return F({});let o={};return ie(i).pipe(Oe(s=>Ek(t[s],e,n,r).pipe(xt(),Me(a=>{o[s]=a}))),Yi(1),nf(o),Jn(s=>DD(s)?gt:Ki(s)))}function Ek(t,e,n,r){let i=_a(e)??r,o=Do(t,i),s=o.resolve?o.resolve(e,n):dn(i,()=>o(e,n));return pr(s)}function ig(t){return ve(e=>{let n=t(e);return n?ie(n).pipe(L(()=>e)):F(e)})}var AD=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===W);return i}getResolvedTitleForRoute(r){return r.data[ma]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(Ik),providedIn:"root"});let t=e;return t})(),Ik=(()=>{let e=class e extends AD{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(D(G0))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ea=new M("",{providedIn:"root",factory:()=>({})}),Ml=new M(""),kg=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=C(Jc)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return F(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=pr(r.loadComponent()).pipe(L(SD),Me(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),tr(()=>{this.componentLoaders.delete(r)})),o=new qi(i,()=>new Ue).pipe(zi());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return F({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=Dk(i,this.compiler,r,this.onLoadEndListener).pipe(tr(()=>{this.childrenLoaders.delete(i)})),a=new qi(s,()=>new Ue).pipe(zi());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Dk(t,e,n,r){return pr(t.loadChildren()).pipe(L(SD),Oe(i=>i instanceof Ls||Array.isArray(i)?F(i):ie(e.compileModuleAsync(i))),L(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Ml,[],{optional:!0,self:!0}).flat()),{routes:s.map(Ng),injector:o}}))}function Ck(t){return t&&typeof t=="object"&&"default"in t}function SD(t){return Ck(t)?t.default:t}var Fg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(Tk),providedIn:"root"});let t=e;return t})(),Tk=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),MD=new M(""),xD=new M("");function bk(t,e,n){let r=t.get(xD),i=t.get(tt);return t.get(J).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(c=>{o=c}),a=i.startViewTransition(()=>(o(),Ak(t))),{onViewTransitionCreated:u}=r;return u&&dn(t,()=>u({transition:a,from:e,to:n})),s})}function Ak(t){return new Promise(e=>{Dp(e,{injector:t})})}var Vg=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ue,this.transitionAbortSubject=new Ue,this.configLoader=C(kg),this.environmentInjector=C(ct),this.urlSerializer=C(ya),this.rootContexts=C(va),this.location=C(ho),this.inputBindingEnabled=C(Pl,{optional:!0})!==null,this.titleStrategy=C(AD),this.options=C(Ea,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=C(Fg),this.createViewTransition=C(MD,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let r=o=>this.events.next(new pg(o)),i=o=>this.events.next(new gg(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ge(N(N({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Ke({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:sa,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Be(s=>s.id!==0),L(s=>ge(N({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ve(s=>{this.currentTransition=s;let a=!1,u=!1;return F(s).pipe(Me(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ge(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ve(c=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new fr(c.id,this.urlSerializer.serialize(c.rawUrl),h,El.IgnoredSameUrlNavigation)),c.resolve(null),gt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return F(c).pipe(ve(h=>{let f=this.transitions?.getValue();return this.events.next(new wo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?gt:Promise.resolve(h)}),yk(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Me(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ge(N({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Il(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:_,restoredState:v,extras:m}=c,I=new wo(h,this.urlSerializer.serialize(f),_,v);this.events.next(I);let P=mD(this.rootComponentType).snapshot;return this.currentTransition=s=ge(N({},c),{targetSnapshot:P,urlAfterRedirects:f,extras:ge(N({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,F(s)}else{let h="";return this.events.next(new fr(c.id,this.urlSerializer.serialize(c.extractedUrl),h,El.IgnoredByUrlHandlingStrategy)),c.resolve(null),gt}}),Me(c=>{let l=new lg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),L(c=>(this.currentTransition=s=ge(N({},c),{guards:k1(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),H1(this.environmentInjector,c=>this.events.next(c)),Me(c=>{if(s.guardsResult=c.guardsResult,_o(c.guardsResult))throw wD(this.urlSerializer,c.guardsResult);let l=new dg(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Be(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Ot.GuardRejected),!1)),ig(c=>{if(c.guards.canActivateChecks.length)return F(c).pipe(Me(l=>{let d=new hg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ve(l=>{let d=!1;return F(l).pipe(vk(this.paramsInheritanceStrategy,this.environmentInjector),Me({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Ot.NoDataFromResolver)}}))}),Me(l=>{let d=new fg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),ig(c=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Me(f=>{d.component=f}),L(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Ds(l(c.targetSnapshot.root)).pipe(er(null),Pn(1))}),ig(()=>this.afterPreactivation()),ve(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?ie(d).pipe(L(()=>s)):F(s)}),L(c=>{let l=A1(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=ge(N({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Me(()=>{this.events.next(new da)}),O1(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Pn(1),Me({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new jn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),af(this.transitionAbortSubject.pipe(Me(c=>{throw c}))),tr(()=>{!a&&!u&&this.cancelNavigationTransition(s,"",Ot.SupersededByNewNavigation),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),Jn(c=>{if(u=!0,ID(c))this.events.next(new hr(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),x1(c)?this.events.next(new ha(c.url)):s.resolve(!1);else{this.events.next(new la(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(l)}}return gt}))}))}cancelNavigationTransition(r,i,o){let s=new hr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Sk(t){return t!==sa}var Mk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(xk),providedIn:"root"});let t=e;return t})(),xg=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},xk=(()=>{let e=class e extends xg{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Uc(e)))(o||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),PD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:()=>C(Pk),providedIn:"root"});let t=e;return t})(),Pk=(()=>{let e=class e extends PD{constructor(){super(...arguments),this.location=C(ho),this.urlSerializer=C(ya),this.options=C(Ea,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=C(Fg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new dr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=mD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof wo)this.stateMemento=this.createStateMemento();else if(r instanceof fr)this.rawUrlTree=i.initialUrl;else if(r instanceof Il){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof da?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof hr&&(r.code===Ot.GuardRejected||r.code===Ot.NoDataFromResolver)?this.restoreHistory(i):r instanceof la?this.restoreHistory(i,!0):r instanceof jn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=N(N({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=N(N({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Uc(e)))(o||e)}})(),e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ia=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ia||{});function RD(t,e){t.events.pipe(Be(n=>n instanceof jn||n instanceof hr||n instanceof la||n instanceof fr),L(n=>n instanceof jn||n instanceof fr?ia.COMPLETE:(n instanceof hr?n.code===Ot.Redirect||n.code===Ot.SupersededByNewNavigation:!1)?ia.REDIRECTING:ia.FAILED),Be(n=>n!==ia.REDIRECTING),Pn(1)).subscribe(()=>{e()})}function Rk(t){throw t}var Nk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ok={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},oi=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=C(Xc),this.stateManager=C(PD),this.options=C(Ea,{optional:!0})||{},this.pendingTasks=C(Zr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=C(Vg),this.urlSerializer=C(ya),this.location=C(ho),this.urlHandlingStrategy=C(Fg),this._events=new Ue,this.errorHandler=this.options.errorHandler||Rk,this.navigated=!1,this.routeReuseStrategy=C(Mk),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=C(Ml,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!C(Pl,{optional:!0}),this.eventsSubscription=new Se,this.isNgZoneEnabled=C(J)instanceof J&&J.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof hr&&i.code!==Ot.Redirect&&i.code!==Ot.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof jn)this.navigated=!0;else if(i instanceof ha){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Sk(o.source)};this.scheduleNavigation(a,sa,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}Fk(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),sa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=N({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Ng),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:c}=i,l=c?this.currentUrlTree.fragment:a,d=null;switch(u){case"merge":d=N(N({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=hD(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return fD(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=_o(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,sa,null,i)}navigate(r,i={skipLocationChange:!1}){return kk(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=N({},Nk):i===!1?o=N({},Ok):o=i,_o(r))return K0(this.currentUrlTree,r,o);let s=this.parseUrl(r);return K0(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let u,c,l;a?(u=a.resolve,c=a.reject,l=a.promise):l=new Promise((h,f)=>{u=h,c=f});let d=this.pendingTasks.add();return RD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function kk(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new U(4008,!1)}function Fk(t){return!(t instanceof da)&&!(t instanceof ha)}var xl=class{};var Vk=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Be(r=>r instanceof jn),xn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=Zc(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,u=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(u,s.children??s._loadedRoutes))}return ie(o).pipe(Xn())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=F(null);let s=o.pipe(Oe(a=>a===null?F(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return ie([s,a]).pipe(Xn())}else return s})}};e.\u0275fac=function(i){return new(i||e)(D(oi),D(Jc),D(ct),D(xl),D(kg))},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ND=new M(""),Lk=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof wo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof jn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof fr&&r.code===El.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Dl&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Dl(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){OI()},e.\u0275prov=O({token:e,factory:e.\u0275fac});let t=e;return t})();function jk(t){return t.routerState.root}function Ia(t,e){return{\u0275kind:t,\u0275providers:e}}function Uk(){let t=C(Wt);return e=>{let n=t.get(Xr);if(e!==n.components[0])return;let r=t.get(oi),i=t.get(OD);t.get(Lg)===1&&r.initialNavigation(),t.get(kD,null,Y.Optional)?.setUpPreloading(),t.get(ND,null,Y.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var OD=new M("",{factory:()=>new Ue}),Lg=new M("",{providedIn:"root",factory:()=>1});function Bk(){return Ia(2,[{provide:Lg,useValue:0},{provide:nl,multi:!0,deps:[Wt],useFactory:e=>{let n=e.get(_0,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(oi),o=e.get(OD);RD(i,()=>{r(!0)}),e.get(Vg).afterPreactivation=()=>(r(!0),o.closed?F(void 0):o),i.initialNavigation()}))}}])}function $k(){return Ia(3,[{provide:nl,multi:!0,useFactory:()=>{let e=C(oi);return()=>{e.setUpLocationChangeListener()}}},{provide:Lg,useValue:2}])}var kD=new M("");function zk(t){return Ia(0,[{provide:kD,useExisting:Vk},{provide:xl,useExisting:t}])}function qk(){return Ia(8,[X0,{provide:Pl,useExisting:X0}])}function Hk(t){let e=[{provide:MD,useValue:bk},{provide:xD,useValue:N({skipNextTransition:!!t?.skipInitialTransition},t)}];return Ia(9,e)}var eD=new M("ROUTER_FORROOT_GUARD"),Gk=[ho,{provide:ya,useClass:ua},oi,va,{provide:Eo,useFactory:jk,deps:[oi]},kg,[]],jg=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[Gk,[],{provide:Ml,multi:!0,useValue:r},{provide:eD,useFactory:Yk,deps:[[oi,new Hs,new uI]]},{provide:Ea,useValue:i||{}},i?.useHash?Kk():Qk(),Wk(),i?.preloadingStrategy?zk(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Zk(i):[],i?.bindToComponentInputs?qk().\u0275providers:[],i?.enableViewTransitions?Hk().\u0275providers:[],Xk()]}}static forChild(r){return{ngModule:e,providers:[{provide:Ml,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(D(eD,8))},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({});let t=e;return t})();function Wk(){return{provide:ND,useFactory:()=>{let t=C(C0),e=C(J),n=C(Ea),r=C(Vg),i=C(ya);return n.scrollOffset&&t.setOffset(n.scrollOffset),new Lk(i,r,t,e,n)}}}function Kk(){return{provide:ei,useClass:E0}}function Qk(){return{provide:ei,useClass:Up}}function Yk(t){return"guarded"}function Zk(t){return[t.initialNavigation==="disabled"?$k().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Bk().\u0275providers:[]]}var tD=new M("");function Xk(){return[{provide:tD,useFactory:Uk},{provide:rl,multi:!0,useExisting:tD}]}var Jk=[],FD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({imports:[jg.forRoot(Jk),jg]});let t=e;return t})();var Nl=(()=>{let e=class e{constructor(){this.Show_Menu=!1}Toggle_List_Of_Menu(){this.Show_Menu=!this.Show_Menu}Disable_List_Of_Menu(){this.Show_Menu=!1}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=O({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function eF(t,e){t&1&&(fe(0,"ul",1)(1,"li",2)(2,"a"),vt(3,"\u0648\u0627\u0641\u0644"),ae(),xe(4,"img",3),ae(),fe(5,"li",2)(6,"a"),vt(7,"\u0631\u0632 \u0628\u0644\u0628\u0646 "),ae(),xe(8,"img",4),ae(),fe(9,"li",2)(10,"a"),vt(11,"\u0641\u0634\u0627\u0631 "),ae(),xe(12,"img",5),ae(),fe(13,"li",2)(14,"a"),vt(15,"\u0643\u0648\u0641\u064A "),ae(),xe(16,"img",6),ae()())}var LD=(()=>{let e=class e{constructor(r){this.Serv_nav=r}get Show_Menu(){return this.Serv_nav.Show_Menu}};e.\u0275fac=function(i){return new(i||e)(hn(Nl))},e.\u0275cmp=ur({type:e,selectors:[["app-nav-list-of-menu"]],decls:1,vars:1,consts:[["class","list-of-menu",4,"ngIf"],[1,"list-of-menu"],[1,"list-of-menu-item"],["src","assets/imageing/\u0644\u0628\u0629-\u0648\u0627\u0641\u0644.gif","alt","",1,"list-of-menu-img"],["src","assets/imageing/2\u0631\u0632-\u0628\u0644\u0628\u0646.gif","alt","",1,"list-of-menu-img"],["src","assets/imageing/2\u0639\u0644\u0628\u0629-\u0641\u064A\u0634\u0627\u0631.gif","alt","",1,"list-of-menu-img"],["src","assets/imageing/\u0639\u0644\u0628\u0629-\u0643\u0648\u0641\u0649.gif","alt","",1,"list-of-menu-img"]],template:function(i,o){i&1&&bp(0,eF,17,0,"ul",0),i&2&&Ap("ngIf",o.Show_Menu)},dependencies:[I0],styles:["ul[_ngcontent-%COMP%]{list-style:none;display:flex;flex-direction:row-reverse;justify-content:space-evenly;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:8px;display:flex;flex-direction:column-reverse;justify-content:center;align-items:center;cursor:pointer}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .nav-img[_ngcontent-%COMP%]{width:24px}.list-of-menu[_ngcontent-%COMP%]{position:absolute;background:radial-gradient(circle at top,#ffb564,#ec9a41);border:1px solid #505050;top:-50px;left:50%;transform:translate(-50%);border-radius:6px;box-shadow:0 20px 16px #00000063}.list-of-menu[_ngcontent-%COMP%]   .list-of-menu-item[_ngcontent-%COMP%]{margin:10px 18px;position:relative}.list-of-menu[_ngcontent-%COMP%]   .list-of-menu-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{white-space:nowrap;font-size:small;margin:3px;font-weight:700}.list-of-menu[_ngcontent-%COMP%]   .list-of-menu-item[_ngcontent-%COMP%]   .list-of-menu-img[_ngcontent-%COMP%]{position:absolute;top:-46px;width:70px;height:54px;filter:drop-shadow(0px 2px 1px rgba(0,0,0,.5))}"]});let t=e;return t})();var jD=(()=>{let e=class e{constructor(r){this.Serv_nav=r}get Show_Menu(){return this.Serv_nav.Show_Menu}};e.\u0275fac=function(i){return new(i||e)(hn(Nl))},e.\u0275cmp=ur({type:e,selectors:[["app-nav-bar"]],decls:19,vars:0,consts:[["id","menu"],[3,"click"],["src","assets/tools/home.png",1,"nav-img"],[1,"Parent-of-list-of-menu",3,"click"],["src","assets/tools/menu.png",1,"nav-img"],["src","assets/tools/cart.png",1,"nav-img"],["src","assets/tools/contact-us.png",1,"nav-img"]],template:function(i,o){i&1&&(fe(0,"nav")(1,"ul",0)(2,"li",1),cr("click",function(){return o.Serv_nav.Disable_List_Of_Menu()}),fe(3,"a"),vt(4,"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629"),ae(),xe(5,"img",2),ae(),fe(6,"li",3),cr("click",function(){return o.Serv_nav.Toggle_List_Of_Menu()}),fe(7,"a"),vt(8,"\u0627\u0644\u0645\u0646\u064A\u0648"),ae(),xe(9,"img",4)(10,"app-nav-list-of-menu"),ae(),fe(11,"li",1),cr("click",function(){return o.Serv_nav.Disable_List_Of_Menu()}),fe(12,"a"),vt(13,"\u0627\u0644\u0633\u0644\u0629"),ae(),xe(14,"img",5),ae(),fe(15,"li",1),cr("click",function(){return o.Serv_nav.Disable_List_Of_Menu()}),fe(16,"a"),vt(17,"\u0625\u062A\u0635\u0644 \u0628\u0646\u0627"),ae(),xe(18,"img",6),ae()()())},dependencies:[LD],styles:["ul[_ngcontent-%COMP%]{list-style:none;display:flex;flex-direction:row-reverse;justify-content:space-evenly;padding:0;margin:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:8px;display:flex;flex-direction:column-reverse;justify-content:center;align-items:center;cursor:pointer}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .nav-img[_ngcontent-%COMP%]{width:24px}.Parent-of-list-of-menu[_ngcontent-%COMP%]{position:relative}"]});let t=e;return t})();var UD=(()=>{let e=class e{constructor(){this.title="Front"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ur({type:e,selectors:[["app-root"]],decls:26,vars:0,consts:[[1,"container"],[1,"row","logo"],["src","assets/logo1.jpg","alt","logo","loading","lazy"],[1,"row","justify-content-center"],[1,"nav-on-screen"],[1,"Product-intro","col-12"],[1,"Product-intro-row","row"],[1,"col-lg-6","col-md-6","col-sm-6"],["src","assets/imageing/WhatsApp Image 2024-02-11 at 17.16.00_d7ed65b5.jpg","alt","",1,"image-intro"],[1,"Bumbo-into","col-lg-6","col-md-6","col-sm-6"],[1,"Product-Hightlight","scroll-container","row"],[1,"col-lg-4","col-md-6","col-sm-6"],["src","assets/imageing/1.jpg","alt","",1,"scroll-item"],["src","assets/imageing/2.jpg","alt","",1,"scroll-item"],["src","assets/imageing/3.jpg","alt","",1,"scroll-item"],[1,"nav-on-mobile"]],template:function(i,o){i&1&&(fe(0,"div",0)(1,"div",1),xe(2,"img",2),ae(),fe(3,"div",3),xe(4,"app-nav-bar",4),fe(5,"div",5)(6,"div",6)(7,"div",7),xe(8,"img",8),ae(),fe(9,"div",9)(10,"h2")(11,"strong"),vt(12," \u0628\u0648\u0645\u0628\u0648 "),ae()(),fe(13,"p"),vt(14," \u0646\u0634\u0623\u062A \u0641\u0649 \u0627\u0631\u0636 \u0627\u0644\u062D\u0636\u0627\u0631\u0629 \u0641\u0623\u062F\u0631\u0643\u062A \u0623\u0646\u0646\u064A \u063A\u0628\u062A \u0639\u0634\u0631\u0627\u062A \u0627\u0644\u0642\u0631\u0648\u0646 \u0639\u0646 \u0627\u0644\u0639\u0627\u0644\u0645 \u0641\u0648\u0642 \u0627\u0644\u0633\u0645\u0627\u0621 \u0648 \u0627\u0644\u064A\u0648\u0645 \u0627\u062A\u064A\u062A \u0627\u0644\u0649 \u0627\u0631\u0636 \u0645\u062C\u0627\u0646 \u0644\u0627\u0645\u062F\u0643\u0645 \u0628\u0627\u0644\u062D\u0628 \u0648 \u0627\u0644\u0637\u0627\u0642\u0629 \u0648 \u0627\u0644\u0637\u0639\u0645 \u0627\u0644\u0627\u0641\u0636\u0644 \u0641\u0649 \u0639\u064F\u0645\u0627\u0646 "),ae(),fe(15,"p")(16,"strong"),vt(17," Boumbo - Oman's\xA0best\xA0flavor "),ae()()()()(),fe(18,"div",10)(19,"div",11),xe(20,"img",12),ae(),fe(21,"div",11),xe(22,"img",13),ae(),fe(23,"div",11),xe(24,"img",14),ae()()()(),xe(25,"app-nav-bar",15))},dependencies:[jD],styles:[".container[_ngcontent-%COMP%]{box-shadow:0 0 6px 2px #0000006e;height:-webkit-fill-available;overflow:auto;background:radial-gradient(circle at center,#fce0c2,#da7e1b);padding-bottom:150px}.container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{max-height:400px;overflow:hidden;display:flex;align-content:flex-start}.container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:0}.Mahmoud[_ngcontent-%COMP%]{padding:0;text-align:center}.Mahmoud[_ngcontent-%COMP%]   .MyCard[_ngcontent-%COMP%]{background-color:#c7c7c7;min-height:150px;margin:4px;width:-webkit-fill-available;box-shadow:2px 3px 6px #0000006e;border-radius:4px}.Mahmoud[_ngcontent-%COMP%]   .MyCard[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:-webkit-fill-available}.Product-intro[_ngcontent-%COMP%]   .image-intro[_ngcontent-%COMP%]{max-width:85%}.Product-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.Product-intro[_ngcontent-%COMP%]   .Product-intro-row[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.Product-intro[_ngcontent-%COMP%]   .Product-intro-row[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:12px;box-shadow:2px 3px 6px #000000f2}.Product-intro[_ngcontent-%COMP%]   .Product-intro-row[_ngcontent-%COMP%]   .Bumbo-into[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center}.Product-Hightlight[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.Product-Hightlight[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:85%;margin:18px 0;border-radius:4px;filter:drop-shadow(2px 3px 6px #00000075)}.nav-on-mobile[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 768px){.nav-on-screen[_ngcontent-%COMP%]{display:none}.nav-on-mobile[_ngcontent-%COMP%]{display:block;z-index:1;position:absolute;bottom:0;background:radial-gradient(circle at top,#ffb564,#ec9a41);border-top:3px solid #505050;border-radius:17px 17px 0 0;box-shadow:0 -10px 11px #00000017;width:100%}}"]});let t=e;return t})();var rF="firebase",iF="10.8.0";Zn(rF,iF,"app");var ai=new kn("ANGULARFIRE2_VERSION");var oF=(t,e)=>{let n=e?[e]:Z_(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},si=class{constructor(){return oF(sF)}},sF="app-check";function Ug(){}var Ol=class{zone;delegate;constructor(e,n=Xh){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},Bg=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ug,{},Ug,Ug)),n.pipe(Me({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},kl=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ol(Zone.current)),this.insideAngular=n.run(()=>new Ol(Zone.current,Is)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(D(J))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function aF(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function _t(t){return uF(aF())(t)}function uF(t){return function(n){return n=n.lift(new Bg(t.ngZone)),n.pipe($t(t.outsideAngular),Mt(t.insideAngular))}}var dF=new Map,hF={activated:!1,tokenObservers:[]},fF={initialized:!1,enabled:!1};function Kt(t){return dF.get(t)||Object.assign({},hF)}function GD(){return fF}var pF="https://content-firebaseappcheck.googleapis.com/v1";var gF="exchangeDebugToken",$D={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},LH=24*60*60*1e3;var zg=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new Fh,this.pending.promise.catch(n=>{}),yield mF(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Fh,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function mF(t){return new Promise(e=>{setTimeout(e,t)})}var yF={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},gr=new Q_("appCheck","AppCheck",yF);function WD(t){if(!Kt(t).activated)throw gr.create("use-before-activation",{appName:t.name})}function KD(r,i){return y(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(f){throw gr.create("fetch-network-error",{originalErrorMessage:f?.message})}if(u.status!==200)throw gr.create("fetch-status-error",{httpStatus:u.status});let c;try{c=yield u.json()}catch(f){throw gr.create("fetch-parse-error",{originalErrorMessage:f?.message})}let l=c.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw gr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let d=Number(l[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function QD(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${pF}/projects/${n}/apps/${r}:${gF}?key=${i}`,body:{debug_token:e}}}var vF="firebase-app-check-database",_F=1,qg="firebase-app-check-store";var Fl=null;function wF(){return Fl||(Fl=new Promise((t,e)=>{try{let n=indexedDB.open(vF,_F);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(gr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(qg,{keyPath:"compositeKey"})}}}catch(n){e(gr.create("storage-open",{originalErrorMessage:n?.message}))}}),Fl)}function EF(t,e){return IF(DF(t),e)}function IF(t,e){return y(this,null,function*(){let r=(yield wF()).transaction(qg,"readwrite"),o=r.objectStore(qg).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var c;a(gr.create("storage-set",{originalErrorMessage:(c=u.target.error)===null||c===void 0?void 0:c.message}))}})})}function DF(t){return`${t.options.appId}-${t.name}`}var Hg=new Lu("@firebase/app-check");function $g(t,e){return Vu()?EF(t,e).catch(n=>{Hg.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function YD(){return GD().enabled}function ZD(){return y(this,null,function*(){let t=GD();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var CF={error:"UNKNOWN_ERROR"};function TF(t){return G_.encodeString(JSON.stringify(t),!1)}function Gg(t,e=!1){return y(this,null,function*(){let n=t.app;WD(n);let r=Kt(n),i=r.token,o;if(i&&!Da(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Da(u)?i=u:yield $g(n,void 0))}if(!e&&i&&Da(i))return{token:i.token};let s=!1;if(YD()){r.exchangeTokenPromise||(r.exchangeTokenPromise=KD(QD(n,yield ZD()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield $g(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Kt(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Hg.warn(u.message):Hg.error(u),o=u}let a;return i?o?Da(i)?a={token:i.token,internalError:o}:a=qD(o):(a={token:i.token},r.token=i,yield $g(n,i)):a=qD(o),s&&MF(n,a),a})}function bF(t){return y(this,null,function*(){let e=t.app;WD(e);let{provider:n}=Kt(e);if(YD()){let r=yield ZD(),{token:i}=yield KD(QD(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function AF(t,e,n,r){let{app:i}=t,o=Kt(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Da(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),zD(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>zD(t))}function XD(t,e){let n=Kt(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function zD(t){let{app:e}=t,n=Kt(e),r=n.tokenRefresher;r||(r=SF(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function SF(t){let{app:e}=t;return new zg(()=>y(this,null,function*(){let n=Kt(e),r;if(n.token?r=yield Gg(t,!0):r=yield Gg(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Kt(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},$D.RETRIAL_MIN_WAIT,$D.RETRIAL_MAX_WAIT)}function MF(t,e){let n=Kt(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Da(t){return t.expireTimeMillis-Date.now()>0}function qD(t){return{token:TF(CF),error:t}}var Wg=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Kt(this.app);for(let n of e)XD(this.app,n.next);return Promise.resolve()}};function xF(t,e){return new Wg(t,e)}function PF(t){return{getToken:e=>Gg(t,e),getLimitedUseToken:()=>bF(t),addTokenListener:e=>AF(t,"INTERNAL",e),removeTokenListener:e=>XD(t.app,e)}}var RF="@firebase/app-check",NF="0.8.2";var OF="app-check",HD="app-check-internal";function kF(){vs(new Vr(OF,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return xF(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(HD).initialize()})),vs(new Vr(HD,t=>{let e=t.getProvider("app-check").getImmediate();return PF(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Zn(RF,NF)}kF();var FF=["localhost","0.0.0.0","127.0.0.1"],YH=typeof window<"u"&&FF.includes(window.location.hostname);var VF="firebase",LF="10.8.0";st.registerVersion(VF,LF,"app-compat");var jF=["ngOnDestroy"],tC=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(jF.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(c=>n.run(()=>c)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,c)=>s.then(l=>{let d=l?.(...c);return r?.spy?.apply&&r.spy.apply(o,c,d),d})})})});var Vl=class{constructor(e){return e}},Co=new M("angularfire2.app.options"),To=new M("angularfire2.app.name");function Ca(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=st.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>st.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;UF("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Vl(s)}var UF=(t,...e)=>{Np()&&typeof console<"u"&&console[t](...e)},BF={provide:Vl,useFactory:Ca,deps:[Co,J,[new Hs,To]]},nC=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Co,useValue:n},{provide:To,useValue:r}]}}constructor(n){st.registerVersion("angularfire",ai.full,"core"),st.registerVersion("angularfire",ai.full,"app-compat"),st.registerVersion("angular",r0.full,n.toString())}static \u0275fac=function(r){return new(r||t)(D(et))};static \u0275mod=Ce({type:t});static \u0275inj=De({providers:[BF]})}return t})();function Ll(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return $F(i,s)||(eC("error",`${e} was already initialized on the ${n} Firebase App with different settings.${zF?" You may need to reload as Firebase is not HMR aware.":""}`),eC("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function $F(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var zF=typeof module<"u"&&!!module.hot,eC=(t,...e)=>{Np()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Kg=new M("angularfire2.auth.use-emulator"),Qg=new M("angularfire2.auth.settings"),Yg=new M("angularfire2.auth.tenant-id"),Zg=new M("angularfire2.auth.langugage-code"),Xg=new M("angularfire2.auth.use-device-language"),Jg=new M("angularfire.auth.persistence"),em=(t,e,n,r,i,o,s,a)=>Ll(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[c,l]of Object.entries(s))u.settings[c]=l;return a&&u.setPersistence(a),u},[n,r,i,o,s,a]),tm=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,u,c,l,d,h,f){let _=new Ue,v=F(void 0).pipe(Mt(s.outsideAngular),ve(()=>o.runOutsideAngular(()=>import("./chunk-SFVC2T43.js"))),L(()=>Ca(n,o,r)),L(m=>em(m,o,a,c,l,d,u,h)),ac({bufferSize:1,refCount:!1}));if(ti(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=F(null);else{v.pipe(xt()).subscribe();let m=v.pipe(ve(T=>T.getRedirectResult().then(R=>R,()=>null)),_t,ac({bufferSize:1,refCount:!1})),I=v.pipe(ve(T=>new Z(R=>({unsubscribe:o.runOutsideAngular(()=>T.onAuthStateChanged(j=>R.next(j),j=>R.error(j),()=>R.complete()))})))),P=v.pipe(ve(T=>new Z(R=>({unsubscribe:o.runOutsideAngular(()=>T.onIdTokenChanged(j=>R.next(j),j=>R.error(j),()=>R.complete()))}))));this.authState=m.pipe(uc(I),$t(s.outsideAngular),Mt(s.insideAngular)),this.user=m.pipe(uc(P),$t(s.outsideAngular),Mt(s.insideAngular)),this.idToken=this.user.pipe(ve(T=>T?ie(T.getIdToken()):F(null))),this.idTokenResult=this.user.pipe(ve(T=>T?ie(T.getIdTokenResult()):F(null))),this.credential=tf(m,_,this.authState.pipe(Be(T=>!T))).pipe(L(T=>T?.user?T:null),$t(s.outsideAngular),Mt(s.insideAngular))}return tC(this,v,o,{spy:{apply:(m,I,P)=>{(m.startsWith("signIn")||m.startsWith("createUser"))&&P.then(T=>_.next(T))}}})}static \u0275fac=function(r){return new(r||t)(D(Co),D(To,8),D(et),D(J),D(kl),D(Kg,8),D(Qg,8),D(Yg,8),D(Zg,8),D(Xg,8),D(Jg,8),D(si,8))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),rC=(()=>{class t{constructor(){st.registerVersion("angularfire",ai.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ce({type:t});static \u0275inj=De({providers:[tm]})}return t})();var HF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yt={},A,Dm=Dm||{},z=HF||self;function Xl(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function La(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function GF(t){return Object.prototype.hasOwnProperty.call(t,nm)&&t[nm]||(t[nm]=++WF)}var nm="closure_uid_"+(1e9*Math.random()>>>0),WF=0;function KF(t,e,n){return t.call.apply(t.bind,arguments)}function QF(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function nt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?nt=KF:nt=QF,nt.apply(null,arguments)}function jl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function He(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function mr(){this.s=this.s,this.o=this.o}var YF=0;mr.prototype.s=!1;mr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),YF!=0)&&GF(this)};mr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var mC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Cm(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function iC(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Xl(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function rt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var ZF=function(){if(!z.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};z.addEventListener("test",n,e),z.removeEventListener("test",n,e)}catch{}return t}();function xa(t){return/^[\s\xa0]*$/.test(t)}function Jl(){var t=z.navigator;return t&&(t=t.userAgent)?t:""}function gn(t){return Jl().indexOf(t)!=-1}function Tm(t){return Tm[" "](t),t}Tm[" "]=function(){};function XF(t,e){var n=UV;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var JF=gn("Opera"),Mo=gn("Trident")||gn("MSIE"),yC=gn("Edge"),am=yC||Mo,vC=gn("Gecko")&&!(Jl().toLowerCase().indexOf("webkit")!=-1&&!gn("Edge"))&&!(gn("Trident")||gn("MSIE"))&&!gn("Edge"),eV=Jl().toLowerCase().indexOf("webkit")!=-1&&!gn("Edge");function _C(){var t=z.document;return t?t.documentMode:void 0}var um;e:{if(Ul="",Bl=function(){var t=Jl();if(vC)return/rv:([^\);]+)(\)|;)/.exec(t);if(yC)return/Edge\/([\d\.]+)/.exec(t);if(Mo)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(eV)return/WebKit\/(\S+)/.exec(t);if(JF)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Bl&&(Ul=Bl?Bl[1]:""),Mo&&($l=_C(),$l!=null&&$l>parseFloat(Ul))){um=String($l);break e}um=Ul}var Ul,Bl,$l,cm;z.document&&Mo?(rm=_C(),cm=rm||parseInt(um,10)||void 0):cm=void 0;var rm,tV=cm;function Pa(t,e){if(rt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(vC){e:{try{Tm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:nV[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Pa.$.h.call(this)}}He(Pa,rt);var nV={2:"touch",3:"pen",4:"mouse"};Pa.prototype.h=function(){Pa.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ja="closure_listenable_"+(1e6*Math.random()|0),rV=0;function iV(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++rV,this.fa=this.ia=!1}function ed(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function bm(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function oV(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function wC(t){let e={};for(let n in t)e[n]=t[n];return e}var oC="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function EC(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<oC.length;o++)n=oC[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function td(t){this.src=t,this.g={},this.h=0}td.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=dm(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new iV(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function lm(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=mC(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(ed(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function dm(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var Am="closure_lm_"+(1e6*Math.random()|0),im={};function IC(t,e,n,r,i){if(r&&r.once)return CC(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)IC(t,e[o],n,r,i);return null}return n=xm(n),t&&t[ja]?t.O(e,n,La(r)?!!r.capture:!!r,i):DC(t,e,n,!1,r,i)}function DC(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=La(i)?!!i.capture:!!i,a=Mm(t);if(a||(t[Am]=a=new td(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=sV(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ZF||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(bC(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function sV(){function t(n){return e.call(t.src,t.listener,n)}let e=aV;return t}function CC(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)CC(t,e[o],n,r,i);return null}return n=xm(n),t&&t[ja]?t.P(e,n,La(r)?!!r.capture:!!r,i):DC(t,e,n,!0,r,i)}function TC(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)TC(t,e[o],n,r,i);else r=La(r)?!!r.capture:!!r,n=xm(n),t&&t[ja]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=dm(o,n,r,i),-1<n&&(ed(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=Mm(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dm(e,n,r,i)),(n=-1<t?e[t]:null)&&Sm(n))}function Sm(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ja])lm(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(bC(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Mm(e))?(lm(n,t),n.h==0&&(n.src=null,e[Am]=null)):ed(t)}}}function bC(t){return t in im?im[t]:im[t]="on"+t}function aV(t,e){if(t.fa)t=!0;else{e=new Pa(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Sm(t),t=n.call(r,e)}return t}function Mm(t){return t=t[Am],t instanceof td?t:null}var om="__closure_events_fn_"+(1e9*Math.random()>>>0);function xm(t){return typeof t=="function"?t:(t[om]||(t[om]=function(e){return t.handleEvent(e)}),t[om])}function qe(){mr.call(this),this.i=new td(this),this.S=this,this.J=null}He(qe,mr);qe.prototype[ja]=!0;qe.prototype.removeEventListener=function(t,e,n,r){TC(this,t,e,n,r)};function Ye(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new rt(e,t);else if(e instanceof rt)e.target=e.target||t;else{var i=e;e=new rt(r,t),EC(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=zl(s,r,!0,e)&&i}if(s=e.g=t,i=zl(s,r,!0,e)&&i,i=zl(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=zl(s,r,!1,e)&&i}qe.prototype.N=function(){if(qe.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ed(n[r]);delete t.g[e],t.h--}}this.J=null};qe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};qe.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function zl(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&lm(t.i,s),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var Pm=z.JSON.stringify,hm=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function uV(){var t=Rm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var fm=class{constructor(){this.h=this.g=null}add(e,n){let r=AC.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},AC=new hm(()=>new pm,t=>t.reset()),pm=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function cV(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function lV(t){z.setTimeout(()=>{throw t},0)}var Ra,Na=!1,Rm=new fm,SC=()=>{let t=z.Promise.resolve(void 0);Ra=()=>{t.then(dV)}},dV=()=>{for(var t;t=uV();){try{t.h.call(t.g)}catch(n){lV(n)}var e=AC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Na=!1};function nd(t,e){qe.call(this),this.h=t||1,this.g=e||z,this.j=nt(this.qb,this),this.l=Date.now()}He(nd,qe);A=nd.prototype;A.ga=!1;A.T=null;A.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ye(this,"tick"),this.ga&&(Nm(this),this.start()))}};A.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Nm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}A.N=function(){nd.$.N.call(this),Nm(this),delete this.g};function Om(t,e,n){if(typeof t=="function")n&&(t=nt(t,n));else if(t&&typeof t.handleEvent=="function")t=nt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:z.setTimeout(t,e||0)}function MC(t){t.g=Om(()=>{t.g=null,t.i&&(t.i=!1,MC(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var gm=class extends mr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:MC(this)}N(){super.N(),this.g&&(z.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Oa(t){mr.call(this),this.h=t,this.g={}}He(Oa,mr);var sC=[];function xC(t,e,n,r){Array.isArray(n)||(n&&(sC[0]=n.toString()),n=sC);for(var i=0;i<n.length;i++){var o=IC(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function PC(t){bm(t.g,function(e,n){this.g.hasOwnProperty(n)&&Sm(e)},t),t.g={}}Oa.prototype.N=function(){Oa.$.N.call(this),PC(this)};Oa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function rd(){this.g=!0}rd.prototype.Ea=function(){this.g=!1};function hV(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");s=2<=d.length&&d[1]=="type"?s+(l+"="+c+"&"):s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function fV(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function Ao(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+gV(t,n)+(r?" "+r:"")})}function pV(t,e){t.info(function(){return"TIMEOUT: "+e})}rd.prototype.info=function(){};function gV(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return Pm(n)}catch{return e}}var di={},aC=null;function id(){return aC=aC||new qe}di.Ta="serverreachability";function RC(t){rt.call(this,di.Ta,t)}He(RC,rt);function ka(t){let e=id();Ye(e,new RC(e))}di.STAT_EVENT="statevent";function NC(t,e){rt.call(this,di.STAT_EVENT,t),this.stat=e}He(NC,rt);function dt(t){let e=id();Ye(e,new NC(e,t))}di.Ua="timingevent";function OC(t,e){rt.call(this,di.Ua,t),this.size=e}He(OC,rt);function Ua(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return z.setTimeout(function(){t()},e)}var od={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},kC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function km(){}km.prototype.h=null;function uC(t){return t.h||(t.h=t.i())}function FC(){}var Ba={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Fm(){rt.call(this,"d")}He(Fm,rt);function Vm(){rt.call(this,"c")}He(Vm,rt);var mm;function sd(){}He(sd,km);sd.prototype.g=function(){return new XMLHttpRequest};sd.prototype.i=function(){return{}};mm=new sd;function $a(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Oa(this),this.P=mV,t=am?125:void 0,this.V=new nd(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new VC}function VC(){this.i=null,this.g="",this.h=!1}var mV=45e3,LC={},ym={};A=$a.prototype;A.setTimeout=function(t){this.P=t};function vm(t,e,n){t.L=1,t.A=ud(Bn(e)),t.u=n,t.S=!0,jC(t,null)}function jC(t,e){t.G=Date.now(),za(t),t.B=Bn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),WC(n.i,"t",r),t.o=0,n=t.l.J,t.h=new VC,t.g=pT(t.l,n?e:null,!t.u),0<t.O&&(t.M=new gm(nt(t.Pa,t,t.g),t.O)),xC(t.U,t.g,"readystatechange",t.nb),e=t.I?wC(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ka(),hV(t.j,t.v,t.B,t.m,t.W,t.u)}A.nb=function(t){t=t.target;let e=this.M;e&&mn(t)==3?e.l():this.Pa(t)};A.Pa=function(t){try{if(t==this.g)e:{let l=mn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||am||this.g&&(this.h.h||this.g.ja()||hC(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?ka(3):ka(2)),ad(this);var n=this.g.da();this.ca=n;t:if(UC(this)){var r=hC(this.g);t="";var i=r.length,o=mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ui(this),Ma(this);var s="";break t}this.h.i=new z.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,fV(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xa(a)){var c=a;break t}}c=null}if(n=c)Ao(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_m(this,n);else{this.i=!1,this.s=3,dt(12),ui(this),Ma(this);break e}}this.S?(BC(this,l,s),am&&this.i&&l==3&&(xC(this.U,this.V,"tick",this.mb),this.V.start())):(Ao(this.j,this.m,s,null),_m(this,s)),l==4&&ui(this),this.i&&!this.J&&(l==4?lT(this.l,this):(this.i=!1,za(this)))}else VV(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),ui(this),Ma(this)}}}catch{}finally{}};function UC(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function BC(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=yV(t,n),i==ym){e==4&&(t.s=4,dt(14),r=!1),Ao(t.j,t.m,null,"[Incomplete Response]");break}else if(i==LC){t.s=4,dt(15),Ao(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ao(t.j,t.m,i,null),_m(t,i);UC(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,dt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),zm(e),e.M=!0,dt(11))):(Ao(t.j,t.m,n,"[Invalid Chunked Response]"),ui(t),Ma(t))}A.mb=function(){if(this.g){var t=mn(this.g),e=this.g.ja();this.o<e.length&&(ad(this),BC(this,t,e),this.i&&t!=4&&za(this))}};function yV(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?ym:(n=Number(e.substring(n,r)),isNaN(n)?LC:(r+=1,r+n>e.length?ym:(e=e.slice(r,r+n),t.o=r+n,e)))}A.cancel=function(){this.J=!0,ui(this)};function za(t){t.Y=Date.now()+t.P,$C(t,t.P)}function $C(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Ua(nt(t.lb,t),e)}function ad(t){t.C&&(z.clearTimeout(t.C),t.C=null)}A.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(pV(this.j,this.B),this.L!=2&&(ka(),dt(17)),ui(this),this.s=2,Ma(this)):$C(this,this.Y-t)};function Ma(t){t.l.H==0||t.J||lT(t.l,t)}function ui(t){ad(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Nm(t.V),PC(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function _m(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||wm(n.i,t))){if(!t.K&&wm(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Kl(n),dd(n);else break e;$m(n),dt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ua(nt(n.ib,n),6e3));if(1>=YC(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ci(n,11)}else if((t.K||n.g==t)&&Kl(n),!xa(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let l=c[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let _=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var o=r.i;o.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(Lm(o,o.h),o.h=null))}if(r.F){let v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,me(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=fT(r,r.J?r.pa:null,r.Y),s.K){ZC(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(ad(a),za(a)),r.g=s}else uT(r);0<n.j.length&&hd(n)}else c[0]!="stop"&&c[0]!="close"||ci(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?ci(n,7):Bm(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}ka(4)}catch{}}function vV(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Xl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function _V(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Xl(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function zC(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Xl(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=_V(t),r=vV(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var qC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wV(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function li(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof li){this.h=t.h,Gl(this,t.j),this.s=t.s,this.g=t.g,Wl(this,t.m),this.l=t.l;var e=t.i,n=new Fa;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),cC(this,n),this.o=t.o}else t&&(e=String(t).match(qC))?(this.h=!1,Gl(this,e[1]||"",!0),this.s=Aa(e[2]||""),this.g=Aa(e[3]||"",!0),Wl(this,e[4]),this.l=Aa(e[5]||"",!0),cC(this,e[6]||"",!0),this.o=Aa(e[7]||"")):(this.h=!1,this.i=new Fa(null,this.h))}li.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Sa(e,lC,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Sa(e,lC,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Sa(n,n.charAt(0)=="/"?DV:IV,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Sa(n,TV)),t.join("")};function Bn(t){return new li(t)}function Gl(t,e,n){t.j=n?Aa(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Wl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function cC(t,e,n){e instanceof Fa?(t.i=e,bV(t.i,t.h)):(n||(e=Sa(e,CV)),t.i=new Fa(e,t.h))}function me(t,e,n){t.i.set(e,n)}function ud(t){return me(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Aa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Sa(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,EV),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function EV(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var lC=/[#\/\?@]/g,IV=/[#\?:]/g,DV=/[#\?]/g,CV=/[#\?@]/g,TV=/#/g;function Fa(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function yr(t){t.g||(t.g=new Map,t.h=0,t.i&&wV(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}A=Fa.prototype;A.add=function(t,e){yr(this),this.i=null,t=xo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function HC(t,e){yr(t),e=xo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function GC(t,e){return yr(t),e=xo(t,e),t.g.has(e)}A.forEach=function(t,e){yr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};A.ta=function(){yr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};A.Z=function(t){yr(this);let e=[];if(typeof t=="string")GC(this,t)&&(e=e.concat(this.g.get(xo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};A.set=function(t,e){return yr(this),this.i=null,t=xo(this,t),GC(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};A.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function WC(t,e,n){HC(t,e),0<n.length&&(t.i=null,t.g.set(xo(t,e),Cm(n)),t.h+=n.length)}A.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function xo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function bV(t,e){e&&!t.j&&(yr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(HC(this,r),WC(this,i,n))},t)),t.j=e}var AV=class{constructor(t,e){this.g=t,this.map=e}};function KC(t){this.l=t||SV,z.PerformanceNavigationTiming?(t=z.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(z.g&&z.g.Ka&&z.g.Ka()&&z.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var SV=10;function QC(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function YC(t){return t.h?1:t.g?t.g.size:0}function wm(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Lm(t,e){t.g?t.g.add(e):t.h=e}function ZC(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}KC.prototype.cancel=function(){if(this.i=XC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function XC(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Cm(t.i)}var MV=class{stringify(t){return z.JSON.stringify(t,void 0)}parse(t){return z.JSON.parse(t,void 0)}};function xV(){this.g=new MV}function PV(t,e,n){let r=n||"";try{zC(t,function(i,o){let s=i;La(i)&&(s=Pm(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function RV(t,e){let n=new rd;if(z.Image){let r=new Image;r.onload=jl(ql,n,r,"TestLoadImage: loaded",!0,e),r.onerror=jl(ql,n,r,"TestLoadImage: error",!1,e),r.onabort=jl(ql,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=jl(ql,n,r,"TestLoadImage: timeout",!1,e),z.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ql(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function qa(t){this.l=t.ec||null,this.j=t.ob||!1}He(qa,km);qa.prototype.g=function(){return new cd(this.l,this.j)};qa.prototype.i=function(t){return function(){return t}}({});function cd(t,e){qe.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=jm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}He(cd,qe);var jm=0;A=cd.prototype;A.open=function(t,e){if(this.readyState!=jm)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Va(this)};A.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||z).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};A.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ha(this)),this.readyState=jm};A.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Va(this)),this.g&&(this.readyState=3,Va(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof z.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;JC(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function JC(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}A.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ha(this):Va(this),this.readyState==3&&JC(this)}};A.Za=function(t){this.g&&(this.response=this.responseText=t,Ha(this))};A.Ya=function(t){this.g&&(this.response=t,Ha(this))};A.ka=function(){this.g&&Ha(this)};function Ha(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Va(t)}A.setRequestHeader=function(t,e){this.v.append(t,e)};A.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};A.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Va(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(cd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var NV=z.JSON.parse;function Te(t){qe.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=eT,this.L=this.M=!1}He(Te,qe);var eT="",OV=/^https?$/i,kV=["POST","PUT"];A=Te.prototype;A.Oa=function(t){this.M=t};A.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():mm.g(),this.C=this.u?uC(this.u):uC(mm),this.g.onreadystatechange=nt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){dC(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=z.FormData&&t instanceof z.FormData,!(0<=mC(kV,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{rT(this),0<this.B&&((this.L=FV(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nt(this.ua,this)):this.A=Om(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){dC(this,o)}};function FV(t){return Mo&&typeof t.timeout=="number"&&t.ontimeout!==void 0}A.ua=function(){typeof Dm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ye(this,"timeout"),this.abort(8))};function dC(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,tT(t),ld(t)}function tT(t){t.F||(t.F=!0,Ye(t,"complete"),Ye(t,"error"))}A.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ye(this,"complete"),Ye(this,"abort"),ld(this))};A.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ld(this,!0)),Te.$.N.call(this)};A.La=function(){this.s||(this.G||this.v||this.l?nT(this):this.kb())};A.kb=function(){nT(this)};function nT(t){if(t.h&&typeof Dm<"u"&&(!t.C[1]||mn(t)!=4||t.da()!=2)){if(t.v&&mn(t)==4)Om(t.La,0,t);else if(Ye(t,"readystatechange"),mn(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(qC)[1]||null;!i&&z.self&&z.self.location&&(i=z.self.location.protocol.slice(0,-1)),r=!OV.test(i?i.toLowerCase():"")}n=r}if(n)Ye(t,"complete"),Ye(t,"success");else{t.m=6;try{var o=2<mn(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",tT(t)}}finally{ld(t)}}}}function ld(t,e){if(t.g){rT(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ye(t,"ready");try{n.onreadystatechange=r}catch{}}}function rT(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(z.clearTimeout(t.A),t.A=null)}A.isActive=function(){return!!this.g};function mn(t){return t.g?t.g.readyState:0}A.da=function(){try{return 2<mn(this)?this.g.status:-1}catch{return-1}};A.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};A.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),NV(e)}};function hC(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case eT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function VV(t){let e={};t=(t.g&&2<=mn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(xa(t[r]))continue;var n=cV(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}oV(e,function(r){return r.join(", ")})}A.Ia=function(){return this.m};A.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function iT(t){let e="";return bm(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Um(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=iT(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):me(t,e,n))}function Ta(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function oT(t){this.Ga=0,this.j=[],this.l=new rd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ta("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ta("baseRetryDelayMs",5e3,t),this.hb=Ta("retryDelaySeedMs",1e4,t),this.eb=Ta("forwardChannelMaxRetries",2,t),this.xa=Ta("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new KC(t&&t.concurrentRequestLimit),this.Ja=new xV,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}A=oT.prototype;A.ra=8;A.H=1;function Bm(t){if(sT(t),t.H==3){var e=t.W++,n=Bn(t.I);if(me(n,"SID",t.K),me(n,"RID",e),me(n,"TYPE","terminate"),Ga(t,n),e=new $a(t,t.l,e),e.L=2,e.A=ud(Bn(n)),n=!1,z.navigator&&z.navigator.sendBeacon)try{n=z.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&z.Image&&(new Image().src=e.A,n=!0),n||(e.g=pT(e.l,null),e.g.ha(e.A)),e.G=Date.now(),za(e)}hT(t)}function dd(t){t.g&&(zm(t),t.g.cancel(),t.g=null)}function sT(t){dd(t),t.u&&(z.clearTimeout(t.u),t.u=null),Kl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&z.clearTimeout(t.m),t.m=null)}function hd(t){if(!QC(t.i)&&!t.m){t.m=!0;var e=t.Na;Ra||SC(),Na||(Ra(),Na=!0),Rm.add(e,t),t.C=0}}function LV(t,e){return YC(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ua(nt(t.Na,t,e),dT(t,t.C)),t.C++,!0)}A.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new $a(this,this.l,t),o=this.s;if(this.U&&(o?(o=wC(o),EC(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=aT(this,i,e),n=Bn(this.I),me(n,"RID",t),me(n,"CVER",22),this.F&&me(n,"X-HTTP-Session-Id",this.F),Ga(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(iT(o)))+"&"+e:this.o&&Um(n,this.o,o)),Lm(this.i,i),this.bb&&me(n,"TYPE","init"),this.P?(me(n,"$req",e),me(n,"SID","null"),i.aa=!0,vm(i,n,null)):vm(i,n,e),this.H=2}}else this.H==3&&(t?fC(this,t):this.j.length==0||QC(this.i)||fC(this))};function fC(t,e){var n;e?n=e.m:n=t.W++;let r=Bn(t.I);me(r,"SID",t.K),me(r,"RID",n),me(r,"AID",t.V),Ga(t,r),t.o&&t.s&&Um(r,t.o,t.s),n=new $a(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=aT(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Lm(t.i,n),vm(n,r,e)}function Ga(t,e){t.na&&bm(t.na,function(n,r){me(e,r,n)}),t.h&&zC({},function(n,r){me(e,r,n)})}function aT(t,e,n){n=Math.min(t.j.length,n);var r=t.h?nt(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let c=i[u].g,l=i[u].map;if(c-=o,0>c)o=Math.max(0,i[u].g-100),a=!1;else try{PV(l,s,"req"+c+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function uT(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ra||SC(),Na||(Ra(),Na=!0),Rm.add(e,t),t.A=0}}function $m(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ua(nt(t.Ma,t),dT(t,t.A)),t.A++,!0)}A.Ma=function(){if(this.u=null,cT(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ua(nt(this.jb,this),t)}};A.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,dt(10),dd(this),cT(this))};function zm(t){t.B!=null&&(z.clearTimeout(t.B),t.B=null)}function cT(t){t.g=new $a(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Bn(t.wa);me(e,"RID","rpc"),me(e,"SID",t.K),me(e,"AID",t.V),me(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&me(e,"TO",t.qa),me(e,"TYPE","xmlhttp"),Ga(t,e),t.o&&t.s&&Um(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=ud(Bn(e)),n.u=null,n.S=!0,jC(n,t)}A.ib=function(){this.v!=null&&(this.v=null,dd(this),$m(this),dt(19))};function Kl(t){t.v!=null&&(z.clearTimeout(t.v),t.v=null)}function lT(t,e){var n=null;if(t.g==e){Kl(t),zm(t),t.g=null;var r=2}else if(wm(t.i,e))n=e.F,ZC(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=id(),Ye(r,new OC(r,n)),hd(t)}else uT(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&LV(t,e)||r==2&&$m(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ci(t,5);break;case 4:ci(t,10);break;case 3:ci(t,6);break;default:ci(t,2)}}}function dT(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ci(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=nt(t.pb,t);n||(n=new li("//www.google.com/images/cleardot.gif"),z.location&&z.location.protocol=="http"||Gl(n,"https"),ud(n)),RV(n.toString(),r)}else dt(2);t.H=0,t.h&&t.h.za(e),hT(t),sT(t)}A.pb=function(t){t?(this.l.info("Successfully pinged google.com"),dt(2)):(this.l.info("Failed to ping google.com"),dt(1))};function hT(t){if(t.H=0,t.ma=[],t.h){let e=XC(t.i);(e.length!=0||t.j.length!=0)&&(iC(t.ma,e),iC(t.ma,t.j),t.i.i.length=0,Cm(t.j),t.j.length=0),t.h.ya()}}function fT(t,e,n){var r=n instanceof li?Bn(n):new li(n);if(r.g!="")e&&(r.g=e+"."+r.g),Wl(r,r.m);else{var i=z.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new li(null);r&&Gl(o,r),e&&(o.g=e),i&&Wl(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&me(r,n,e),me(r,"VER",t.ra),Ga(t,r),r}function pT(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Te(new qa({ob:n})):new Te(t.va),e.Oa(t.J),e}A.isActive=function(){return!!this.h&&this.h.isActive(this)};function gT(){}A=gT.prototype;A.Ba=function(){};A.Aa=function(){};A.za=function(){};A.ya=function(){};A.isActive=function(){return!0};A.Va=function(){};function Ql(){if(Mo&&!(10<=Number(tV)))throw Error("Environmental error: no available transport.")}Ql.prototype.g=function(t,e){return new Tt(t,e)};function Tt(t,e){qe.call(this),this.g=new oT(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!xa(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xa(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Po(this)}He(Tt,qe);Tt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;dt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=fT(t,null,t.Y),hd(t)};Tt.prototype.close=function(){Bm(this.g)};Tt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Pm(t),t=n);e.j.push(new AV(e.fb++,t)),e.H==3&&hd(e)};Tt.prototype.N=function(){this.g.h=null,delete this.j,Bm(this.g),delete this.g,Tt.$.N.call(this)};function mT(t){Fm.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}He(mT,Fm);function yT(){Vm.call(this),this.status=1}He(yT,Vm);function Po(t){this.g=t}He(Po,gT);Po.prototype.Ba=function(){Ye(this.g,"a")};Po.prototype.Aa=function(t){Ye(this.g,new mT(t))};Po.prototype.za=function(t){Ye(this.g,new yT)};Po.prototype.ya=function(){Ye(this.g,"b")};function jV(){this.blockSize=-1}function Qt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}He(Qt,jV);Qt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function sm(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}Qt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)sm(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){sm(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){sm(this,r),i=0;break}}this.h=i,this.i+=e};Qt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ue(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var UV={};function qm(t){return-128<=t&&128>t?XF(t,function(e){return new ue([e|0],0>e?-1:0)}):new ue([t|0],0>t?-1:0)}function yn(t){if(isNaN(t)||!isFinite(t))return So;if(0>t)return Qe(yn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Em;return new ue(e,0)}function vT(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Qe(vT(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=yn(Math.pow(e,8)),r=So,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=yn(Math.pow(e,o)),r=r.R(o).add(yn(s))):(r=r.R(n),r=r.add(yn(s)))}return r}var Em=4294967296,So=qm(0),Im=qm(1),pC=qm(16777216);A=ue.prototype;A.ea=function(){if(Ft(this))return-Qe(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Em+r)*e,e*=Em}return t};A.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Un(this))return"0";if(Ft(this))return"-"+Qe(this).toString(t);for(var e=yn(Math.pow(t,6)),n=this,r="";;){var i=Zl(n,e).g;n=Yl(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Un(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};A.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Un(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Ft(t){return t.h==-1}A.X=function(t){return t=Yl(this,t),Ft(t)?-1:Un(t)?0:1};function Qe(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ue(n,~t.h).add(Im)}A.abs=function(){return Ft(this)?Qe(this):this};A.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new ue(n,n[n.length-1]&-2147483648?-1:0)};function Yl(t,e){return t.add(Qe(e))}A.R=function(t){if(Un(this)||Un(t))return So;if(Ft(this))return Ft(t)?Qe(this).R(Qe(t)):Qe(Qe(this).R(t));if(Ft(t))return Qe(this.R(Qe(t)));if(0>this.X(pC)&&0>t.X(pC))return yn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=s*u,Hl(n,2*r+2*i),n[2*r+2*i+1]+=o*u,Hl(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Hl(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Hl(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ue(n,0)};function Hl(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ba(t,e){this.g=t,this.h=e}function Zl(t,e){if(Un(e))throw Error("division by zero");if(Un(t))return new ba(So,So);if(Ft(t))return e=Zl(Qe(t),e),new ba(Qe(e.g),Qe(e.h));if(Ft(e))return e=Zl(t,Qe(e)),new ba(Qe(e.g),e.h);if(30<t.g.length){if(Ft(t)||Ft(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Im,r=e;0>=r.X(t);)n=gC(n),r=gC(r);var i=bo(n,1),o=bo(r,1);for(r=bo(r,2),n=bo(n,2);!Un(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=bo(r,1),n=bo(n,1)}return e=Yl(t,i.R(e)),new ba(i,e)}for(i=So;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=yn(n),s=o.R(e);Ft(s)||0<s.X(t);)n-=r,o=yn(n),s=o.R(e);Un(o)&&(o=Im),i=i.add(o),t=Yl(t,s)}return new ba(i,t)}A.gb=function(t){return Zl(this,t).h};A.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ue(n,this.h&t.h)};A.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ue(n,this.h|t.h)};A.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ue(n,this.h^t.h)};function gC(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ue(n,t.h)}function bo(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new ue(i,t.h)}Ql.prototype.createWebChannel=Ql.prototype.g;Tt.prototype.send=Tt.prototype.u;Tt.prototype.open=Tt.prototype.m;Tt.prototype.close=Tt.prototype.close;od.NO_ERROR=0;od.TIMEOUT=8;od.HTTP_ERROR=6;kC.COMPLETE="complete";FC.EventType=Ba;Ba.OPEN="a";Ba.CLOSE="b";Ba.ERROR="c";Ba.MESSAGE="d";qe.prototype.listen=qe.prototype.O;Te.prototype.listenOnce=Te.prototype.P;Te.prototype.getLastError=Te.prototype.Sa;Te.prototype.getLastErrorCode=Te.prototype.Ia;Te.prototype.getStatus=Te.prototype.da;Te.prototype.getResponseJson=Te.prototype.Wa;Te.prototype.getResponseText=Te.prototype.ja;Te.prototype.send=Te.prototype.ha;Te.prototype.setWithCredentials=Te.prototype.Oa;Qt.prototype.digest=Qt.prototype.l;Qt.prototype.reset=Qt.prototype.reset;Qt.prototype.update=Qt.prototype.j;ue.prototype.add=ue.prototype.add;ue.prototype.multiply=ue.prototype.R;ue.prototype.modulo=ue.prototype.gb;ue.prototype.compare=ue.prototype.X;ue.prototype.toNumber=ue.prototype.ea;ue.prototype.toString=ue.prototype.toString;ue.prototype.getBits=ue.prototype.D;ue.fromNumber=yn;ue.fromString=vT;var _T=Yt.createWebChannelTransport=function(){return new Ql},wT=Yt.getStatEventTarget=function(){return id()},fd=Yt.ErrorCode=od,ET=Yt.EventType=kC,IT=Yt.Event=di,Hm=Yt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},EG=Yt.FetchXmlHttpFactory=qa,Wa=Yt.WebChannel=FC,DT=Yt.XhrIo=Te,CT=Yt.Md5=Qt,hi=Yt.Integer=ue;var TT="@firebase/firestore";var Ve=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ve.UNAUTHENTICATED=new Ve(null),Ve.GOOGLE_CREDENTIALS=new Ve("google-credentials-uid"),Ve.FIRST_PARTY=new Ve("first-party-uid"),Ve.MOCK_USER=new Ve("mock-user");var as="10.8.0";var Cr=new Lu("@firebase/firestore");function Fo(){return Cr.logLevel}function Cb(t){Cr.setLogLevel(t)}function E(t,...e){if(Cr.logLevel<=tn.DEBUG){let n=e.map(Wv);Cr.debug(`Firestore (${as}): ${t}`,...n)}}function Pe(t,...e){if(Cr.logLevel<=tn.ERROR){let n=e.map(Wv);Cr.error(`Firestore (${as}): ${t}`,...n)}}function Lt(t,...e){if(Cr.logLevel<=tn.WARN){let n=e.map(Wv);Cr.warn(`Firestore (${as}): ${t}`,...n)}}function Wv(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function x(t="Unexpected state"){let e=`FIRESTORE (${as}) INTERNAL ASSERTION FAILED: `+t;throw Pe(e),new Error(e)}function k(t,e){t||x()}function Tb(t,e){t||x()}function S(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},w=class extends K_{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Le=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Cd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ym=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ve.UNAUTHENTICATED))}shutdown(){}},Zm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Xm=class{constructor(e){this.t=e,this.currentUser=Ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new Le;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Le,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>y(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{E("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Le)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(k(typeof r.accessToken=="string"),new Cd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return k(e===null||typeof e=="string"),new Ve(e)}},Jm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ve.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ey=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Jm(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}},ty=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ny=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&E("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,E("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{E("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(k(typeof n.token=="string"),this.R=n.token,new ty(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function BV(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Td=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=BV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function H(t,e){return t<e?-1:t>e?1:0}function Ho(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function bb(t){return t+"\0"}var Ie=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new w(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new w(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new w(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new w(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?H(this.nanoseconds,e.nanoseconds):H(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var V=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ie(0,0))}static max(){return new t(new Ie(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var bd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&x(),r===void 0?r=e.length-n:r>e.length-n&&x(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ne=class t extends bd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new w(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},$V=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Re=class t extends bd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return $V.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new w(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new w(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new w(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new w(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var b=class t{constructor(e){this.path=e}static fromPath(e){return new t(ne.fromString(e))}static fromName(e){return new t(ne.fromString(e).popFirst(5))}static empty(){return new t(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ne(e.slice()))}};var Go=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function ry(t){return t.fields.find(e=>e.kind===2)}function pi(t){return t.fields.filter(e=>e.kind!==2)}Go.UNKNOWN_ID=-1;var $o=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var ou=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,jt.min())}};function Ab(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=V.fromTimestamp(r===1e9?new Ie(n+1,0):new Ie(n,r));return new jt(i,b.empty(),e)}function Sb(t){return new jt(t.readTime,t.key,-1)}var jt=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(V.min(),b.empty(),-1)}static max(){return new t(V.max(),b.empty(),-1)}};function Kv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=b.comparator(t.documentKey,e.documentKey),n!==0?n:H(t.largestBatchId,e.largestBatchId))}var Mb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ad=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Or(t){return y(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==Mb)throw t;E("LocalStore","Unexpectedly lost primary lease")})}var p=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&x(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let c=u;n(e[c]).next(l=>{s[c]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var Sd=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Le,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new wi(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Qv(r.target.error);this.V.reject(new wi(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new wi(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(E("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new oy(n)}},qn=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(ys())===12.2&&Pe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return E("SimpleDb","Removing database:",e),gi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Vu())return!1;if(t.C())return!0;let e=ys(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return y(this,null,function*(){return this.db||(E("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new wi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new w(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new w(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new wi(e,s))},i.onupgradeneeded=o=>{E("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{E("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return y(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=Sd.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),p.reject(c))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,c=u.name!=="FirebaseError"&&s<3;if(E("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}},iy=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return gi(this.k.delete())}},wi=class extends w{constructor(e,n){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function kr(t){return t.name==="IndexedDbTransactionError"}var oy=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(E("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(E("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),gi(r)}add(e){return E("SimpleDb","ADD",this.store.name,e,e),gi(this.store.add(e))}get(e){return gi(this.store.get(e)).next(n=>(n===void 0&&(n=null),E("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return E("SimpleDb","DELETE",this.store.name,e),gi(this.store.delete(e))}count(){return E("SimpleDb","COUNT",this.store.name),gi(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new p((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.G(o,(a,u)=>{s.push(u)}).next(()=>s)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new p((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){E("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new p((r,i)=>{n.onerror=o=>{let s=Qv(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new p((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new iy(a),c=n(a.primaryKey,a.value,u);if(c instanceof p){let l=c.catch(d=>(u.done(),p.reject(d)));r.push(l)}u.isDone?i():u.$===null?a.continue():a.continue(u.$)}}).next(()=>p.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function gi(t){return new p((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=Qv(r.target.error);n(i)}})}var bT=!1;function Qv(t){let e=qn.S(ys());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new w("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bT||(bT=!0,setTimeout(()=>{throw r},0)),r}}return t}var sy=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){E("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>y(this,null,function*(){this.task=null;try{E("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){kr(n)?E("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Or(n)}yield this.ee(6e4)}))}},ay=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return y(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,o=!0;return p.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return E("IndexBackfiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(E("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=Sb(o);Kv(s,r)>0&&(r=s)}),new jt(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var bt=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Su(t){return t==null}function su(t){return t===0&&1/t==-1/0}function xb(t){return typeof t=="number"&&Number.isInteger(t)&&!su(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function ht(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=AT(e)),e=zV(t.get(n),e);return AT(e)}function zV(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function AT(t){return t+""}function vn(t){let e=t.length;if(k(e>=2),e===2)return k(t.charAt(0)===""&&t.charAt(1)===""),ne.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&x(),t.charAt(s+1)){case"":let a=t.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:x()}o=s+2}return new ne(r)}var ST=["userId","batchId"];function vd(t,e){return[t,ht(e)]}function Pb(t,e,n){return[t,ht(e),n]}var qV={},HV=["prefixPath","collectionGroup","readTime","documentId"],GV=["prefixPath","collectionGroup","documentId"],WV=["collectionGroup","readTime","prefixPath","documentId"],KV=["canonicalId","targetId"],QV=["targetId","path"],YV=["path","targetId"],ZV=["collectionId","parent"],XV=["indexId","uid"],JV=["uid","sequenceNumber"],eL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tL=["indexId","uid","orderedDocumentKey"],nL=["userId","collectionPath","documentId"],rL=["userId","collectionPath","largestBatchId"],iL=["userId","collectionGroup","largestBatchId"],Rb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oL=[...Rb,"documentOverlays"],Nb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ob=Nb,sL=[...Ob,"indexConfiguration","indexState","indexEntries"];var au=class extends Ad{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function We(t,e){let n=S(t);return qn.M(n.ae,e)}function MT(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ri(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ye=class t{constructor(e,n){this.comparator=e,this.root=n||wn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bo(this.root,e,this.comparator,!0)}},Bo=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},wn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw x();let e=this.left.check();if(e!==this.right.check())throw x();return e+(this.isRed()?0:1)}};wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw x()}get value(){throw x()}get color(){throw x()}get left(){throw x()}get right(){throw x()}copy(e,n,r,i,o){return this}insert(e,n,r){return new wn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var de=class t{constructor(e){this.comparator=e,this.data=new ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Md(this.data.getIterator())}getIteratorFrom(e){return new Md(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Md=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ro(t){return t.hasNext()?t.getNext():void 0}var At=class t{constructor(e){this.fields=e,e.sort(Re.comparator)}static empty(){return new t([])}unionWith(e){let n=new de(Re.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ho(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var xd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Fb(){return typeof atob<"u"}var Ge=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xd("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return H(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ge.EMPTY_BYTE_STRING=new Ge("");var aL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tr(t){if(k(!!t),typeof t=="string"){let e=0,n=aL.exec(t);if(k(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function br(t){return typeof t=="string"?Ge.fromBase64String(t):Ge.fromUint8Array(t)}function wh(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Yv(t){let e=t.mapValue.fields.__previous_value__;return wh(e)?Yv(e):e}function uu(t){let e=Tr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ie(e.seconds,e.nanos)}var uy=class{constructor(e,n,r,i,o,s,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}},Ar=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ir={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_d={nullValue:"NULL_VALUE"};function Ei(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wh(t)?4:Vb(t)?9007199254740991:10:x()}function Dn(t,e){if(t===e)return!0;let n=Ei(t);if(n!==Ei(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return uu(t).isEqual(uu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Tr(i.timestampValue),a=Tr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return br(i.bytesValue).isEqual(br(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return be(i.geoPointValue.latitude)===be(o.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return be(i.integerValue)===be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=be(i.doubleValue),a=be(o.doubleValue);return s===a?su(s)===su(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Ho(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(MT(s)!==MT(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Dn(s[u],a[u])))return!1;return!0}(t,e);default:return x()}}function cu(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function Sr(t,e){if(t===e)return 0;let n=Ei(t),r=Ei(e);if(n!==r)return H(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return H(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=be(o.integerValue||o.doubleValue),u=be(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return xT(t.timestampValue,e.timestampValue);case 4:return xT(uu(t),uu(e));case 5:return H(t.stringValue,e.stringValue);case 6:return function(o,s){let a=br(o),u=br(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){let l=H(a[c],u[c]);if(l!==0)return l}return H(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=H(be(o.latitude),be(s.latitude));return a!==0?a:H(be(o.longitude),be(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],u=s.values||[];for(let c=0;c<a.length&&c<u.length;++c){let l=Sr(a[c],u[c]);if(l)return l}return H(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Ir.mapValue&&s===Ir.mapValue)return 0;if(o===Ir.mapValue)return 1;if(s===Ir.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),c=s.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){let h=H(u[d],l[d]);if(h!==0)return h;let f=Sr(a[u[d]],c[l[d]]);if(f!==0)return f}return H(u.length,l.length)}(t.mapValue,e.mapValue);default:throw x()}}function xT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return H(t,e);let n=Tr(t),r=Tr(e),i=H(n.seconds,r.seconds);return i!==0?i:H(n.nanos,r.nanos)}function Wo(t){return cy(t)}function cy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Tr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return br(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return b.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=cy(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${cy(n.fields[s])}`;return i+"}"}(t.mapValue):x()}function Ii(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ly(t){return!!t&&"integerValue"in t}function lu(t){return!!t&&"arrayValue"in t}function PT(t){return!!t&&"nullValue"in t}function RT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wd(t){return!!t&&"mapValue"in t}function eu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ri(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=eu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Vb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function uL(t){return"nullValue"in t?_d:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ii(Ar.empty(),b.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:x()}function cL(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ii(Ar.empty(),b.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ir:x()}function NT(t,e){let n=Sr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function OT(t,e){let n=Sr(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var ot=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(n)}setAll(e){let n=Re.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=eu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());wd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];wd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ri(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(eu(this.value))}};function Lb(t){let e=[];return Ri(t.fields,(n,r)=>{let i=new Re([n]);if(wd(r)){let o=Lb(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new At(e)}var je=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,V.min(),V.min(),V.min(),ot.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,V.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,V.min(),V.min(),ot.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,V.min(),V.min(),ot.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(V.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=V.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Cn=class{constructor(e,n){this.position=e,this.inclusive=n}};function kT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=b.comparator(b.fromName(s.referenceValue),n.key):r=Sr(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function FT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}var Di=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function lL(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Pd=class{},X=class t extends Pd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fy(e,n,r):n==="array-contains"?new my(e,r):n==="in"?new Rd(e,r):n==="not-in"?new yy(e,r):n==="array-contains-any"?new vy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new py(e,r):new gy(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Sr(n,this.value)):n!==null&&Ei(this.value)===Ei(n)&&this.matchesComparison(Sr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return x()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ce=class t extends Pd{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return Ko(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Ko(t){return t.op==="and"}function dy(t){return t.op==="or"}function Zv(t){return jb(t)&&Ko(t)}function jb(t){for(let e of t.filters)if(e instanceof ce)return!1;return!0}function hy(t){if(t instanceof X)return t.field.canonicalString()+t.op.toString()+Wo(t.value);if(Zv(t))return t.filters.map(e=>hy(e)).join(",");{let e=t.filters.map(n=>hy(n)).join(",");return`${t.op}(${e})`}}function Ub(t,e){return t instanceof X?function(r,i){return i instanceof X&&r.op===i.op&&r.field.isEqual(i.field)&&Dn(r.value,i.value)}(t,e):t instanceof ce?function(r,i){return i instanceof ce&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Ub(s,i.filters[a]),!0):!1}(t,e):void x()}function Bb(t,e){let n=t.filters.concat(e);return ce.create(n,t.op)}function $b(t){return t instanceof X?function(n){return`${n.field.canonicalString()} ${n.op} ${Wo(n.value)}`}(t):t instanceof ce?function(n){return n.op.toString()+" {"+n.getFilters().map($b).join(" ,")+"}"}(t):"Filter"}var fy=class extends X{constructor(e,n,r){super(e,n,r),this.key=b.fromName(r.referenceValue)}matches(e){let n=b.comparator(e.key,this.key);return this.matchesComparison(n)}},py=class extends X{constructor(e,n){super(e,"in",n),this.keys=zb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},gy=class extends X{constructor(e,n){super(e,"not-in",n),this.keys=zb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function zb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>b.fromName(r.referenceValue))}var my=class extends X{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return lu(n)&&cu(n.arrayValue,this.value)}},Rd=class extends X{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&cu(this.value.arrayValue,n)}},yy=class extends X{constructor(e,n){super(e,"not-in",n)}matches(e){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!cu(this.value.arrayValue,n)}},vy=class extends X{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!lu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cu(this.value.arrayValue,r))}};var _y=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function wy(t,e=null,n=[],r=[],i=null,o=null,s=null){return new _y(t,e,n,r,i,o,s)}function Ci(t){let e=S(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Su(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wo(r)).join(",")),e.ce=n}return e.ce}function Mu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lL(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ub(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!FT(t.startAt,e.startAt)&&FT(t.endAt,e.endAt)}function Nd(t){return b.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Od(t,e){return t.filters.filter(n=>n instanceof X&&n.field.isEqual(e))}function VT(t,e,n){let r=_d,i=!0;for(let o of Od(t,e)){let s=_d,a=!0;switch(o.op){case"<":case"<=":s=uL(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=_d}NT({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];NT({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function LT(t,e,n){let r=Ir,i=!0;for(let o of Od(t,e)){let s=Ir,a=!0;switch(o.op){case">=":case">":s=cL(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Ir}OT({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];OT({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var Zt=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function qb(t,e,n,r,i,o,s,a){return new Zt(t,e,n,r,i,o,s,a)}function us(t){return new Zt(t)}function jT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Xv(t){return t.collectionGroup!==null}function zo(t){let e=S(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new de(Re.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new Di(o,r))}),n.has(Re.keyField().canonicalString())||e.le.push(new Di(Re.keyField(),r))}return e.le}function ft(t){let e=S(t);return e.he||(e.he=dL(e,zo(t))),e.he}function dL(t,e){if(t.limitType==="F")return wy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Di(i.field,o)});let n=t.endAt?new Cn(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Cn(t.startAt.position,t.startAt.inclusive):null;return wy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ey(t,e){let n=t.filters.concat([e]);return new Zt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function kd(t,e,n){return new Zt(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xu(t,e){return Mu(ft(t),ft(e))&&t.limitType===e.limitType}function Hb(t){return`${Ci(ft(t))}|lt:${t.limitType}`}function Vo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$b(i)).join(", ")}]`),Su(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Wo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Wo(i)).join(",")),`Target(${r})`}(ft(t))}; limitType=${t.limitType})`}function Pu(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):b.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of zo(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let c=kT(s,a,u);return s.inclusive?c<=0:c<0}(r.startAt,zo(r),i)||r.endAt&&!function(s,a,u){let c=kT(s,a,u);return s.inclusive?c>=0:c>0}(r.endAt,zo(r),i))}(t,e)}function Gb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Wb(t){return(e,n)=>{let r=!1;for(let i of zo(t)){let o=hL(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function hL(t,e,n){let r=t.field.isKeyField()?b.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),c=a.data.field(o);return u!==null&&c!==null?Sr(u,c):x()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return x()}}var Tn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ri(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return kb(this.inner)}size(){return this.innerSize}};var fL=new ye(b.comparator);function wt(){return fL}var Kb=new ye(b.comparator);function Xa(...t){let e=Kb;for(let n of t)e=e.insert(n.key,n);return e}function Qb(t){let e=Kb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _n(){return tu()}function Yb(){return tu()}function tu(){return new Tn(t=>t.toString(),(t,e)=>t.isEqual(e))}var pL=new ye(b.comparator),gL=new de(b.comparator);function G(...t){let e=gL;for(let n of t)e=e.add(n);return e}var mL=new de(H);function Jv(){return mL}function Zb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:su(e)?"-0":e}}function Xb(t){return{integerValue:""+t}}function Jb(t,e){return xb(e)?Xb(e):Zb(t,e)}var Qo=class{constructor(){this._=void 0}};function yL(t,e,n){return t instanceof Mr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&wh(o)&&(o=Yv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Hn?tA(t,e):t instanceof Gn?nA(t,e):function(i,o){let s=eA(i,o),a=UT(s)+UT(i.Ie);return ly(s)&&ly(i.Ie)?Xb(a):Zb(i.serializer,a)}(t,e)}function vL(t,e,n){return t instanceof Hn?tA(t,e):t instanceof Gn?nA(t,e):n}function eA(t,e){return t instanceof xr?function(r){return ly(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Mr=class extends Qo{},Hn=class extends Qo{constructor(e){super(),this.elements=e}};function tA(t,e){let n=rA(e);for(let r of t.elements)n.some(i=>Dn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Gn=class extends Qo{constructor(e){super(),this.elements=e}};function nA(t,e){let n=rA(e);for(let r of t.elements)n=n.filter(i=>!Dn(i,r));return{arrayValue:{values:n}}}var xr=class extends Qo{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function UT(t){return be(t.integerValue||t.doubleValue)}function rA(t){return lu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ti=class{constructor(e,n){this.field=e,this.transform=n}};function _L(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Hn&&i instanceof Hn||r instanceof Gn&&i instanceof Gn?Ho(r.elements,i.elements,Dn):r instanceof xr&&i instanceof xr?Dn(r.Ie,i.Ie):r instanceof Mr&&i instanceof Mr}(t.transform,e.transform)}var Iy=class{constructor(e,n){this.version=e,this.transformResults=n}},Ae=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ed(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Yo=class{};function iA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rr(t.key,Ae.none()):new Pr(t.key,t.data,Ae.none());{let n=t.data,r=ot.empty(),i=new de(Re.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Xt(t.key,r,new At(i.toArray()),Ae.none())}}function wL(t,e,n){t instanceof Pr?function(i,o,s){let a=i.value.clone(),u=$T(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Xt?function(i,o,s){if(!Ed(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=$T(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(oA(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function nu(t,e,n,r){return t instanceof Pr?function(o,s,a,u){if(!Ed(o.precondition,s))return a;let c=o.value.clone(),l=zT(o.fieldTransforms,u,s);return c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xt?function(o,s,a,u){if(!Ed(o.precondition,s))return a;let c=zT(o.fieldTransforms,u,s),l=s.data;return l.setAll(oA(o)),l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return Ed(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function EL(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=eA(r.transform,i||null);o!=null&&(n===null&&(n=ot.empty()),n.set(r.field,o))}return n||null}function BT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ho(r,i,(o,s)=>_L(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Pr=class extends Yo{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Xt=class extends Yo{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function oA(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function $T(t,e,n){let r=new Map;k(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,vL(s,a,n[i]))}return r}function zT(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,yL(o,s,e))}return r}var Rr=class extends Yo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},du=class extends Yo{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var hu=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&wL(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=nu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=nu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=Yb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=iA(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(V.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),G())}isEqual(e){return this.batchId===e.batchId&&Ho(this.mutations,e.mutations,(n,r)=>BT(n,r))&&Ho(this.baseMutations,e.baseMutations,(n,r)=>BT(n,r))}},Dy=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){k(e.mutations.length===r.length);let i=function(){return pL}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var fu=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Cy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ke,te;function sA(t){switch(t){default:return x();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function aA(t){if(t===void 0)return Pe("GRPC error has no .code"),g.UNKNOWN;switch(t){case ke.OK:return g.OK;case ke.CANCELLED:return g.CANCELLED;case ke.UNKNOWN:return g.UNKNOWN;case ke.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case ke.INTERNAL:return g.INTERNAL;case ke.UNAVAILABLE:return g.UNAVAILABLE;case ke.UNAUTHENTICATED:return g.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case ke.NOT_FOUND:return g.NOT_FOUND;case ke.ALREADY_EXISTS:return g.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return g.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case ke.ABORTED:return g.ABORTED;case ke.OUT_OF_RANGE:return g.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return g.UNIMPLEMENTED;case ke.DATA_LOSS:return g.DATA_LOSS;default:return x()}}(te=ke||(ke={}))[te.OK=0]="OK",te[te.CANCELLED=1]="CANCELLED",te[te.UNKNOWN=2]="UNKNOWN",te[te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",te[te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",te[te.NOT_FOUND=5]="NOT_FOUND",te[te.ALREADY_EXISTS=6]="ALREADY_EXISTS",te[te.PERMISSION_DENIED=7]="PERMISSION_DENIED",te[te.UNAUTHENTICATED=16]="UNAUTHENTICATED",te[te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",te[te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",te[te.ABORTED=10]="ABORTED",te[te.OUT_OF_RANGE=11]="OUT_OF_RANGE",te[te.UNIMPLEMENTED=12]="UNIMPLEMENTED",te[te.INTERNAL=13]="INTERNAL",te[te.UNAVAILABLE=14]="UNAVAILABLE",te[te.DATA_LOSS=15]="DATA_LOSS";var qT=null;function uA(){return new TextEncoder}var IL=new hi([4294967295,4294967295],0);function HT(t){let e=uA().encode(t),n=new CT;return n.update(e),new Uint8Array(n.digest())}function GT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hi([n,r],0),new hi([i,o],0)]}var Ty=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _i(`Invalid padding: ${n}`);if(r<0)throw new _i(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _i(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _i(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=hi.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(hi.fromNumber(r)));return i.compare(IL)===1&&(i=new hi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=HT(e),[r,i]=GT(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=HT(e),[r,i]=GT(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},_i=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var pu=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,gu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(V.min(),i,new ye(H),wt(),G())}},gu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,G(),G(),G())}};var qo=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Fd=class{constructor(e,n){this.targetId=e,this.fe=n}},Vd=class{constructor(e,n,r=Ge.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Ld=class{constructor(){this.ge=0,this.pe=KT(),this.ye=Ge.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=G(),n=G(),r=G();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:x()}}),new gu(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=KT()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,k(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},by=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=wt(),this.Qe=WT(),this.Ke=new ye(H)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:x()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(Nd(o))if(r===0){let s=new b(o.path);this.We(n,s,je.newNoDocument(s,V.min()))}else k(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),u=a?this.et(a,e,s):1;if(u!==0){this.He(n);let c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}qT?.tt(function(l,d,h,f,_){var v,m,I,P,T,R;let j={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},q=d.unchangedNames;return q&&(j.bloomFilter={applied:_===0,hashCount:(v=q?.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(P=(I=(m=q?.bits)===null||m===void 0?void 0:m.bitmap)===null||I===void 0?void 0:I.length)!==null&&P!==void 0?P:0,padding:(R=(T=q?.bits)===null||T===void 0?void 0:T.padding)!==null&&R!==void 0?R:0,mightContain:he=>{var St;return(St=f?.mightContain(he))!==null&&St!==void 0&&St}}),j}(s,e.fe,this.Le.nt(),a,u))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=br(r).toUint8Array()}catch(u){if(u instanceof xd)return Lt("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Ty(s,i,o)}catch(u){return Lt(u instanceof _i?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&Nd(a.target)){let u=new b(a.target.path);this.qe.get(u)!==null||this.st(s,u)||this.We(s,u,je.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=G();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let c=this.Ye(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new pu(e,n,this.Ke,this.qe,r);return this.qe=wt(),this.Qe=WT(),this.Ke=new ye(H),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Ld,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new de(H),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||E("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Ld),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function WT(){return new ye(b.comparator)}function KT(){return new ye(b.comparator)}var DL={asc:"ASCENDING",desc:"DESCENDING"},CL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TL={and:"AND",or:"OR"},Ay=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Sy(t,e){return t.useProto3Json||Su(e)?e:{value:e}}function Zo(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function bL(t,e){return Zo(t,e.toTimestamp())}function Ne(t){return k(!!t),V.fromTimestamp(function(n){let r=Tr(n);return new Ie(r.seconds,r.nanos)}(t))}function e_(t,e){return My(t,e).canonicalString()}function My(t,e){let n=function(i){return new ne(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function lA(t){let e=ne.fromString(t);return k(wA(e)),e}function mu(t,e){return e_(t.databaseId,e.path)}function En(t,e){let n=lA(e);if(n.get(1)!==t.databaseId.projectId)throw new w(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new w(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new b(fA(n))}function dA(t,e){return e_(t.databaseId,e)}function hA(t){let e=lA(t);return e.length===4?ne.emptyPath():fA(e)}function xy(t){return new ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fA(t){return k(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function QT(t,e,n){return{name:mu(t,e),fields:n.value.mapValue.fields}}function pA(t,e,n){let r=En(t,e.name),i=Ne(e.updateTime),o=e.createTime?Ne(e.createTime):V.min(),s=new ot({mapValue:{fields:e.fields}}),a=je.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function AL(t,e){return"found"in e?function(r,i){k(!!i.found),i.found.name,i.found.updateTime;let o=En(r,i.found.name),s=Ne(i.found.updateTime),a=i.found.createTime?Ne(i.found.createTime):V.min(),u=new ot({mapValue:{fields:i.found.fields}});return je.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){k(!!i.missing),k(!!i.readTime);let o=En(r,i.missing),s=Ne(i.readTime);return je.newNoDocument(o,s)}(t,e):x()}function SL(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:x()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,l){return c.useProto3Json?(k(l===void 0||typeof l=="string"),Ge.fromBase64String(l||"")):(k(l===void 0||l instanceof Uint8Array),Ge.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){let l=c.code===void 0?g.UNKNOWN:aA(c.code);return new w(l,c.message||"")}(s);n=new Vd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=En(t,r.document.name),o=Ne(r.document.updateTime),s=r.document.createTime?Ne(r.document.createTime):V.min(),a=new ot({mapValue:{fields:r.document.fields}}),u=je.newFoundDocument(i,o,s,a),c=r.targetIds||[],l=r.removedTargetIds||[];n=new qo(c,l,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=En(t,r.document),o=r.readTime?Ne(r.readTime):V.min(),s=je.newNoDocument(i,o),a=r.removedTargetIds||[];n=new qo([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=En(t,r.document),o=r.removedTargetIds||[];n=new qo([],o,i,null)}else{if(!("filter"in e))return x();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Cy(i,o),a=r.targetId;n=new Fd(a,s)}}return n}function yu(t,e){let n;if(e instanceof Pr)n={update:QT(t,e.key,e.value)};else if(e instanceof Rr)n={delete:mu(t,e.key)};else if(e instanceof Xt)n={update:QT(t,e.key,e.data),updateMask:OL(e.fieldMask)};else{if(!(e instanceof du))return x();n={verify:mu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Mr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Hn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof xr)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw x()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:bL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:x()}(t,e.precondition)),n}function Py(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Ae.updateTime(Ne(o.updateTime)):o.exists!==void 0?Ae.exists(o.exists):Ae.none()}(e.currentDocument):Ae.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)k(a.setToServerValue==="REQUEST_TIME"),u=new Mr;else if("appendMissingElements"in a){let l=a.appendMissingElements.values||[];u=new Hn(l)}else if("removeAllFromArray"in a){let l=a.removeAllFromArray.values||[];u=new Gn(l)}else"increment"in a?u=new xr(s,a.increment):x();let c=Re.fromServerFormat(a.fieldPath);return new Ti(c,u)}(t,i)):[];if(e.update){e.update.name;let i=En(t,e.update.name),o=new ot({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let c=u.fieldPaths||[];return new At(c.map(l=>Re.fromServerFormat(l)))}(e.updateMask);return new Xt(i,o,s,n,r)}return new Pr(i,o,n,r)}if(e.delete){let i=En(t,e.delete);return new Rr(i,n)}if(e.verify){let i=En(t,e.verify);return new du(i,n)}return x()}function ML(t,e){return t&&t.length>0?(k(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Ne(i.updateTime):Ne(o);return s.isEqual(V.min())&&(s=Ne(o)),new Iy(s,i.transformResults||[])}(n,e))):[]}function gA(t,e){return{documents:[dA(t,e.path)]}}function mA(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dA(t,i);let o=function(c){if(c.length!==0)return _A(ce.create(c,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(c){if(c.length!==0)return c.map(l=>function(h){return{field:Lo(h.field),direction:PL(h.dir)}}(l))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=Sy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:i}}function yA(t){let e=hA(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){k(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];n.where&&(o=function(d){let h=vA(d);return h instanceof ce&&Zv(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(_){return new Di(jo(_.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Su(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(d){let h=!!d.before,f=d.values||[];return new Cn(f,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){let h=!d.before,f=d.values||[];return new Cn(f,h)}(n.endAt)),qb(e,i,s,o,a,"F",u,c)}function xL(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return x()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=jo(n.unaryFilter.field);return X.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=jo(n.unaryFilter.field);return X.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=jo(n.unaryFilter.field);return X.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=jo(n.unaryFilter.field);return X.create(s,"!=",{nullValue:"NULL_VALUE"});default:return x()}}(t):t.fieldFilter!==void 0?function(n){return X.create(jo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return x()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ce.create(n.compositeFilter.filters.map(r=>vA(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return x()}}(n.compositeFilter.op))}(t):x()}function PL(t){return DL[t]}function RL(t){return CL[t]}function NL(t){return TL[t]}function Lo(t){return{fieldPath:t.canonicalString()}}function jo(t){return Re.fromServerFormat(t.fieldPath)}function _A(t){return t instanceof X?function(n){if(n.op==="=="){if(RT(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NAN"}};if(PT(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(RT(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NAN"}};if(PT(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(n.field),op:RL(n.op),value:n.value}}}(t):t instanceof ce?function(n){let r=n.getFilters().map(i=>_A(i));return r.length===1?r[0]:{compositeFilter:{op:NL(n.op),filters:r}}}(t):x()}function OL(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Xo=class t{constructor(e,n,r,i,o=V.min(),s=V.min(),a=Ge.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var jd=class{constructor(e){this.ct=e}};function kL(t,e){let n;if(e.document)n=pA(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=b.fromSegments(e.noDocument.path),i=Ai(e.noDocument.readTime);n=je.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return x();{let r=b.fromSegments(e.unknownDocument.path),i=Ai(e.unknownDocument.version);n=je.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new Ie(i[0],i[1]);return V.fromTimestamp(o)}(e.readTime)),n}function YT(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Ud(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:mu(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Zo(o,s.version.toTimestamp()),createTime:Zo(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:bi(e.version)};else{if(!e.isUnknownDocument())return x();r.unknownDocument={path:n.path.toArray(),version:bi(e.version)}}return r}function Ud(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function bi(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ai(t){let e=new Ie(t.seconds,t.nanoseconds);return V.fromTimestamp(e)}function mi(t,e){let n=(e.baseMutations||[]).map(o=>Py(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>Py(t.ct,o)),i=Ie.fromMillis(e.localWriteTimeMs);return new hu(e.batchId,i,n,r)}function Ja(t){let e=Ai(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ai(t.lastLimboFreeSnapshotVersion):V.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return k(o.documents.length===1),ft(us(hA(o.documents[0])))}(t.query):function(o){return ft(yA(o))}(t.query),new Xo(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ge.fromBase64String(t.resumeToken))}function EA(t,e){let n=bi(e.snapshotVersion),r=bi(e.lastLimboFreeSnapshotVersion),i;i=Nd(e.target)?gA(t.ct,e.target):mA(t.ct,e.target).ut;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ci(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function t_(t){let e=yA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kd(e,e.limit,"L"):e}function Gm(t,e){return new fu(e.largestBatchId,Py(t.ct,e.overlayMutation))}function ZT(t,e){let n=e.path.lastSegment();return[t,ht(e.path.popLast()),n]}function XT(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:bi(r.readTime),documentKey:ht(r.documentKey.path),largestBatchId:r.largestBatchId}}var Ry=class{getBundleMetadata(e,n){return JT(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Ai(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return JT(e).put(function(i){return{bundleId:i.id,createTime:bi(Ne(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return eb(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:t_(o.bundledQuery),readTime:Ai(o.readTime)}}(r)})}saveNamedQuery(e,n){return eb(e).put(function(i){return{name:i.name,readTime:bi(Ne(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function JT(t){return We(t,"bundles")}function eb(t){return We(t,"namedQueries")}var Bd=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return Ka(e).get(ZT(this.userId,n)).next(r=>r?Gm(this.serializer,r):null)}getOverlays(e,n){let r=_n();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new fu(n,s);i.push(this.ht(e,a))}),p.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(ht(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(Ka(e).H("collectionPathOverlayIndex",a))}),p.waitFor(o)}getOverlaysForCollection(e,n,r){let i=_n(),o=ht(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Ka(e).W("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let c=Gm(this.serializer,u);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=_n(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Ka(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,c,l)=>{let d=Gm(this.serializer,c);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):l.done()}).next(()=>o)}ht(e,n){return Ka(e).put(function(i,o,s){let[a,u,c]=ZT(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:yu(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Ka(t){return We(t,"documentOverlays")}var $n=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),su(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(br(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?Vb(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):x()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),b.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};$n.bt=new $n;function FL(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function tb(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=FL(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var Ny=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){let n=this.Lt(e),r=tb(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Lt(e),r=tb(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Oy=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}},ky=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},yi=class{constructor(){this.Gt=new Ny,this.zt=new Oy(this.Gt),this.jt=new ky(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var vi=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function vr(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=nb(t.arrayValue,e.arrayValue),n!==0?n:(n=nb(t.directionalValue,e.directionalValue),n!==0?n:b.comparator(t.documentKey,e.documentKey)))}function nb(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var $d=class{constructor(e){this.Yt=new de((n,r)=>Re.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(k(e.collectionGroup===this.collectionId),this.en)return!1;let n=ry(e);if(n!==void 0&&!this.nn(n))return!1;let r=pi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.rn(a,u)||!this.sn(this.Zt[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new de(Re.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new $o(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new $o(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new $o(r.field,r.dir==="asc"?0:1)));return new Go(Go.UNKNOWN_ID,this.collectionId,n,ou.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function IA(t){var e,n;if(k(t instanceof X||t instanceof ce),t instanceof X){if(t instanceof Rd){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>X.create(t.field,"==",o)))||[];return ce.create(i,"or")}return t}let r=t.filters.map(i=>IA(i));return ce.create(r,t.op)}function VL(t){if(t.getFilters().length===0)return[];let e=Ly(IA(t));return k(DA(e)),Fy(e)||Vy(e)?[e]:e.getFilters()}function Fy(t){return t instanceof X}function Vy(t){return t instanceof ce&&Zv(t)}function DA(t){return Fy(t)||Vy(t)||function(n){if(n instanceof ce&&dy(n)){for(let r of n.getFilters())if(!Fy(r)&&!Vy(r))return!1;return!0}return!1}(t)}function Ly(t){if(k(t instanceof X||t instanceof ce),t instanceof X)return t;if(t.filters.length===1)return Ly(t.filters[0]);let e=t.filters.map(r=>Ly(r)),n=ce.create(e,t.op);return n=zd(n),DA(n)?n:(k(n instanceof ce),k(Ko(n)),k(n.filters.length>1),n.filters.reduce((r,i)=>n_(r,i)))}function n_(t,e){let n;return k(t instanceof X||t instanceof ce),k(e instanceof X||e instanceof ce),n=t instanceof X?e instanceof X?function(i,o){return ce.create([i,o],"and")}(t,e):rb(t,e):e instanceof X?rb(e,t):function(i,o){if(k(i.filters.length>0&&o.filters.length>0),Ko(i)&&Ko(o))return Bb(i,o.getFilters());let s=dy(i)?i:o,a=dy(i)?o:i,u=s.filters.map(c=>n_(c,a));return ce.create(u,"or")}(t,e),zd(n)}function rb(t,e){if(Ko(e))return Bb(e,t.getFilters());{let n=e.filters.map(r=>n_(t,r));return ce.create(n,"or")}}function zd(t){if(k(t instanceof X||t instanceof ce),t instanceof X)return t;let e=t.getFilters();if(e.length===1)return zd(e[0]);if(jb(t))return t;let n=e.map(i=>zd(i)),r=[];return n.forEach(i=>{i instanceof X?r.push(i):i instanceof ce&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:ce.create(r,t.op)}var jy=class{constructor(){this._n=new vu}addToCollectionParentIndex(e,n){return this._n.add(n),p.resolve()}getCollectionParents(e,n){return p.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return p.resolve()}deleteFieldIndex(e,n){return p.resolve()}deleteAllFieldIndexes(e){return p.resolve()}createTargetIndexes(e,n){return p.resolve()}getDocumentsMatchingTarget(e,n){return p.resolve(null)}getIndexType(e,n){return p.resolve(0)}getFieldIndexes(e,n){return p.resolve([])}getNextCollectionGroupToUpdate(e){return p.resolve(null)}getMinOffset(e,n){return p.resolve(jt.min())}getMinOffsetFromCollectionGroup(e,n){return p.resolve(jt.min())}updateCollectionGroup(e,n,r){return p.resolve()}updateIndexEntries(e,n){return p.resolve()}},vu=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new de(ne.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new de(ne.comparator)).toArray()}};var pd=new Uint8Array(0),Uy=class{constructor(e,n){this.databaseId=n,this.an=new vu,this.un=new Tn(r=>Ci(r),(r,i)=>Mu(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:ht(i)};return ib(e).put(o)}return p.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[bb(n),""],!1,!0);return ib(e).W(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(vn(s.parent))}return r})}addFieldIndex(e,n){let r=Qa(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=Oo(e);return o.next(a=>{s.put(XT(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=Qa(e),i=Oo(e),o=No(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Qa(e),r=No(e),i=Oo(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return p.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new $d(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=No(e),i=!0,o=new Map;return p.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=G(),a=[];return p.forEach(o,(u,c)=>{E("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(u)} to execute ${Ci(n)}`);let l=function(T,R){let j=ry(R);if(j===void 0)return null;for(let q of Od(T,j.fieldPath))switch(q.op){case"array-contains-any":return q.value.arrayValue.values||[];case"array-contains":return[q.value]}return null}(c,u),d=function(T,R){let j=new Map;for(let q of pi(R))for(let he of Od(T,q.fieldPath))switch(he.op){case"==":case"in":j.set(q.fieldPath.canonicalString(),he.value);break;case"not-in":case"!=":return j.set(q.fieldPath.canonicalString(),he.value),Array.from(j.values())}return null}(c,u),h=function(T,R){let j=[],q=!0;for(let he of pi(R)){let St=he.kind===0?VT(T,he.fieldPath,T.startAt):LT(T,he.fieldPath,T.startAt);j.push(St.value),q&&(q=St.inclusive)}return new Cn(j,q)}(c,u),f=function(T,R){let j=[],q=!0;for(let he of pi(R)){let St=he.kind===0?LT(T,he.fieldPath,T.endAt):VT(T,he.fieldPath,T.endAt);j.push(St.value),q&&(q=St.inclusive)}return new Cn(j,q)}(c,u),_=this.hn(u,c,h),v=this.hn(u,c,f),m=this.Pn(u,c,d),I=this.In(u.indexId,l,_,h.inclusive,v,f.inclusive,m);return p.forEach(I,P=>r.j(P,n.limit).next(T=>{T.forEach(R=>{let j=b.fromSegments(R.documentKey);s.has(j)||(s=s.add(j),a.push(j))})}))}).next(()=>a)}return p.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=VL(ce.create(e.filters,"and")).map(r=>wy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let u=(n!=null?n.length:1)*Math.max(r.length,o.length),c=u/(n!=null?n.length:1),l=[];for(let d=0;d<u;++d){let h=n?this.Tn(n[d/c]):pd,f=this.En(e,h,r[d%c],i),_=this.dn(e,h,o[d%c],s),v=a.map(m=>this.En(e,h,m,!0));l.push(...this.createRange(f,_,v))}return l}En(e,n,r,i){let o=new vi(e,b.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new vi(e,b.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new $d(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return p.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let c=new de(Re.comparator),l=!1;for(let d of u.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?l=!0:c=c.add(h.field));for(let d of u.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(l?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new yi;for(let i of pi(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);$n.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new yi;return $n.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new yi;return $n.bt.Pt(Ii(this.databaseId,n),r.Ht(function(o){let s=pi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new yi);let o=0;for(let s of pi(e)){let a=r[o++];for(let u of i)if(this.Vn(n,s.fieldPath)&&lu(a))i=this.mn(i,s,a);else{let c=u.Ht(s.kind);$n.bt.Pt(a,c)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new yi;u.seed(a.Wt()),$n.bt.Pt(s,u.Ht(n.kind)),o.push(u)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof X&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=Qa(e),i=Oo(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{let s=[];return p.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(l,d){let h=d?new ou(d.sequenceNumber,new jt(Ai(d.readTime),new b(vn(d.documentKey)),d.largestBatchId)):ou.empty(),f=l.fields.map(([_,v])=>new $o(Re.fromServerFormat(_),v));return new Go(l.indexId,l.collectionGroup,f,h)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:H(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=Qa(e),o=Oo(e);return this.gn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>p.forEach(a,u=>o.put(XT(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return p.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?p.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),p.forEach(a,u=>this.pn(e,i,u).next(c=>{let l=this.yn(o,u);return c.isEqual(l)?p.resolve():this.wn(e,o,u,c,l)}))))})}Sn(e,n,r,i){return No(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return No(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=No(e),o=new de(vr);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new vi(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new de(vr),i=this.An(n,e);if(i==null)return r;let o=ry(n);if(o!=null){let s=e.data.field(o.fieldPath);if(lu(s))for(let a of s.arrayValue.values||[])r=r.add(new vi(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new vi(n.indexId,e.key,pd,i));return r}wn(e,n,r,i,o){E("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(u,c,l,d,h){let f=u.getIterator(),_=c.getIterator(),v=Ro(f),m=Ro(_);for(;v||m;){let I=!1,P=!1;if(v&&m){let T=l(v,m);T<0?P=!0:T>0&&(I=!0)}else v!=null?P=!0:I=!0;I?(d(m),m=Ro(_)):P?(h(v),v=Ro(f)):(v=Ro(f),m=Ro(_))}}(i,o,vr,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),p.waitFor(s)}gn(e){let n=1;return Oo(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>vr(s,a)).filter((s,a,u)=>!a||vr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=vr(s,e),u=vr(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&u<0)i.push(s),i.push(s.Jt());else if(u>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,pd,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,pd,[]];o.push(IDBKeyRange.bound(a,u))}return o}Dn(e,n){return vr(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(ob)}getMinOffset(e,n){return p.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||x())).next(ob)}};function ib(t){return We(t,"collectionParents")}function No(t){return We(t,"indexEntries")}function Qa(t){return We(t,"indexConfiguration")}function Oo(t){return We(t,"indexState")}function ob(t){k(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;Kv(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new jt(e.readTime,e.documentKey,n)}var sb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vt=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function CA(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Y({range:s},(l,d,h)=>(a++,h.delete()));o.push(u.next(()=>{k(a===1)}));let c=[];for(let l of n.mutations){let d=Pb(e,l.key.path,n.batchId);o.push(i.delete(d)),c.push(l.key)}return p.waitFor(o).next(()=>c)}function qd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw x();e=t.noDocument}return JSON.stringify(e).length}Vt.DEFAULT_COLLECTION_PERCENTILE=10,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vt.DEFAULT=new Vt(41943040,Vt.DEFAULT_COLLECTION_PERCENTILE,Vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vt.DISABLED=new Vt(-1,0,0);var Hd=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){k(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _r(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=Uo(e),s=_r(e);return s.add({}).next(a=>{k(typeof a=="number");let u=new hu(a,n,r,i),c=function(f,_,v){let m=v.baseMutations.map(P=>yu(f.ct,P)),I=v.mutations.map(P=>yu(f.ct,P));return{userId:_,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:m,mutations:I}}(this.serializer,this.userId,u),l=[],d=new de((h,f)=>H(h.canonicalString(),f.canonicalString()));for(let h of i){let f=Pb(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),l.push(s.put(c)),l.push(o.put(f,qV))}return d.forEach(h=>{l.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),p.waitFor(l).next(()=>u)})}lookupMutationBatch(e,n){return _r(e).get(n).next(r=>r?(k(r.userId===this.userId),mi(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?p.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return _r(e).Y({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(k(a.batchId>=r),o=mi(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return _r(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _r(e).W("userMutationsIndex",n).next(r=>r.map(i=>mi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=vd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Uo(e).Y({range:i},(s,a,u)=>{let[c,l,d]=s,h=vn(l);if(c===this.userId&&n.path.isEqual(h))return _r(e).get(d).next(f=>{if(!f)throw x();k(f.userId===this.userId),o.push(mi(this.serializer,f))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new de(H),i=[];return n.forEach(o=>{let s=vd(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Uo(e).Y({range:a},(c,l,d)=>{let[h,f,_]=c,v=vn(f);h===this.userId&&o.path.isEqual(v)?r=r.add(_):d.done()});i.push(u)}),p.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=vd(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new de(H);return Uo(e).Y({range:s},(u,c,l)=>{let[d,h,f]=u,_=vn(h);d===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(f)):l.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(_r(e).get(o).next(s=>{if(s===null)throw x();k(s.userId===this.userId),r.push(mi(this.serializer,s))}))}),p.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return CA(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),p.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return p.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Uo(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=vn(o[1]);i.push(u)}else a.done()}).next(()=>{k(i.length===0)})})}containsKey(e,n){return TA(e,this.userId,n)}xn(e){return bA(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function TA(t,e,n){let r=vd(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Uo(t).Y({range:o,J:!0},(a,u,c)=>{let[l,d,h]=a;l===e&&d===i&&(s=!0),c.done()}).next(()=>s)}function _r(t){return We(t,"mutations")}function Uo(t){return We(t,"documentMutations")}function bA(t){return We(t,"mutationQueues")}var Jo=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var By=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let r=new Jo(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>V.fromTimestamp(new Ie(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ko(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(k(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return ko(e).Y((s,a)=>{let u=Ja(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>p.waitFor(o)).next(()=>i)}forEachTarget(e,n){return ko(e).Y((r,i)=>{let o=Ja(i);n(o)})}Ln(e){return ab(e).get("targetGlobalKey").next(n=>(k(n!==null),n))}kn(e,n){return ab(e).put("targetGlobalKey",n)}qn(e,n){return ko(e).put(EA(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Ci(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ko(e).Y({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let c=Ja(a);Mu(n,c.target)&&(o=c,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=wr(e);return n.forEach(s=>{let a=ht(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),p.waitFor(i)}removeMatchingKeys(e,n,r){let i=wr(e);return p.forEach(n,o=>{let s=ht(o.path);return p.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=wr(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=wr(e),o=G();return i.Y({range:r,J:!0},(s,a,u)=>{let c=vn(s[1]),l=new b(c);o=o.add(l)}).next(()=>o)}containsKey(e,n){let r=ht(n.path),i=IDBKeyRange.bound([r],[bb(r)],!1,!0),o=0;return wr(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],u,c)=>{s!==0&&(o++,c.done())}).next(()=>o>0)}_t(e,n){return ko(e).get(n).next(r=>r?Ja(r):null)}};function ko(t){return We(t,"targets")}function ab(t){return We(t,"targetGlobal")}function wr(t){return We(t,"targetDocuments")}function ub([t,e],[n,r]){let i=H(t,n);return i===0?H(e,r):i}var $y=class{constructor(e){this.Kn=e,this.buffer=new de(ub),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();ub(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},zy=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){E("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){kr(n)?E("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Or(n)}yield this.zn(3e5)}))}},qy=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return p.resolve(bt._e);let r=new $y(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(E("LruGarbageCollector","Garbage collection skipped; disabled"),p.resolve(sb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(E("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sb):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,u,c,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(E("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),Fo()<=tn.DEBUG&&E("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${d} documents in `+(c-u)+`ms
Total Duration: ${c-l}ms`),p.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}};function LL(t,e){return new qy(t,e)}var Hy=class{constructor(e,n){this.db=e,this.garbageCollector=LL(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return gd(e,r)}removeReference(e,n,r){return gd(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return gd(e,n)}er(e,n){return function(i,o){let s=!1;return bA(i).Z(a=>TA(i,a,o).next(u=>(u&&(s=!0),p.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let u=this.er(e,s).next(c=>{if(!c)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,V.min()),wr(e).delete(function(d){return[0,ht(d.path)]}(s))))});i.push(u)}}).next(()=>p.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return gd(e,n)}Xn(e,n){let r=wr(e),i,o=bt._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:c})=>{s===0?(o!==bt._e&&n(new b(vn(i)),o),o=c,i=u):o=bt._e}).next(()=>{o!==bt._e&&n(new b(vn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function gd(t,e){return wr(t).put(function(r,i){return{targetId:0,path:ht(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var Gd=class{constructor(){this.changes=new Tn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?p.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Gy=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return fi(e).put(r)}removeEntry(e,n,r){return fi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Ud(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=je.newInvalidDocument(n);return fi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ya(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:je.newInvalidDocument(n)};return fi(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ya(n))},(i,o)=>{r={document:this.nr(n,o),size:qd(o)}}).next(()=>r)}getEntries(e,n){let r=wt();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=wt(),i=new ye(b.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,qd(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return p.resolve();let i=new de(db);n.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(Ya(i.first()),Ya(i.last())),s=i.getIterator(),a=s.getNext();return fi(e).Y({index:"documentKeyIndex",range:o},(u,c,l)=>{let d=b.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&db(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,c),a=s.hasNext()?s.getNext():null),a?l.U(Ya(a)):l.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Ud(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fi(e).W(IDBKeyRange.bound(a,u,!0)).next(c=>{o?.incrementDocumentReadCount(c.length);let l=wt();for(let d of c){let h=this.nr(b.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Pu(n,h)||i.has(h.key))&&(l=l.insert(h.key,h))}return l})}getAllFromCollectionGroup(e,n,r,i){let o=wt(),s=lb(n,r),a=lb(n,jt.max());return fi(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,c,l)=>{let d=this.nr(b.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(d.key,d),o.size===i&&l.done()}).next(()=>o)}newChangeBuffer(e){return new Wy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return cb(e).get("remoteDocumentGlobalKey").next(n=>(k(!!n),n))}tr(e,n){return cb(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=kL(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(V.min())))return r}return je.newInvalidDocument(e)}};function AA(t){return new Gy(t)}var Wy=class extends Gd{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Tn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new de((o,s)=>H(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=YT(this.ar.serializer,s);i=i.add(o.path.popLast());let c=qd(u);r+=c-a.size,n.push(this.ar.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=YT(this.ar.serializer,s.convertToNoDocument(V.min()));n.push(this.ar.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),p.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function cb(t){return We(t,"remoteDocumentGlobal")}function fi(t){return We(t,"remoteDocumentsV14")}function Ya(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function lb(t,e){let n=e.documentKey.path.toArray();return[t,Ud(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function db(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=H(n[o],r[o]),i)return i;return i=H(n.length,r.length),i||(i=H(n[n.length-2],r[r.length-2]),i||H(n[n.length-1],r[r.length-1]))}var Ky=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Wd=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&nu(r.mutation,i,At.empty(),Ie.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,G()).next(()=>r))}getLocalViewOfDocuments(e,n,r=G()){let i=_n();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Xa();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=_n();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,G()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=wt(),s=tu(),a=function(){return tu()}();return n.forEach((u,c)=>{let l=r.get(c.key);i.has(c.key)&&(l===void 0||l.mutation instanceof Xt)?o=o.insert(c.key,c):l!==void 0?(s.set(c.key,l.mutation.getFieldMask()),nu(l.mutation,c,l.mutation.getFieldMask(),Ie.now())):s.set(c.key,At.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,l)=>s.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new Ky(l,(d=s.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=tu(),i=new ye((s,a)=>s-a),o=G();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let c=n.get(u);if(c===null)return;let l=r.get(u)||At.empty();l=a.applyToLocalView(c,l),r.set(u,l);let d=(i.get(a.batchId)||G()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),c=u.key,l=u.value,d=Yb();l.forEach(h=>{if(!o.has(h)){let f=iA(n.get(h),r.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return p.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return b.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Xv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):p.resolve(_n()),a=-1,u=o;return s.next(c=>p.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?p.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,G())).next(l=>({batchId:a,changes:Qb(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new b(n)).next(r=>{let i=Xa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Xa();return this.indexManager.getCollectionParents(e,o).next(a=>p.forEach(a,u=>{let c=function(d,h){return new Zt(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,c)=>{let l=c.getKey();s.get(l)===null&&(s=s.insert(l,je.newInvalidDocument(l)))});let a=Xa();return s.forEach((u,c)=>{let l=o.get(u);l!==void 0&&nu(l.mutation,c,At.empty(),Ie.now()),Pu(n,c)&&(a=a.insert(u,c))}),a})}};var Qy=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return p.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ne(i.createTime)}}(n)),p.resolve()}getNamedQuery(e,n){return p.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:t_(i.bundledQuery),readTime:Ne(i.readTime)}}(n)),p.resolve()}};var Yy=class{constructor(){this.overlays=new ye(b.comparator),this.hr=new Map}getOverlay(e,n){return p.resolve(this.overlays.get(n))}getOverlays(e,n){let r=_n();return p.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),p.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),p.resolve()}getOverlaysForCollection(e,n,r){let i=_n(),o=n.length+1,s=new b(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return p.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ye((c,l)=>c-l),s=this.overlays.getIterator();for(;s.hasNext();){let c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=o.get(c.largestBatchId);l===null&&(l=_n(),o=o.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}let a=_n(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return p.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new fu(n,r));let o=this.hr.get(n);o===void 0&&(o=G(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var _u=class{constructor(){this.Pr=new de(Fe.Ir),this.Tr=new de(Fe.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Fe(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Fe(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new b(new ne([])),r=new Fe(n,e),i=new Fe(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new b(new ne([])),r=new Fe(n,e),i=new Fe(n,e+1),o=G();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Fe(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Fe=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return b.comparator(e.key,n.key)||H(e.pr,n.pr)}static Er(e,n){return H(e.pr,n.pr)||b.comparator(e.key,n.key)}};var Zy=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new de(Fe.Ir)}checkEmpty(e){return p.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new hu(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new Fe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return p.resolve(s)}lookupMutationBatch(e,n){return p.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return p.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return p.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return p.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Fe(n,0),i=new Fe(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),p.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new de(H);return n.forEach(i=>{let o=new Fe(i,0),s=new Fe(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),p.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;b.isDocumentKey(o)||(o=o.child(""));let s=new Fe(new b(o),0),a=new de(H);return this.wr.forEachWhile(u=>{let c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.pr)),!0)},s),p.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){k(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return p.forEach(n.mutations,i=>{let o=new Fe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Fe(n,0),i=this.wr.firstAfterOrEqual(r);return p.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,p.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Xy=class{constructor(e){this.vr=e,this.docs=function(){return new ye(b.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return p.resolve(r?r.document.mutableCopy():je.newInvalidDocument(n))}getEntries(e,n){let r=wt();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():je.newInvalidDocument(i))}),p.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=wt(),s=n.path,a=new b(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:c,value:{document:l}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||Kv(Sb(l),r)<=0||(i.has(l.key)||Pu(n,l))&&(o=o.insert(l.key,l.mutableCopy()))}return p.resolve(o)}getAllFromCollectionGroup(e,n,r,i){x()}Fr(e,n){return p.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Jy(this)}getSize(e){return p.resolve(this.size)}},Jy=class extends Gd{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),p.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var ev=class{constructor(e){this.persistence=e,this.Mr=new Tn(n=>Ci(n),Mu),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.Or=0,this.Nr=new _u,this.targetCount=0,this.Br=Jo.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),p.resolve()}getLastRemoteSnapshotVersion(e){return p.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return p.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),p.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),p.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new Jo(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,p.resolve()}updateTargetData(e,n){return this.qn(n),p.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,p.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),p.waitFor(o).next(()=>i)}getTargetCount(e){return p.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return p.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),p.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),p.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),p.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return p.resolve(r)}containsKey(e,n){return p.resolve(this.Nr.containsKey(n))}};var Kd=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new bt(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new ev(this),this.indexManager=new jy,this.remoteDocumentCache=function(i){return new Xy(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new jd(n),this.$r=new Qy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Yy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new Zy(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){E("MemoryPersistence","Starting transaction:",e);let i=new tv(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return p.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},tv=class extends Ad{constructor(e){super(),this.currentSequenceNumber=e}},Qd=class t{constructor(e){this.persistence=e,this.zr=new _u,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw x()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),p.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),p.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),p.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return p.forEach(this.Jr,r=>{let i=b.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,V.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return p.or([()=>p.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var nv=class{constructor(e){this.serializer=e}N(e,n,r,i){let o=new Sd("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ST,{unique:!0}),u.createObjectStore("documentMutations")}(e),hb(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=p.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),hb(e)),s=s.next(()=>function(u){let c=u.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:V.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",l)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,c){return c.store("mutations").W().next(l=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ST,{unique:!0});let d=c.store("mutations"),h=l.map(f=>d.put(f));return p.waitFor(h)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let c=u.createObjectStore("documentOverlays",{keyPath:nL});c.createIndex("collectionPathOverlayIndex",rL,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",iL,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let c=u.createObjectStore("remoteDocumentsV14",{keyPath:HV});c.createIndex("documentKeyIndex",GV),c.createIndex("collectionGroupIndex",WV)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:XV}).createIndex("sequenceNumberIndex",JV,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:eL}).createIndex("documentKeyIndex",tL,{unique:!1})}(e))),s}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=qd(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>p.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>p.forEach(a,u=>{k(u.userId===o.userId);let c=mi(this.serializer,u);return CA(e,o.userId,c).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.Y((s,a)=>{let u=new ne(s),c=function(d){return[0,ht(d)]}(u);o.push(n.get(c).next(l=>l?p.resolve():(d=>n.put({targetId:0,path:ht(d),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>p.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:ZV});let r=n.store("collectionParents"),i=new vu,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:ht(u)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let u=new ne(s);return o(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,u],c)=>{let l=vn(a);return o(l.popLast())}))}ri(e){let n=e.store("targets");return n.Y((r,i)=>{let o=Ja(i),s=EA(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),u=function(d){return d.document?new b(ne.fromString(d.document.name).popFirst(5)):d.noDocument?b.fromSegments(d.noDocument.path):d.unknownDocument?b.fromSegments(d.unknownDocument.path):x()}(s).path.toArray(),c={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(c))}).next(()=>p.waitFor(i))}si(e,n){let r=n.store("mutations"),i=AA(this.serializer),o=new Kd(Qd.Hr,this.serializer.ct);return r.W().next(s=>{let a=new Map;return s.forEach(u=>{var c;let l=(c=a.get(u.userId))!==null&&c!==void 0?c:G();mi(this.serializer,u).keys().forEach(d=>l=l.add(d)),a.set(u.userId,l)}),p.forEach(a,(u,c)=>{let l=new Ve(c),d=Bd.lt(this.serializer,l),h=o.getIndexManager(l),f=Hd.lt(l,this.serializer,h,o.referenceDelegate);return new Wd(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new au(n,bt._e),u).next()})})}};function hb(t){t.createObjectStore("targetDocuments",{keyPath:QV}).createIndex("documentTargetsIndex",YV,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",KV,{unique:!0}),t.createObjectStore("targetGlobal")}var Wm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rv=class t{constructor(e,n,r,i,o,s,a,u,c,l,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=c,this.ai=l,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new w(g.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hy(this,i),this.Ti=n+"main",this.serializer=new jd(u),this.Ei=new qn(this.Ti,this.ui,new nv(this.serializer)),this.Qr=new By(this.referenceDelegate,this.serializer),this.remoteDocumentCache=AA(this.serializer),this.$r=new Ry,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,l===!1&&Pe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new w(g.FAILED_PRECONDITION,Wm);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new bt(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>y(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>y(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>y(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>md(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(kr(e))return E("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return E("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Za(e).get("owner").next(n=>p.resolve(this.Si(n)))}bi(e){return md(e).delete(this.clientId)}Di(){return y(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=We(n,"clientMetadata");return r.W().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return p.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?p.resolve(!0):Za(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new w(g.FAILED_PRECONDITION,Wm);return!1}}return!(!this.networkEnabled||!this.inForeground)||md(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&E("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return y(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new au(e,bt._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Bi()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>md(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Hd.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Uy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Bd.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){E("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(u){return u===15?sL:u===14?Ob:u===13?Nb:u===12?oL:u===11?Rb:void x()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new au(a,this.kr?this.kr.next():bt._e),n==="readwrite-primary"?this.gi(s).next(u=>!!u||this.pi(s)).next(u=>{if(!u)throw Pe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new w(g.FAILED_PRECONDITION,Mb);return r(s)}).next(u=>this.wi(s).next(()=>u)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Za(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new w(g.FAILED_PRECONDITION,Wm)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Za(e).put("owner",n)}static D(){return qn.D()}yi(e){let n=Za(e);return n.get("owner").next(r=>this.Si(r)?(E("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):p.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Pe(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;Vh()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return E("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pe("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Pe("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Za(t){return We(t,"owner")}function md(t){return We(t,"clientMetadata")}function r_(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var iv=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=G(),i=G();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var ov=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Yd=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Vh()?8:qn.v(ys())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ov;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(Fo()<=tn.DEBUG&&E("QueryEngine","SDK will not create cache indexes for query:",Vo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),p.resolve()):(Fo()<=tn.DEBUG&&E("QueryEngine","Query:",Vo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Fo()<=tn.DEBUG&&E("QueryEngine","The SDK decides to create cache indexes for query:",Vo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ft(n))):p.resolve())}ji(e,n){if(jT(n))return p.resolve(null);let r=ft(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=kd(n,null,"F"),r=ft(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=G(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let c=this.Zi(n,a);return this.Xi(n,c,s,u.readTime)?this.ji(e,kd(n,null,"F")):this.es(e,c,n,u)}))})))}Hi(e,n,r,i){return jT(n)||i.isEqual(V.min())?p.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?p.resolve(null):(Fo()<=tn.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vo(n)),this.es(e,s,n,Ab(i,-1)).next(a=>a))})}Zi(e,n){let r=new de(Wb(e));return n.forEach((i,o)=>{Pu(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return Fo()<=tn.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",Vo(n)),this.zi.getDocumentsMatchingQuery(e,n,jt.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var sv=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new ye(H),this.rs=new Tn(o=>Ci(o),Mu),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wd(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function SA(t,e,n,r){return new sv(t,e,n,r)}function MA(t,e){return y(this,null,function*(){let n=S(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=G();for(let c of i){s.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}for(let c of o){a.push(c.batchId);for(let l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})})}function jL(t,e){let n=S(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){let d=c.batch,h=d.keys(),f=p.resolve();return h.forEach(_=>{f=f.next(()=>l.getEntry(u,_)).next(v=>{let m=c.docVersions.get(_);k(m!==null),v.version.compareTo(m)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),l.addEntry(v)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=G();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function xA(t){let e=S(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function UL(t,e){let n=S(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(o,l.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Ge.EMPTY_BYTE_STRING,V.min()).withLastLimboFreeSnapshotVersion(V.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(v,m,I){return v.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(h,f,l)&&a.push(n.Qr.updateTargetData(o,f))});let u=wt(),c=G();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(PA(o,s,e.documentUpdates).next(l=>{u=l.cs,c=l.ls})),!r.isEqual(V.min())){let l=n.Qr.getLastRemoteSnapshotVersion(o).next(d=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return p.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(n.ns=i,o))}function PA(t,e,n){let r=G(),i=G();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=wt();return n.forEach((a,u)=>{let c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(V.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):E("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{cs:s,ls:i}})}function BL(t,e){let n=S(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function es(t,e){let n=S(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,p.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new Xo(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function ts(t,e,n){return y(this,null,function*(){let r=S(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!kr(s))throw s;E("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Zd(t,e,n){let r=S(t),i=V.min(),o=G();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,l){let d=S(u),h=d.rs.get(l);return h!==void 0?p.resolve(d.ns.get(h)):d.Qr.getTargetData(c,l)}(r,s,ft(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:V.min(),n?o:G())).next(a=>(OA(r,Gb(e),a),{documents:a,hs:o})))}function RA(t,e){let n=S(t),r=S(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function NA(t,e){let n=S(t),r=n.ss.get(e)||V.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,Ab(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(OA(n,e,i),i))}function OA(t,e,n){let r=t.ss.get(e)||V.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function $L(t,e,n,r){return y(this,null,function*(){let i=S(t),o=G(),s=wt();for(let c of n){let l=e.Ps(c.metadata.name);c.document&&(o=o.add(l));let d=e.Is(c);d.setReadTime(e.Ts(c.metadata.readTime)),s=s.insert(l,d)}let a=i.os.newChangeBuffer({trackRemovals:!0}),u=yield es(i,function(l){return ft(us(ne.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>PA(c,a,s).next(l=>(a.apply(c),l)).next(l=>i.Qr.removeMatchingKeysForTargetId(c,u.targetId).next(()=>i.Qr.addMatchingKeys(c,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,l.cs,l.ls)).next(()=>l.cs)))})}function zL(r,i){return y(this,arguments,function*(t,e,n=G()){let o=yield es(t,ft(t_(e.bundledQuery))),s=S(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ne(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.$r.saveNamedQuery(a,e);let c=o.withResumeToken(Ge.EMPTY_BYTE_STRING,u);return s.ns=s.ns.insert(c.targetId,c),s.Qr.updateTargetData(a,c).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function fb(t,e){return`firestore_clients_${t}_${e}`}function pb(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Km(t,e){return`firestore_targets_${t}_${e}`}var Xd=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new w(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Pe("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},ru=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new w(r.error.code,r.error.message))),o?new t(e,r.state,i):(Pe("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Jd=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Jv();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=xb(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Pe("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},av=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Pe("SharedClientState",`Failed to parse online state: ${e}`),null)}},wu=class{constructor(){this.activeTargetIds=Jv()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},iu=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ye(H),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=fb(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new wu),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return y(this,null,function*(){let e=yield this.syncEngine.Li();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(fb(this.persistenceKey,r));if(i){let o=Jd.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,r){this.Bs(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(Km(this.persistenceKey,e));if(r){let i=ru.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Km(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return E("SharedClientState","READ",e,n),n}setItem(e,n){E("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){E("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(E("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Pe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>y(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=bt._e;if(o!=null)try{let a=JSON.parse(o);k(typeof a=="number"),s=a}catch(a){Pe("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==bt._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,r){let i=new Xd(this.currentUser,e,n,r),o=pb(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Ls(e){let n=pb(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=Km(this.persistenceKey,e),o=new ru(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return Jd.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Xd.Es(new Ve(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return ru.Es(i,n)}xs(e){return av.Es(e)}Js(e){return JSON.parse(e)}zs(e){return y(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);E("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Jv();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},eh=class{constructor(){this.no=new wu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new wu,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var uv=class{io(e){}shutdown(){}};var th=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var yd=null;function Qm(){return yd===null?yd=function(){return 268435456+Math.round(2147483648*Math.random())}():yd++,"0x"+yd.toString(16)}var qL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var cv=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var it="WebChannelConnection",lv=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){let a=Qm(),u=this.bo(n,r.toUriEncodedString());E("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(n,u,c,i).then(l=>(E("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Lt("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+as}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){let i=qL[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let o=Qm();return new Promise((s,a)=>{let u=new DT;u.setWithCredentials(!0),u.listenOnce(ET.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case fd.NO_ERROR:let l=u.getResponseJson();E(it,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case fd.TIMEOUT:E(it,`RPC '${e}' ${o} timed out`),a(new w(g.DEADLINE_EXCEEDED,"Request time out"));break;case fd.HTTP_ERROR:let d=u.getStatus();if(E(it,`RPC '${e}' ${o} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let _=function(m){let I=m.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(I)>=0?I:g.UNKNOWN}(f.status);a(new w(_,f.message))}else a(new w(g.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new w(g.UNAVAILABLE,"Connection failed."));break;default:x()}}finally{E(it,`RPC '${e}' ${o} completed.`)}});let c=JSON.stringify(i);E(it,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)})}Fo(e,n,r){let i=Qm(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=_T(),a=wT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let l=o.join("");E(it,`Creating RPC '${e}' stream ${i}: ${l}`,u);let d=s.createWebChannel(l,u),h=!1,f=!1,_=new cv({lo:m=>{f?E(it,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(E(it,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),E(it,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},ho:()=>d.close()}),v=(m,I,P)=>{m.listen(I,T=>{try{P(T)}catch(R){setTimeout(()=>{throw R},0)}})};return v(d,Wa.EventType.OPEN,()=>{f||E(it,`RPC '${e}' stream ${i} transport opened.`)}),v(d,Wa.EventType.CLOSE,()=>{f||(f=!0,E(it,`RPC '${e}' stream ${i} transport closed`),_.Vo())}),v(d,Wa.EventType.ERROR,m=>{f||(f=!0,Lt(it,`RPC '${e}' stream ${i} transport errored:`,m),_.Vo(new w(g.UNAVAILABLE,"The operation could not be completed")))}),v(d,Wa.EventType.MESSAGE,m=>{var I;if(!f){let P=m.data[0];k(!!P);let T=P,R=T.error||((I=T[0])===null||I===void 0?void 0:I.error);if(R){E(it,`RPC '${e}' stream ${i} received error:`,R);let j=R.status,q=function(Oh){let $_=ke[Oh];if($_!==void 0)return aA($_)}(j),he=R.message;q===void 0&&(q=g.INTERNAL,he="Unknown error status: "+j+" with message "+R.message),f=!0,_.Vo(new w(q,he)),d.close()}else E(it,`RPC '${e}' stream ${i} received:`,P),_.mo(P)}}),v(a,IT.STAT_EVENT,m=>{m.stat===Hm.PROXY?E(it,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===Hm.NOPROXY&&E(it,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.Ro()},0),_}};function kA(){return typeof window<"u"?window:null}function Id(){return typeof document<"u"?document:null}function Ru(t){return new Ay(t,!0)}var Eu=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&E("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var nh=class{constructor(e,n,r,i,o,s,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Eu(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return y(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return y(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return y(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(Pe(n.toString()),Pe("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new w(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>y(this,null,function*(){this.state=0,this.start()}))}__(e){return E("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},dv=class extends nh{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=SL(this.serializer,e),r=function(o){if(!("targetChange"in o))return V.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?V.min():s.readTime?Ne(s.readTime):V.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=xy(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=Nd(u)?{documents:gA(o,u)}:{query:mA(o,u).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=cA(o,s.resumeToken);let c=Sy(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(V.min())>0){a.readTime=Zo(o,s.snapshotVersion.toTimestamp());let c=Sy(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let r=xL(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=xy(this.serializer),n.removeTarget=e,this.t_(n)}},hv=class extends nh{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(k(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=ML(e.writeResults,e.commitTime),r=Ne(e.commitTime);return this.listener.T_(r,n)}return k(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=xy(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>yu(this.serializer,r))};this.t_(n)}};var fv=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new w(g.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,My(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new w(g.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,My(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new w(g.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var pv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Pe(n),this.g_=!1):E("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var gv=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{r.enqueueAndForget(()=>y(this,null,function*(){Fr(this)&&(E("RemoteStore","Restarting streams for network reachability change."),yield function(u){return y(this,null,function*(){let c=S(u);c.v_.add(4),yield cs(c),c.x_.set("Unknown"),c.v_.delete(4),yield Nu(c)})}(this))}))}),this.x_=new pv(r,i)}};function Nu(t){return y(this,null,function*(){if(Fr(t))for(let e of t.F_)yield e(!0)})}function cs(t){return y(this,null,function*(){for(let e of t.F_)yield e(!1)})}function Eh(t,e){let n=S(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),s_(n)?o_(n):ds(n).Jo()&&i_(n,e))}function Iu(t,e){let n=S(t),r=ds(n);n.C_.delete(e),r.Jo()&&FA(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Fr(n)&&n.x_.set("Unknown"))}function i_(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(V.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ds(t).c_(e)}function FA(t,e){t.O_.Oe(e),ds(t).l_(e)}function o_(t){t.O_=new by({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),ds(t).start(),t.x_.p_()}function s_(t){return Fr(t)&&!ds(t).Ho()&&t.C_.size>0}function Fr(t){return S(t).v_.size===0}function VA(t){t.O_=void 0}function HL(t){return y(this,null,function*(){t.C_.forEach((e,n)=>{i_(t,e)})})}function GL(t,e){return y(this,null,function*(){VA(t),s_(t)?(t.x_.S_(e),o_(t)):t.x_.set("Unknown")})}function WL(t,e,n){return y(this,null,function*(){if(t.x_.set("Online"),e instanceof Vd&&e.state===2&&e.cause)try{yield function(i,o){return y(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){E("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rh(t,r)}else if(e instanceof qo?t.O_.$e(e):e instanceof Fd?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(V.min()))try{let r=yield xA(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){let l=o.C_.get(c);l&&o.C_.set(c,l.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,c)=>{let l=o.C_.get(u);if(!l)return;o.C_.set(u,l.withResumeToken(Ge.EMPTY_BYTE_STRING,l.snapshotVersion)),FA(o,u);let d=new Xo(l.target,u,c,l.sequenceNumber);i_(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){E("RemoteStore","Failed to raise snapshot:",r),yield rh(t,r)}})}function rh(t,e,n){return y(this,null,function*(){if(!kr(e))throw e;t.v_.add(1),yield cs(t),t.x_.set("Offline"),n||(n=()=>xA(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){E("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Nu(t)}))})}function LA(t,e){return e().catch(n=>rh(t,n,e))}function ls(t){return y(this,null,function*(){let e=S(t),n=Nr(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;KL(e);)try{let i=yield BL(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,QL(e,i)}catch(i){yield rh(e,i)}jA(e)&&UA(e)})}function KL(t){return Fr(t)&&t.D_.length<10}function QL(t,e){t.D_.push(e);let n=Nr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function jA(t){return Fr(t)&&!Nr(t).Ho()&&t.D_.length>0}function UA(t){Nr(t).start()}function YL(t){return y(this,null,function*(){Nr(t).d_()})}function ZL(t){return y(this,null,function*(){let e=Nr(t);for(let n of t.D_)e.I_(n.mutations)})}function XL(t,e,n){return y(this,null,function*(){let r=t.D_.shift(),i=Dy.from(r,e,n);yield LA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield ls(t)})}function JL(t,e){return y(this,null,function*(){e&&Nr(t).P_&&(yield function(r,i){return y(this,null,function*(){if(function(s){return sA(s)&&s!==g.ABORTED}(i.code)){let o=r.D_.shift();Nr(r).Zo(),yield LA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ls(r)}})}(t,e)),jA(t)&&UA(t)})}function gb(t,e){return y(this,null,function*(){let n=S(t);n.asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials");let r=Fr(n);n.v_.add(3),yield cs(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Nu(n)})}function mv(t,e){return y(this,null,function*(){let n=S(t);e?(n.v_.delete(2),yield Nu(n)):e||(n.v_.add(2),yield cs(n),n.x_.set("Unknown"))})}function ds(t){return t.N_||(t.N_=function(n,r,i){let o=S(n);return o.R_(),new dv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:HL.bind(null,t),To:GL.bind(null,t),u_:WL.bind(null,t)}),t.F_.push(e=>y(this,null,function*(){e?(t.N_.Zo(),s_(t)?o_(t):t.x_.set("Unknown")):(yield t.N_.stop(),VA(t))}))),t.N_}function Nr(t){return t.B_||(t.B_=function(n,r,i){let o=S(n);return o.R_(),new hv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:YL.bind(null,t),To:JL.bind(null,t),E_:ZL.bind(null,t),T_:XL.bind(null,t)}),t.F_.push(e=>y(this,null,function*(){e?(t.B_.Zo(),yield ls(t)):(yield t.B_.stop(),t.D_.length>0&&(E("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var yv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Le,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new w(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function hs(t,e){if(Pe("AsyncQueue",`${e}: ${t}`),kr(t))return new w(g.UNAVAILABLE,`${e}: ${t}`);throw t}var ih=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||b.comparator(n.key,r.key):(n,r)=>b.comparator(n.key,r.key),this.keyedMap=Xa(),this.sortedSet=new ye(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var oh=class{constructor(){this.L_=new ye(b.comparator)}track(e){let n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):x():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}},ns=class t{constructor(e,n,r,i,o,s,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,ih.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var vv=class{constructor(){this.q_=void 0,this.Q_=[]}},_v=class{constructor(){this.queries=new Tn(e=>Hb(e),xu),this.onlineState="Unknown",this.K_=new Set}};function a_(t,e){return y(this,null,function*(){let n=S(t),r=e.query,i=!1,o=n.queries.get(r);if(o||(i=!0,o=new vv),i)try{o.q_=yield n.onListen(r)}catch(s){let a=hs(s,`Initialization of query '${Vo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.Q_.push(e),e.U_(n.onlineState),o.q_&&e.W_(o.q_)&&c_(n)})}function u_(t,e){return y(this,null,function*(){let n=S(t),r=e.query,i=!1,o=n.queries.get(r);if(o){let s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=o.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function e2(t,e){let n=S(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Q_)a.W_(i)&&(r=!0);s.q_=i}}r&&c_(n)}function t2(t,e,n){let r=S(t),i=r.queries.get(e);if(i)for(let o of i.Q_)o.onError(n);r.queries.delete(e)}function c_(t){t.K_.forEach(e=>{e.next()})}var Du=class{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ns(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=ns.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var wv=class{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}};var sh=class{constructor(e){this.serializer=e}Ps(e){return En(this.serializer,e)}Is(e){return e.metadata.exists?pA(this.serializer,e.document,!1):je.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ne(e)}},Ev=class{constructor(e,n,r){this.ta=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=BA(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;let r=ne.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){let n=new Map,r=new sh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||G()).add(o);n.set(s,a)}}return n}complete(){return y(this,null,function*(){let e=yield $L(this.localStore,new sh(this.serializer),this.documents,this.ta.id),n=this.ra(this.documents);for(let r of this.queries)yield zL(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}})}};function BA(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var ah=class{constructor(e){this.key=e}},uh=class{constructor(e){this.key=e}},ch=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=G(),this.mutatedKeys=G(),this.ua=Wb(e),this.ca=new ih(this.ua)}get la(){return this.oa}ha(e,n){let r=n?n.Pa:new oh,i=n?n.ca:this.ca,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=Pu(this.query,d)?d:null,_=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),m=!1;h&&f?h.data.isEqual(f.data)?_!==v&&(r.track({type:3,doc:f}),m=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),m=!0,(u&&this.ua(f,u)>0||c&&this.ua(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(u||c)&&(a=!0)),m&&(f?(s=s.add(f),o=v?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ca:s,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let s=e.Pa.k_();s.sort((l,d)=>function(f,_){let v=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return x()}};return v(f)-v(_)}(l.type,d.type)||this.ua(l.doc,d.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],u=this.aa.size===0&&this.current&&!i?1:0,c=u!==this._a;return this._a=u,s.length!==0||c?{snapshot:new ns(this.query,e.ca,o,s,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new oh,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=G(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new uh(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new ah(r))}),n}Ra(e){this.oa=e.hs,this.aa=G();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return ns.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},Iv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Dv=class{constructor(e){this.key=e,this.ma=!1}},Cv=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Tn(a=>Hb(a),xu),this.pa=new Map,this.ya=new Set,this.wa=new ye(b.comparator),this.Sa=new Map,this.ba=new _u,this.Da={},this.Ca=new Map,this.va=Jo.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function n2(t,e){return y(this,null,function*(){let n=p_(t),r,i,o=n.ga.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{let s=yield es(n.localStore,ft(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield l_(n,e,r,a==="current",s.resumeToken),n.isPrimaryClient&&Eh(n.remoteStore,s)}return i})}function l_(t,e,n,r,i){return y(this,null,function*(){t.Ma=(d,h,f)=>function(v,m,I,P){return y(this,null,function*(){let T=m.view.ha(I);T.Xi&&(T=yield Zd(v.localStore,m.query,!1).then(({documents:he})=>m.view.ha(he,T)));let R=P&&P.targetChanges.get(m.targetId),j=P&&P.targetMismatches.get(m.targetId)!=null,q=m.view.applyChanges(T,v.isPrimaryClient,R,j);return Tv(v,m.targetId,q.da),q.snapshot})}(t,d,h,f);let o=yield Zd(t.localStore,e,!0),s=new ch(e,o.hs),a=s.ha(o.documents),u=gu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,u);Tv(t,n,c.da);let l=new Iv(e,n,s);return t.ga.set(e,l),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot})}function r2(t,e){return y(this,null,function*(){let n=S(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(o=>!xu(o,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield ts(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Iu(n.remoteStore,r.targetId),rs(n,r.targetId)}).catch(Or))):(rs(n,r.targetId),yield ts(n.localStore,r.targetId,!0))})}function i2(t,e,n){return y(this,null,function*(){let r=g_(t);try{let i=yield function(s,a){let u=S(s),c=Ie.now(),l=a.reduce((f,_)=>f.add(_.key),G()),d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let _=wt(),v=G();return u.os.getEntries(f,l).next(m=>{_=m,_.forEach((I,P)=>{P.isValidDocument()||(v=v.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,_)).next(m=>{d=m;let I=[];for(let P of a){let T=EL(P,d.get(P.key).overlayedDocument);T!=null&&I.push(new Xt(P.key,T,Lb(T.value.mapValue),Ae.exists(!0)))}return u.mutationQueue.addMutationBatch(f,c,I,a)}).next(m=>{h=m;let I=m.applyToLocalDocumentSet(d,v);return u.documentOverlayCache.saveOverlays(f,m.batchId,I)})}).then(()=>({batchId:h.batchId,changes:Qb(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let c=s.Da[s.currentUser.toKey()];c||(c=new ye(H)),c=c.insert(a,u),s.Da[s.currentUser.toKey()]=c}(r,i.batchId,n),yield Qn(r,i.changes),yield ls(r.remoteStore)}catch(i){let o=hs(i,"Failed to persist write");n.reject(o)}})}function $A(t,e){return y(this,null,function*(){let n=S(t);try{let r=yield UL(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Sa.get(o);s&&(k(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?k(s.ma):i.removedDocuments.size>0&&(k(s.ma),s.ma=!1))}),yield Qn(n,r,e)}catch(r){yield Or(r)}})}function mb(t,e,n){let r=S(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((o,s)=>{let a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=S(s);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(let h of d.Q_)h.U_(a)&&(c=!0)}),c&&c_(u)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function o2(t,e,n){return y(this,null,function*(){let r=S(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Sa.get(e),o=i&&i.key;if(o){let s=new ye(b.comparator);s=s.insert(o,je.newNoDocument(o,V.min()));let a=G().add(o),u=new pu(V.min(),new Map,new ye(H),s,a);yield $A(r,u),r.wa=r.wa.remove(o),r.Sa.delete(e),f_(r)}else yield ts(r.localStore,e,!1).then(()=>rs(r,e,n)).catch(Or)})}function s2(t,e){return y(this,null,function*(){let n=S(t),r=e.batch.batchId;try{let i=yield jL(n.localStore,e);h_(n,r,null),d_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Qn(n,i)}catch(i){yield Or(i)}})}function a2(t,e,n){return y(this,null,function*(){let r=S(t);try{let i=yield function(s,a){let u=S(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(k(d!==null),l=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);h_(r,e,n),d_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Qn(r,i)}catch(i){yield Or(i)}})}function u2(t,e){return y(this,null,function*(){let n=S(t);Fr(n.remoteStore)||E("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=S(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Ca.get(r)||[];i.push(e),n.Ca.set(r,i)}catch(r){let i=hs(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function d_(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function h_(t,e,n){let r=S(t),i=r.Da[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function rs(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||zA(t,r)})}function zA(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(Iu(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),f_(t))}function Tv(t,e,n){for(let r of n)r instanceof ah?(t.ba.addReference(r.key,e),c2(t,r)):r instanceof uh?(E("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||zA(t,r.key)):x()}function c2(t,e){let n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(E("SyncEngine","New document in limbo: "+n),t.ya.add(r),f_(t))}function f_(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new b(ne.fromString(e)),r=t.va.next();t.Sa.set(r,new Dv(n)),t.wa=t.wa.insert(n,r),Eh(t.remoteStore,new Xo(ft(us(n.path)),r,"TargetPurposeLimboResolution",bt._e))}}function Qn(t,e,n){return y(this,null,function*(){let r=S(t),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach((a,u)=>{s.push(r.Ma(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);let l=iv.Ki(u.targetId,c);o.push(l)}}))}),yield Promise.all(s),r.fa.u_(i),yield function(u,c){return y(this,null,function*(){let l=S(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>p.forEach(c,h=>p.forEach(h.qi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>p.forEach(h.Qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!kr(d))throw d;E("LocalStore","Failed to update sequence numbers: "+d)}for(let d of c){let h=d.targetId;if(!d.fromCache){let f=l.ns.get(h),_=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(_);l.ns=l.ns.insert(h,v)}}})}(r.localStore,o))})}function l2(t,e){return y(this,null,function*(){let n=S(t);if(!n.currentUser.isEqual(e)){E("SyncEngine","User change. New user:",e.toKey());let r=yield MA(n.localStore,e);n.currentUser=e,function(o,s){o.Ca.forEach(a=>{a.forEach(u=>{u.reject(new w(g.CANCELLED,s))})}),o.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qn(n,r.us)}})}function d2(t,e){let n=S(t),r=n.Sa.get(e);if(r&&r.ma)return G().add(r.key);{let i=G(),o=n.pa.get(e);if(!o)return i;for(let s of o){let a=n.ga.get(s);i=i.unionWith(a.view.la)}return i}}function h2(t,e){return y(this,null,function*(){let n=S(t),r=yield Zd(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&Tv(n,e.targetId,i.da),i})}function f2(t,e){return y(this,null,function*(){let n=S(t);return NA(n.localStore,e).then(r=>Qn(n,r))})}function p2(t,e,n,r){return y(this,null,function*(){let i=S(t),o=yield function(a,u){let c=S(a),l=S(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.vn(d,u).next(h=>h?c.localDocuments.getDocuments(d,h):p.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield ls(i.remoteStore):n==="acknowledged"||n==="rejected"?(h_(i,e,r||null),d_(i,e),function(a,u){S(S(a).mutationQueue).Mn(u)}(i.localStore,e)):x(),yield Qn(i,o)):E("SyncEngine","Cannot apply mutation batch with id: "+e)})}function g2(t,e){return y(this,null,function*(){let n=S(t);if(p_(n),g_(n),e===!0&&n.Fa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield yb(n,r.toArray());n.Fa=!0,yield mv(n.remoteStore,!0);for(let o of i)Eh(n.remoteStore,o)}else if(e===!1&&n.Fa!==!1){let r=[],i=Promise.resolve();n.pa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(rs(n,s),ts(n.localStore,s,!0))),Iu(n.remoteStore,s)}),yield i,yield yb(n,r),function(s){let a=S(s);a.Sa.forEach((u,c)=>{Iu(a.remoteStore,c)}),a.ba.mr(),a.Sa=new Map,a.wa=new ye(b.comparator)}(n),n.Fa=!1,yield mv(n.remoteStore,!1)}})}function yb(t,e,n){return y(this,null,function*(){let r=S(t),i=[],o=[];for(let s of e){let a,u=r.pa.get(s);if(u&&u.length!==0){a=yield es(r.localStore,ft(u[0]));for(let c of u){let l=r.ga.get(c),d=yield h2(r,l);d.snapshot&&o.push(d.snapshot)}}else{let c=yield RA(r.localStore,s);a=yield es(r.localStore,c),yield l_(r,qA(c),s,!1,a.resumeToken)}i.push(a)}return r.fa.u_(o),i})}function qA(t){return qb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function m2(t){return function(n){return S(S(n).persistence).Li()}(S(t).localStore)}function y2(t,e,n,r){return y(this,null,function*(){let i=S(t);if(i.Fa)return void E("SyncEngine","Ignoring unexpected query state notification.");let o=i.pa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield NA(i.localStore,Gb(o[0])),a=pu.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Ge.EMPTY_BYTE_STRING);yield Qn(i,s,a);break}case"rejected":yield ts(i.localStore,e,!0),rs(i,e,r);break;default:x()}})}function v2(t,e,n){return y(this,null,function*(){let r=p_(t);if(r.Fa){for(let i of e){if(r.pa.has(i)){E("SyncEngine","Adding an already active target "+i);continue}let o=yield RA(r.localStore,i),s=yield es(r.localStore,o);yield l_(r,qA(o),s.targetId,!1,s.resumeToken),Eh(r.remoteStore,s)}for(let i of n)r.pa.has(i)&&(yield ts(r.localStore,i,!1).then(()=>{Iu(r.remoteStore,i),rs(r,i)}).catch(Or))}})}function p_(t){let e=S(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$A.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o2.bind(null,e),e.fa.u_=e2.bind(null,e.eventManager),e.fa.xa=t2.bind(null,e.eventManager),e}function g_(t){let e=S(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=a2.bind(null,e),e}function _2(t,e,n){let r=S(t);(function(o,s,a){return y(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(f,_){let v=S(f),m=Ne(_.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",I=>v.$r.getBundleMetadata(I,_.id)).then(I=>!!I&&I.createTime.compareTo(m)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(BA(u));let c=new Ev(u,o.localStore,s.serializer),l=yield s.Oa();for(;l;){let h=yield c.na(l);h&&a._updateProgress(h),l=yield s.Oa()}let d=yield c.complete();return yield Qn(o,d.sa,void 0),yield function(f,_){let v=S(f);return v.persistence.runTransaction("Save bundle","readwrite",m=>v.$r.saveBundleMetadata(m,_))}(o.localStore,u),a._completeWith(d.progress),Promise.resolve(d.ia)}catch(u){return Lt("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Cu=class{constructor(){this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){this.serializer=Ru(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return SA(this.persistence,new Yd,e.initialUser,this.serializer)}createPersistence(e){return new Kd(Qd.Hr,this.serializer)}createSharedClientState(e){return new eh}terminate(){return y(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var lh=class t extends Cu{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){yield kh(t.prototype,this,"initialize").call(this,e),yield this.Na.initialize(this,e),yield g_(this.Na.syncEngine),yield ls(this.Na.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return SA(this.persistence,new Yd,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new zy(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new ay(n,this.persistence);return new sy(e.asyncQueue,r)}createPersistence(e){let n=r_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Vt.withCacheSize(this.cacheSizeBytes):Vt.DEFAULT;return new rv(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,kA(),Id(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new eh}},bv=class t extends lh{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return y(this,null,function*(){yield kh(t.prototype,this,"initialize").call(this,e);let n=this.Na.syncEngine;this.sharedClientState instanceof iu&&(this.sharedClientState.syncEngine={Zs:p2.bind(null,n),Xs:y2.bind(null,n),eo:v2.bind(null,n),Li:m2.bind(null,n),Ys:f2.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>y(this,null,function*(){yield g2(this.Na.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=kA();if(!iu.D(n))throw new w(g.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=r_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new iu(n,e.asyncQueue,r,e.clientId,e.initialUser)}},Tu=class{initialize(e,n){return y(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=l2.bind(null,this.syncEngine),yield mv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new _v}()}createDatastore(e){let n=Ru(e.databaseInfo.databaseId),r=function(o){return new lv(o)}(e.databaseInfo);return function(o,s,a,u){return new fv(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new gv(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>mb(this.syncEngine,n,0),function(){return th.D()?new th:new uv}())}createSyncEngine(e,n){return function(i,o,s,a,u,c,l){let d=new Cv(i,o,s,a,u,c);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return y(this,null,function*(){var e;yield function(r){return y(this,null,function*(){let i=S(r);E("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield cs(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function vb(t,e=10240){let n=0;return{read(){return y(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return y(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var is=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Pe("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Av=class{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new Le,this.buffer=new Uint8Array,this.qa=function(){return new TextDecoder("utf-8")}(),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){return y(this,null,function*(){return this.metadata.promise})}Oa(){return y(this,null,function*(){return yield this.getMetadata(),this.Qa()})}Qa(){return y(this,null,function*(){let e=yield this.Ka();if(e===null)return null;let n=this.qa.decode(e),r=Number(n);isNaN(r)&&this.$a(`length string (${n}) is not valid number`);let i=yield this.Ua(r);return new wv(JSON.parse(i),e.length+r)})}Wa(){return this.buffer.findIndex(e=>e===123)}Ka(){return y(this,null,function*(){for(;this.Wa()<0&&!(yield this.Ga()););if(this.buffer.length===0)return null;let e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ua(e){return y(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ga())&&this.$a("Reached the end of bundle when more is expected.");let n=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){return y(this,null,function*(){let e=yield this.ka.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var Sv=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new w(g.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return y(this,null,function*(){let s=S(i),a={documents:o.map(d=>mu(s.serializer,d))},u=yield s.vo("BatchGetDocuments",s.serializer.databaseId,ne.emptyPath(),a,o.length),c=new Map;u.forEach(d=>{let h=AL(s.serializer,d);c.set(h.key.toString(),h)});let l=[];return o.forEach(d=>{let h=c.get(d.toString());k(!!h),l.push(h)}),l})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Rr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=b.fromPath(r);this.mutations.push(new du(i,this.precondition(i)))}),yield function(r,i){return y(this,null,function*(){let o=S(r),s={writes:i.map(a=>yu(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,ne.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw x();n=V.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new w(g.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(V.min())?Ae.exists(!1):Ae.updateTime(n):Ae.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(V.min()))throw new w(g.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ae.updateTime(n)}return Ae.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Mv=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.za=r.maxAttempts,this.jo=new Eu(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo(()=>y(this,null,function*(){let e=new Sv(this.datastore),n=this.Ja(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Ya(i)}))}).catch(r=>{this.Ya(r)})}))}Ja(e){try{let n=this.updateFunction(e);return!Su(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!sA(n)}return!1}};var xv=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ve.UNAUTHENTICATED,this.clientId=Td.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>y(this,null,function*(){E("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(E("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new w(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Le;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=hs(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Dd(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield MA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Pv(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield m_(t);E("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>gb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>gb(e.remoteStore,i)),t._onlineComponents=e})}function HA(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function m_(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){E("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Dd(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!HA(n))throw n;Lt("Error using user provided cache. Falling back to memory cache: "+n),yield Dd(t,new Cu)}}else E("FirestoreClient","Using default OfflineComponentProvider"),yield Dd(t,new Cu);return t._offlineComponents})}function Ih(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(E("FirestoreClient","Using user provided OnlineComponentProvider"),yield Pv(t,t._uninitializedComponentsProvider._online)):(E("FirestoreClient","Using default OnlineComponentProvider"),yield Pv(t,new Tu))),t._onlineComponents})}function GA(t){return m_(t).then(e=>e.persistence)}function y_(t){return m_(t).then(e=>e.localStore)}function WA(t){return Ih(t).then(e=>e.remoteStore)}function v_(t){return Ih(t).then(e=>e.syncEngine)}function w2(t){return Ih(t).then(e=>e.datastore)}function os(t){return y(this,null,function*(){let e=yield Ih(t),n=e.eventManager;return n.onListen=n2.bind(null,e.syncEngine),n.onUnlisten=r2.bind(null,e.syncEngine),n})}function E2(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield GA(t),n=yield WA(t);return e.setNetworkEnabled(!0),function(i){let o=S(i);return o.v_.delete(0),Nu(o)}(n)}))}function I2(t){return t.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield GA(t),n=yield WA(t);return e.setNetworkEnabled(!1),function(i){return y(this,null,function*(){let o=S(i);o.v_.add(0),yield cs(o),o.x_.set("Offline")})}(n)}))}function D2(t,e){let n=new Le;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o,s){return y(this,null,function*(){try{let a=yield function(c,l){let d=S(c);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,l))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new w(g.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=hs(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield y_(t),e,n)})),n.promise}function KA(t,e,n={}){let r=new Le;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,u,c){let l=new is({next:h=>{s.enqueueAndForget(()=>u_(o,d));let f=h.docs.has(a);!f&&h.fromCache?c.reject(new w(g.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&u.source==="server"?c.reject(new w(g.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Du(us(a.path),l,{includeMetadataChanges:!0,Z_:!0});return a_(o,d)}(yield os(t),t.asyncQueue,e,n,r)})),r.promise}function C2(t,e){let n=new Le;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o,s){return y(this,null,function*(){try{let a=yield Zd(i,o,!0),u=new ch(o,a.hs),c=u.ha(a.documents),l=u.applyChanges(c,!1);s.resolve(l.snapshot)}catch(a){let u=hs(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield y_(t),e,n)})),n.promise}function QA(t,e,n={}){let r=new Le;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,u,c){let l=new is({next:h=>{s.enqueueAndForget(()=>u_(o,d)),h.fromCache&&u.source==="server"?c.reject(new w(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Du(a,l,{includeMetadataChanges:!0,Z_:!0});return a_(o,d)}(yield os(t),t.asyncQueue,e,n,r)})),r.promise}function T2(t,e){let n=new is(e);return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o){S(i).K_.add(o),o.next()}(yield os(t),n)})),()=>{n.La(),t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,o){S(i).K_.delete(o)}(yield os(t),n)}))}}function b2(t,e,n,r){let i=function(s,a){let u;return u=typeof s=="string"?uA().encode(s):s,function(l,d){return new Av(l,d)}(function(l,d){if(l instanceof Uint8Array)return vb(l,d);if(l instanceof ArrayBuffer)return vb(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,Ru(e));t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){_2(yield v_(t),i,r)}))}function A2(t,e){return t.asyncQueue.enqueue(()=>y(this,null,function*(){return function(r,i){let o=S(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield y_(t),e)}))}function YA(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var _b=new Map;function __(t,e,n){if(!n)throw new w(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function w_(t,e,n,r){if(e===!0&&r===!0)throw new w(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wb(t){if(!b.isDocumentKey(t))throw new w(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Eb(t){if(b.isDocumentKey(t))throw new w(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Dh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":x()}function re(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new w(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Dh(t);throw new w(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ZA(t,e){if(e<=0)throw new w(g.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var dh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new w(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new w(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}w_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new w(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Si=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new w(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new w(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ym;switch(r.type){case"firstParty":return new ey(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new w(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=_b.get(n);r&&(E("ComponentProvider","Removing Datastore"),_b.delete(n),r.terminate())}(this),Promise.resolve()}};function XA(t,e,n,r={}){var i;let o=(t=re(t,Si))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Lt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Ve.MOCK_USER;else{a=W_(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new w(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ve(c)}t._authCredentials=new Zm(new Cd(a,u))}}var Ze=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},pe=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new In(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},In=class t extends Ze{constructor(e,n,r){super(e,n,us(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new pe(this.firestore,null,new b(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function E_(t,e,...n){if(t=we(t),__("collection","path",e),t instanceof Si){let r=ne.fromString(e,...n);return Eb(r),new In(t,null,r)}{if(!(t instanceof pe||t instanceof In))throw new w(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ne.fromString(e,...n));return Eb(r),new In(t.firestore,null,r)}}function JA(t,e){if(t=re(t,Si),__("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new w(g.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ze(t,null,function(r){return new Zt(ne.emptyPath(),r)}(e))}function Ou(t,e,...n){if(t=we(t),arguments.length===1&&(e=Td.newId()),__("doc","path",e),t instanceof Si){let r=ne.fromString(e,...n);return wb(r),new pe(t,null,new b(r))}{if(!(t instanceof pe||t instanceof In))throw new w(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ne.fromString(e,...n));return wb(r),new pe(t.firestore,t instanceof In?t.converter:null,new b(r))}}function I_(t,e){return t=we(t),e=we(e),(t instanceof pe||t instanceof In)&&(e instanceof pe||e instanceof In)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function D_(t,e){return t=we(t),e=we(e),t instanceof Ze&&e instanceof Ze&&t.firestore===e.firestore&&xu(t._query,e._query)&&t.converter===e.converter}var Rv=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Eu(this,"async_queue_retry"),this._u=()=>{let n=Id();n&&E("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Id();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=Id();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new Le;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return y(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!kr(e))throw e;E("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Pe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=yv.createAndSchedule(this,e,n,r,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&x()}verifyOperationInProgress(){}hu(){return y(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};function Nv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var Ov=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Le,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var eS=-1,_e=class extends Si{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Rv}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||tS(this),this._firestoreClient.terminate()}};function $e(t){return t._firestoreClient||tS(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function tS(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,c,l){return new uy(a,u,c,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,YA(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new xv(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function nS(t,e){dS(t=re(t,_e));let n=$e(t);if(n._uninitializedComponentsProvider)throw new w(g.FAILED_PRECONDITION,"SDK cache is already specified.");Lt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new Tu;return iS(n,i,new lh(i,r.cacheSizeBytes,e?.forceOwnership))}function rS(t){dS(t=re(t,_e));let e=$e(t);if(e._uninitializedComponentsProvider)throw new w(g.FAILED_PRECONDITION,"SDK cache is already specified.");Lt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new Tu;return iS(e,r,new bv(r,n.cacheSizeBytes))}function iS(t,e,n){let r=new Le;return t.asyncQueue.enqueue(()=>y(this,null,function*(){try{yield Dd(t,n),yield Pv(t,e),r.resolve()}catch(i){let o=i;if(!HA(o))throw o;Lt("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function oS(t){if(t._initialized&&!t._terminated)throw new w(g.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Le;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{yield function(r){return y(this,null,function*(){if(!qn.D())return Promise.resolve();let i=r+"main";yield qn.delete(i)})}(r_(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function sS(t){return function(n){let r=new Le;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return u2(yield v_(n),r)})),r.promise}($e(t=re(t,_e)))}function aS(t){return E2($e(t=re(t,_e)))}function uS(t){return I2($e(t=re(t,_e)))}function cS(t,e){let n=$e(t=re(t,_e)),r=new Ov;return b2(n,t._databaseId,e,r),r}function lS(t,e){return A2($e(t=re(t,_e)),e).then(n=>n?new Ze(t,null,n.query):null)}function dS(t){if(t._initialized||t._terminated)throw new w(g.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var bn=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ge.fromBase64String(e))}catch(n){throw new w(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ge.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Jt=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new w(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Re(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Wn=class{constructor(e){this._methodName=e}};var Mi=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new w(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new w(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return H(this._lat,e._lat)||H(this._long,e._long)}};var S2=/^__.*__$/,kv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xt(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pr(e,this.data,n,this.fieldTransforms)}},hh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xt(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function hS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw x()}}var fh=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return ph(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(hS(this.du)&&S2.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},Fv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ru(e)}Su(e,n,r,i=!1){return new fh({du:e,methodName:n,wu:r,path:Re.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ni(t){let e=t._freezeSettings(),n=Ru(t._databaseId);return new Fv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ch(t,e,n,r,i,o={}){let s=t.Su(o.merge||o.mergeFields?2:0,e,n,i);b_("Data must be an object, but it was:",s,r);let a=gS(r,s),u,c;if(o.merge)u=new At(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let d of o.mergeFields){let h=Bv(e,d,n);if(!s.contains(h))throw new w(g.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);yS(l,h)||l.push(h)}u=new At(l),c=s.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=s.fieldTransforms;return new kv(new ot(a),u,c)}var bu=class t extends Wn{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function fS(t,e,n){return new fh({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Vv=class t extends Wn{_toFieldTransform(e){return new Ti(e.path,new Mr)}isEqual(e){return e instanceof t}},Lv=class t extends Wn{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=fS(this,e,!0),r=this.bu.map(o=>Oi(o,n)),i=new Hn(r);return new Ti(e.path,i)}isEqual(e){return e instanceof t&&Lh(this.bu,e.bu)}},jv=class t extends Wn{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=fS(this,e,!0),r=this.bu.map(o=>Oi(o,n)),i=new Gn(r);return new Ti(e.path,i)}isEqual(e){return e instanceof t&&Lh(this.bu,e.bu)}},Uv=class t extends Wn{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){let n=new xr(e.serializer,Jb(e.serializer,this.Du));return new Ti(e.path,n)}isEqual(e){return e instanceof t&&this.Du===e.Du}};function C_(t,e,n,r){let i=t.Su(1,e,n);b_("Data must be an object, but it was:",i,r);let o=[],s=ot.empty();Ri(r,(u,c)=>{let l=A_(e,u,n);c=we(c);let d=i.fu(l);if(c instanceof bu)o.push(l);else{let h=Oi(c,d);h!=null&&(o.push(l),s.set(l,h))}});let a=new At(o);return new hh(s,a,i.fieldTransforms)}function T_(t,e,n,r,i,o){let s=t.Su(1,e,n),a=[Bv(e,r,n)],u=[i];if(o.length%2!=0)throw new w(g.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(Bv(e,o[h])),u.push(o[h+1]);let c=[],l=ot.empty();for(let h=a.length-1;h>=0;--h)if(!yS(c,a[h])){let f=a[h],_=u[h];_=we(_);let v=s.fu(f);if(_ instanceof bu)c.push(f);else{let m=Oi(_,v);m!=null&&(c.push(f),l.set(f,m))}}let d=new At(c);return new hh(l,d,s.fieldTransforms)}function pS(t,e,n,r=!1){return Oi(n,t.Su(r?4:3,e))}function Oi(t,e){if(mS(t=we(t)))return b_("Unsupported field value:",e,t),gS(t,e);if(t instanceof Wn)return function(r,i){if(!hS(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Oi(a,i.gu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=we(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Jb(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ie.fromDate(r);return{timestampValue:Zo(i.serializer,o)}}if(r instanceof Ie){let o=new Ie(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zo(i.serializer,o)}}if(r instanceof Mi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bn)return{bytesValue:cA(i.serializer,r._byteString)};if(r instanceof pe){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:e_(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Dh(r)}`)}(t,e)}function gS(t,e){let n={};return kb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ri(t,(r,i)=>{let o=Oi(i,e.Ru(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function mS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ie||t instanceof Mi||t instanceof bn||t instanceof pe||t instanceof Wn)}function b_(t,e,n){if(!mS(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Dh(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function Bv(t,e,n){if((e=we(e))instanceof Jt)return e._internalPath;if(typeof e=="string")return A_(t,e);throw ph("Field path arguments must be of type string or ",t,!1,void 0,n)}var M2=new RegExp("[~\\*/\\[\\]]");function A_(t,e,n){if(e.search(M2)>=0)throw ph(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jt(...e.split("."))._internalPath}catch{throw ph(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ph(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new w(g.INVALID_ARGUMENT,a+t+u)}function yS(t,e){return t.some(n=>n.isEqual(e))}var xi=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new pe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new $v(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Th("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},$v=class extends xi{data(){return super.data()}};function Th(t,e){return typeof e=="string"?A_(t,e):e instanceof Jt?e._internalPath:e._delegate._internalPath}function vS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new w(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Au=class{},Pi=class extends Au{};function Yn(t,e,...n){let r=[];e instanceof Au&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof zv).length,a=o.filter(u=>u instanceof gh).length;if(s>1||s>0&&a>0)throw new w(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var gh=class t extends Pi{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return SS(e._query,n),new Ze(e.firestore,e.converter,Ey(e._query,n))}_parse(e){let n=Ni(e.firestore);return function(o,s,a,u,c,l,d){let h;if(c.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new w(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){Db(d,l);let f=[];for(let _ of d)f.push(Ib(u,o,_));h={arrayValue:{values:f}}}else h=Ib(u,o,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||Db(d,l),h=pS(a,s,d,l==="in"||l==="not-in");return X.create(c,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function _S(t,e,n){let r=e,i=Th("where",t);return gh._create(i,r,n)}var zv=class t extends Au{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ce.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)SS(s,u),s=Ey(s,u)}(e._query,n),new Ze(e.firestore,e.converter,Ey(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var qv=class t extends Pi{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new w(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new w(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Di(o,s)}(e._query,this._field,this._direction);return new Ze(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Zt(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function wS(t,e="asc"){let n=e,r=Th("orderBy",t);return qv._create(r,n)}var mh=class t extends Pi{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new Ze(e.firestore,e.converter,kd(e._query,this._limit,this._limitType))}};function ES(t){return ZA("limit",t),mh._create("limit",t,"F")}function IS(t){return ZA("limitToLast",t),mh._create("limitToLast",t,"L")}var yh=class t extends Pi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=AS(e,this.type,this._docOrFields,this._inclusive);return new Ze(e.firestore,e.converter,function(i,o){return new Zt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function DS(...t){return yh._create("startAt",t,!0)}function CS(...t){return yh._create("startAfter",t,!1)}var vh=class t extends Pi{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=AS(e,this.type,this._docOrFields,this._inclusive);return new Ze(e.firestore,e.converter,function(i,o){return new Zt(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function TS(...t){return vh._create("endBefore",t,!1)}function bS(...t){return vh._create("endAt",t,!0)}function AS(t,e,n,r){if(n[0]=we(n[0]),n[0]instanceof xi)return function(o,s,a,u,c){if(!u)throw new w(g.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let l=[];for(let d of zo(o))if(d.field.isKeyField())l.push(Ii(s,u.key));else{let h=u.data.field(d.field);if(wh(h))throw new w(g.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new w(g.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}l.push(h)}return new Cn(l,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Ni(t.firestore);return function(s,a,u,c,l,d){let h=s.explicitOrderBy;if(l.length>h.length)throw new w(g.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let _=0;_<l.length;_++){let v=l[_];if(h[_].field.isKeyField()){if(typeof v!="string")throw new w(g.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof v}`);if(!Xv(s)&&v.indexOf("/")!==-1)throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${v}' contains a slash.`);let m=s.path.child(ne.fromString(v));if(!b.isDocumentKey(m))throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${m}' is not because it contains an odd number of segments.`);let I=new b(m);f.push(Ii(a,I))}else{let m=pS(u,c,v);f.push(m)}}return new Cn(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Ib(t,e,n){if(typeof(n=we(n))=="string"){if(n==="")throw new w(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xv(e)&&n.indexOf("/")!==-1)throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ne.fromString(n));if(!b.isDocumentKey(r))throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ii(t,new b(r))}if(n instanceof pe)return Ii(t,n._key);throw new w(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dh(n)}.`)}function Db(t,e){if(!Array.isArray(t)||t.length===0)throw new w(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function SS(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new w(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new w(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var ss=class{convertValue(e,n="none"){switch(Ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(br(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw x()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ri(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Mi(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Yv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(uu(e));default:return null}}convertTimestamp(e){let n=Tr(e);return new Ie(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ne.fromString(e);k(wA(r));let i=new Ar(r.get(1),r.get(3)),o=new b(r.popFirst(5));return i.isEqual(n)||Pe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function bh(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Hv=class extends ss{constructor(e){super(),this.firestore=e}convertBytes(e){return new bn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new pe(this.firestore,null,n)}};var zn=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ut=class extends xi{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Dr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Th("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Dr=class extends Ut{data(e={}){return super.data(e)}},en=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new zn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Dr(this._firestore,this._userDataWriter,r.key,r,new zn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new w(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Dr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new zn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Dr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new zn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),c=-1,l=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:x2(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function x2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return x()}}function S_(t,e){return t instanceof Ut&&e instanceof Ut?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof en&&e instanceof en&&t._firestore===e._firestore&&D_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function MS(t){t=re(t,pe);let e=re(t.firestore,_e);return KA($e(e),t._key).then(n=>R_(e,t,n))}var Kn=class extends ss{constructor(e){super(),this.firestore=e}convertBytes(e){return new bn(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new pe(this.firestore,null,n)}};function xS(t){t=re(t,pe);let e=re(t.firestore,_e),n=$e(e),r=new Kn(e);return D2(n,t._key).then(i=>new Ut(e,r,t._key,i,new zn(i!==null&&i.hasLocalMutations,!0),t.converter))}function PS(t){t=re(t,pe);let e=re(t.firestore,_e);return KA($e(e),t._key,{source:"server"}).then(n=>R_(e,t,n))}function RS(t){t=re(t,Ze);let e=re(t.firestore,_e),n=$e(e),r=new Kn(e);return vS(t._query),QA(n,t._query).then(i=>new en(e,r,t,i))}function NS(t){t=re(t,Ze);let e=re(t.firestore,_e),n=$e(e),r=new Kn(e);return C2(n,t._query).then(i=>new en(e,r,t,i))}function OS(t){t=re(t,Ze);let e=re(t.firestore,_e),n=$e(e),r=new Kn(e);return QA(n,t._query,{source:"server"}).then(i=>new en(e,r,t,i))}function M_(t,e,n){t=re(t,pe);let r=re(t.firestore,_e),i=bh(t.converter,e,n);return fs(r,[Ch(Ni(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ae.none())])}function x_(t,e,n,...r){t=re(t,pe);let i=re(t.firestore,_e),o=Ni(i),s;return s=typeof(e=we(e))=="string"||e instanceof Jt?T_(o,"updateDoc",t._key,e,n,r):C_(o,"updateDoc",t._key,e),fs(i,[s.toMutation(t._key,Ae.exists(!0))])}function kS(t){return fs(re(t.firestore,_e),[new Rr(t._key,Ae.none())])}function FS(t,e){let n=re(t.firestore,_e),r=Ou(t),i=bh(t.converter,e);return fs(n,[Ch(Ni(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ae.exists(!1))]).then(()=>r)}function P_(t,...e){var n,r,i;t=we(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||Nv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(Nv(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let u,c,l;if(t instanceof pe)c=re(t.firestore,_e),l=us(t._key.path),u={next:d=>{e[s]&&e[s](R_(c,t,d))},error:e[s+1],complete:e[s+2]};else{let d=re(t,Ze);c=re(d.firestore,_e),l=d._query;let h=new Kn(c);u={next:f=>{e[s]&&e[s](new en(c,h,d,f))},error:e[s+1],complete:e[s+2]},vS(t._query)}return function(h,f,_,v){let m=new is(v),I=new Du(f,m,_);return h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return a_(yield os(h),I)})),()=>{m.La(),h.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return u_(yield os(h),I)}))}}($e(c),l,a,u)}function VS(t,e){return T2($e(t=re(t,_e)),Nv(e)?e:{next:e})}function fs(t,e){return function(r,i){let o=new Le;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return i2(yield v_(r),i,o)})),o.promise}($e(t),e)}function R_(t,e,n){let r=n.docs.get(e._key),i=new Kn(t);return new Ut(t,i,e._key,r,new zn(n.hasPendingWrites,n.fromCache),e.converter)}var P2={maxAttempts:5};var _h=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ni(e)}set(e,n,r){this._verifyNotCommitted();let i=Er(e,this._firestore),o=bh(i.converter,n,r),s=Ch(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ae.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=Er(e,this._firestore),s;return s=typeof(n=we(n))=="string"||n instanceof Jt?T_(this._dataReader,"WriteBatch.update",o._key,n,r,i):C_(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Ae.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Er(e,this._firestore);return this._mutations=this._mutations.concat(new Rr(n._key,Ae.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new w(g.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Er(t,e){if((t=we(t)).firestore!==e)throw new w(g.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Gv=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ni(n)}get(n){let r=Er(n,this._firestore),i=new Hv(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return x();let s=o[0];if(s.isFoundDocument())return new xi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new xi(this._firestore,i,r._key,null,r.converter);throw x()})}set(n,r,i){let o=Er(n,this._firestore),s=bh(o.converter,r,i),a=Ch(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=Er(n,this._firestore),a;return a=typeof(r=we(r))=="string"||r instanceof Jt?T_(this._dataReader,"Transaction.update",s._key,r,i,o):C_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=Er(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Er(e,this._firestore),r=new Kn(this._firestore);return super.get(e).then(i=>new Ut(this._firestore,r,n._key,i._document,new zn(!1,!1),n.converter))}};function LS(t,e,n){t=re(t,_e);let r=Object.assign(Object.assign({},P2),n);return function(o){if(o.maxAttempts<1)throw new w(g.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new Le;return o.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){let c=yield w2(o);new Mv(o.asyncQueue,c,a,s,u).ja()})),u.promise}($e(t),i=>e(new Gv(t,i)),r)}function jS(){return new bu("deleteField")}function US(){return new Vv("serverTimestamp")}function BS(...t){return new Lv("arrayUnion",t)}function $S(...t){return new jv("arrayRemove",t)}function zS(t){return new Uv("increment",t)}(function(e,n=!0){(function(i){as=i})(Y_),vs(new Vr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new _e(new Xm(r.getProvider("auth-internal")),new ny(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new w(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ar(c.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Zn(TT,"4.4.2",e),Zn(TT,"4.4.2","esm2017")})();var R2="@firebase/firestore-compat",N2="0.3.25";function L_(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new w("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function qS(){if(typeof Uint8Array>"u")throw new w("unimplemented","Uint8Arrays are not available in this environment.")}function HS(){if(!Fb())throw new w("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Ah=class t{constructor(e){this._delegate=e}static fromBase64String(e){return HS(),new t(bn.fromBase64String(e))}static fromUint8Array(e){return qS(),new t(bn.fromUint8Array(e))}toBase64(){return HS(),this._delegate.toBase64()}toUint8Array(){return qS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function N_(t){return O2(t,["next","error","complete"])}function O2(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var O_=class{enableIndexedDbPersistence(e,n){return nS(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return rS(e._delegate)}clearIndexedDbPersistence(e){return oS(e._delegate)}},Sh=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ar||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Lt("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){XA(this._delegate,e,n,r)}enableNetwork(){return aS(this._delegate)}disableNetwork(){return uS(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,w_("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return sS(this._delegate)}onSnapshotsInSync(e){return VS(this._delegate,e)}get app(){if(!this._appCompat)throw new w("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ms(this,E_(this._delegate,e))}catch(n){throw pt(n,"collection()","Firestore.collection()")}}doc(e){try{return new An(this,Ou(this._delegate,e))}catch(n){throw pt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Li(this,JA(this._delegate,e))}catch(n){throw pt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return LS(this._delegate,n=>e(new Mh(this,n)))}batch(){return $e(this._delegate),new xh(new _h(this._delegate,e=>fs(this._delegate,e)))}loadBundle(e){return cS(this._delegate,e)}namedQuery(e){return lS(this._delegate,e).then(n=>n?new Li(this,n):null)}},ps=class extends ss{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ah(new bn(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return An.forKey(n,this.firestore,null)}};function k2(t){Cb(t)}var Mh=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new ps(e)}get(e){let n=ki(e);return this._delegate.get(n).then(r=>new Fi(this._firestore,new Ut(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=ki(e);return r?(L_("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=ki(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=ki(e);return this._delegate.delete(n),this}},xh=class{constructor(e){this._delegate=e}set(e,n,r){let i=ki(e);return r?(L_("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=ki(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=ki(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},gs=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new Dr(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Vi(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new ps(e),n),i.set(n,o)),o}};gs.INSTANCES=new WeakMap;var An=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ps(e)}static forPath(e,n,r){if(e.length%2!==0)throw new w("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new pe(n._delegate,r,new b(e)))}static forKey(e,n,r){return new t(n,new pe(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ms(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ms(this.firestore,E_(this._delegate,e))}catch(n){throw pt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=we(e),e instanceof pe?I_(this._delegate,e):!1}set(e,n){n=L_("DocumentReference.set",n);try{return n?M_(this._delegate,e,n):M_(this._delegate,e)}catch(r){throw pt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?x_(this._delegate,e):x_(this._delegate,e,n,...r)}catch(i){throw pt(i,"updateDoc()","DocumentReference.update()")}}delete(){return kS(this._delegate)}onSnapshot(...e){let n=GS(e),r=WS(e,i=>new Fi(this.firestore,new Ut(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return P_(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=xS(this._delegate):e?.source==="server"?n=PS(this._delegate):n=MS(this._delegate),n.then(r=>new Fi(this.firestore,new Ut(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(gs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function pt(t,e,n){return t.message=t.message.replace(e,n),t}function GS(t){for(let e of t)if(typeof e=="object"&&!N_(e))return e;return{}}function WS(t,e){var n,r;let i;return N_(t[0])?i=t[0]:N_(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Fi=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new An(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return S_(this._delegate,e._delegate)}},Vi=class extends Fi{data(e){let n=this._delegate.data(e);return this._delegate._converter||Tb(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Li=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new ps(e)}where(e,n,r){try{return new t(this.firestore,Yn(this._delegate,_S(e,n,r)))}catch(i){throw pt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Yn(this._delegate,wS(e,n)))}catch(r){throw pt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Yn(this._delegate,ES(e)))}catch(n){throw pt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Yn(this._delegate,IS(e)))}catch(n){throw pt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Yn(this._delegate,DS(...e)))}catch(n){throw pt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Yn(this._delegate,CS(...e)))}catch(n){throw pt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Yn(this._delegate,TS(...e)))}catch(n){throw pt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Yn(this._delegate,bS(...e)))}catch(n){throw pt(n,"endAt()","Query.endAt()")}}isEqual(e){return D_(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=NS(this._delegate):e?.source==="server"?n=OS(this._delegate):n=RS(this._delegate),n.then(r=>new ku(this.firestore,new en(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=GS(e),r=WS(e,i=>new ku(this.firestore,new en(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return P_(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(gs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},k_=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Vi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},ku=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Li(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Vi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new k_(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Vi(this._firestore,r))})}isEqual(e){return S_(this._delegate,e._delegate)}},ms=class t extends Li{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new An(this.firestore,e):null}doc(e){try{return e===void 0?new An(this.firestore,Ou(this._delegate)):new An(this.firestore,Ou(this._delegate,e))}catch(n){throw pt(n,"doc()","CollectionReference.doc()")}}add(e){return FS(this._delegate,e).then(n=>new An(this.firestore,n))}isEqual(e){return I_(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(gs.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function ki(t){return re(t,pe)}var F_=class t{constructor(...e){this._delegate=new Jt(...e)}static documentId(){return new t(Re.keyField().canonicalString())}isEqual(e){return e=we(e),e instanceof Jt?this._delegate._internalPath.isEqual(e._internalPath):!1}};var V_=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=US();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=jS();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=BS(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=$S(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=zS(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var F2={Firestore:Sh,GeoPoint:Mi,Timestamp:Ie,Blob:Ah,Transaction:Mh,WriteBatch:xh,DocumentReference:An,DocumentSnapshot:Fi,Query:Li,QueryDocumentSnapshot:Vi,QuerySnapshot:ku,CollectionReference:ms,FieldPath:F_,FieldValue:V_,setLogLevel:k2,CACHE_SIZE_UNLIMITED:eS};function V2(t,e){t.INTERNAL.registerComponent(new Vr("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},F2)))}function L2(t){V2(t,(e,n)=>new Sh(e,n,new O_)),t.registerVersion(R2,N2)}L2(st);function j2(t,e=Is){return new Z(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function KS(t,e){return j2(t,e)}function U2(t,e){return KS(t,e).pipe($r(void 0),Cs(),L(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function B_(t,e){return KS(t,e).pipe(L(n=>({payload:n,type:"query"})))}var Ph=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=JS(r,n);return new Nh(i,o,this.afs)}snapshotChanges(){return U2(this.ref,this.afs.schedulers.outsideAngular).pipe(_t)}valueChanges(e={}){return this.snapshotChanges().pipe(L(({payload:n})=>e.idField?ge(N({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return ie(this.ref.get(e)).pipe(_t)}};function Rh(t,e){return B_(t,e).pipe($r(void 0),Cs(),L(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let c=o.find(d=>d.doc.ref.isEqual(a.ref)),l=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&l&&JSON.stringify(l.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function QS(t,e,n){return Rh(t,n).pipe(Br((r,i)=>B2(r,i.map(o=>o.payload),e),[]),rf(),L(r=>r.map(i=>({type:i.type,payload:i}))))}function B2(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=$2(t,r))}),t}function j_(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function $2(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return j_(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return j_(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return j_(t,e.oldIndex,1);break}return t}function YS(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Nh=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Rh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(L(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe($r(void 0),Cs(),Be(([r,i])=>i.length>0||!r),L(([,r])=>r),_t)}auditTrail(e){return this.stateChanges(e).pipe(Br((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=YS(e);return QS(this.query,n,this.afs.schedulers.outsideAngular).pipe(_t)}valueChanges(e={}){return B_(this.query,this.afs.schedulers.outsideAngular).pipe(L(n=>n.payload.docs.map(r=>e.idField?ge(N({},r.data()),{[e.idField]:r.id}):r.data())),_t)}get(e){return ie(this.query.get(e)).pipe(_t)}add(e){return this.ref.add(e)}doc(e){return new Ph(this.ref.doc(e),this.afs)}},U_=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Rh(this.query,this.afs.schedulers.outsideAngular).pipe(_t):Rh(this.query,this.afs.schedulers.outsideAngular).pipe(L(n=>n.filter(r=>e.indexOf(r.type)>-1)),Be(n=>n.length>0),_t)}auditTrail(e){return this.stateChanges(e).pipe(Br((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=YS(e);return QS(this.query,n,this.afs.schedulers.outsideAngular).pipe(_t)}valueChanges(e={}){return B_(this.query,this.afs.schedulers.outsideAngular).pipe(L(r=>r.payload.docs.map(i=>e.idField?N({[e.idField]:i.id},i.data()):i.data())),_t)}get(e){return ie(this.query.get(e)).pipe(_t)}},ZS=new M("angularfire2.enableFirestorePersistence"),XS=new M("angularfire2.firestore.persistenceSettings"),z2=new M("angularfire2.firestore.settings"),q2=new M("angularfire2.firestore.use-emulator");function JS(t,e=n=>n){return{query:e(t),ref:t}}var H2=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,u,c,l,d,h,f,_,v,m,I,P){this.schedulers=u;let T=Ca(n,a,r),R=l;d&&em(T,a,h,_,v,m,f,I),[this.firestore,this.persistenceEnabled$]=Ll(`${T.name}.firestore`,"AngularFirestore",T.name,()=>{let j=a.runOutsideAngular(()=>T.firestore());if(o&&j.settings(o),R&&j.useEmulator(...R),i&&!ti(s)){let q=()=>{try{return ie(j.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(he){return typeof console<"u"&&console.warn(he),F(!1)}};return[j,a.runOutsideAngular(q)]}else return[j,F(!1)]},[o,R,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=JS(i,r),a=this.schedulers.ngZone.run(()=>o);return new Nh(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new U_(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Ph(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(D(Co),D(To,8),D(ZS,8),D(z2,8),D(et),D(J),D(kl),D(XS,8),D(q2,8),D(tm,8),D(Kg,8),D(Qg,8),D(Yg,8),D(Zg,8),D(Xg,8),D(Jg,8),D(si,8))};static \u0275prov=O({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),eM=(()=>{class t{constructor(){st.registerVersion("angularfire",ai.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:ZS,useValue:!0},{provide:XS,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Ce({type:t});static \u0275inj=De({providers:[H2]})}return t})();var W2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},D3=ge(N({},W2),{"[class.ng-submitted]":"isSubmitted"});var K2=new M("CallSetDisabledState",{providedIn:"root",factory:()=>tM}),tM="always";var Q2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({});let t=e;return t})();var nM=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:K2,useValue:r.callSetDisabledState??tM}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ce({type:e}),e.\u0275inj=De({imports:[Q2]});let t=e;return t})();var rM={production:!1,firebaseConfig:{apiKey:"AIzaSyBjK6Iepet70a0ApWMjYkEA6Wcx10MBy3Q",authDomain:"bk-burger.firebaseapp.com",databaseURL:"https://bk-burger-default-rtdb.firebaseio.com",projectId:"bk-burger",storageBucket:"bk-burger.appspot.com",messagingSenderId:"586729585880",appId:"1:586729585880:web:b16e71013809bec688ebad",measurementId:"G-S6TJCELC9P"}};var iM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ce({type:e,bootstrap:[UD]}),e.\u0275inj=De({imports:[H0,FD,nC.initializeApp(rM.firebaseConfig),eM,rC,F0,nM]});let t=e;return t})();q0().bootstrapModule(iM).catch(t=>console.error(t));
